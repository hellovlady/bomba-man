(this["webpackJsonpbomba-man"]=this["webpackJsonpbomba-man"]||[]).push([[4],{542:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(e){setTimeout(e,t)}))},o=function(t){return function(e){e.currentTarget.blur(),t(e)}},i=function(t){return null===t||void 0===t},a=function(t,e){return Object.keys(t)[Object.values(t).indexOf(e)]}},545:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return u}));var r,o,i=n(34),a=n(29),c=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(a.e)(r||(r=Object(i.a)(["\n\t0% { transform: scale(0, 0); }\n\t25% { transform: scale(0.9, 1.1); }\n\t50% { transform: scale(1.1, 0.9); }\n\t75% { transform: scale(0.95, 1.05); }\n\t100% { transform: scale(1, 1); "," }\n"])),t?"opacity: 1;":"")},u=function(t,e){return Object(a.e)(o||(o=Object(i.a)(["\n\t0%, 100% { \n\t\ttransform: translateY(0px); \n\t\tbox-shadow: 0 10px 10px #000000;\n\t}\n\t50% {\n\t\ttransform: translateY(-10px);\n\t\tbox-shadow: 0 20px ","px ",";\n\t}\n"])),Math.ceil(t/6)+10,e)}},549:function(t,e,n){"use strict";var r=n(8),o=n(200),i=n(201),a=n(44),c=n(2),u=n(550),s=n(6),l=function(t){return Object(s.jsx)(o.a,Object(r.a)({icon:i.b},t))};e.a=function(t){var e=t.id,n=t.size,r=t.explodingDuration,o=t.coordinates,i=o.top,f=o.left,d=t.onDeathAnimationComplete;return Object(c.useEffect)((function(){setTimeout((function(){null===d||void 0===d||d(e)}),1e3*r+1e3)}),[]),Object(s.jsx)(u.a,{$top:i,$left:f,$size:n,$animationDelay:"".concat(r,"s"),children:Object(s.jsx)(l,{color:a.b.palette.color.default})})}},550:function(t,e,n){"use strict";var r,o,i=n(34),a=n(545),c=n(29),u=c.d.div(r||(r=Object(i.a)(["\n\tposition: absolute;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\topacity: 0;\n\tsvg {\n\t\theight: 100% !important;\n\t\twidth: 100% !important;\n\t\tmax-width: 70%;\n\t\tmax-height: 80%;\n\t}\n\t","\n"])),(function(t){var e=t.$size,n=t.$animationDelay,r=t.$top,u=t.$left;return Object(c.c)(o||(o=Object(i.a)(["\n\t\ttop: ","px;\n\t\tleft: ","px;\n\t\twidth: ","px;\n\t\theight: ","px;\n\t\tanimation: "," var(--block-animation-duration)\n\t\t\t"," ease-out forwards;\n\t"])),r,u,e,e,Object(a.a)(!0),n||"")}));e.a=u},551:function(t,e,n){"use strict";var r,o=n(9),i=n(8),a=n(200),c=n(201),u=n(4),s=n(44),l=n(6),f=(r={},Object(o.a)(r,u.j.Life,{color:s.b.palette.color.success,icon:function(t){return Object(l.jsx)(a.a,Object(i.a)({icon:c.g},t))}}),Object(o.a)(r,u.j.BombCount,{color:s.b.palette.color.error,icon:function(t){return Object(l.jsx)(a.a,Object(i.a)({icon:c.a},t))}}),Object(o.a)(r,u.j.BombSize,{color:s.b.palette.color.warning,icon:function(t){return Object(l.jsx)(a.a,Object(i.a)({icon:c.j},t))}}),Object(o.a)(r,u.j.MovementSpeed,{color:s.b.palette.color.info,icon:function(t){return Object(l.jsx)(a.a,Object(i.a)({icon:c.l},t))}}),r);e.a=f},552:function(t,e,n){"use strict";var r,o,i=n(8),a=n(80),c=n(65),u=n(34),s=n(4),l=n(2),f=n(11),d=n(29),b=n(44),p=(n(557),n(6)),v=d.d.div(r||(r=Object(u.a)(["\n\t","\n"])),(function(t){var e=t.$size,n=t.$name,r=e/32,i=32*r,a=4*i,c=-1*r*32,s=e/4*-1,l=Math.min(-15,2.5*s),f=Math.min(30,Math.ceil(i/6)),p=Math.floor(i/10),v=20*n.length+i/20,m="\n\t\t\twidth: ".concat(i,"px;\n\t\t\theight: ").concat(i,"px;\n\t\t"),g="\n\t\t\twidth: ".concat(a,"px;\n\t\t\theight: ").concat(a,"px;\n\t\t");return Object(d.c)(o||(o=Object(u.a)(["\n\t\t\tposition: absolute;\n\t\t\tz-index: 9999;\n\t\t\t",";\n\t\t\ttransition-duration: 450ms;\n\n\t\t\t&#P1 .name {\n\t\t\t\tbackground-color: ",";\n\t\t\t}\n\t\t\t&#P2 .name {\n\t\t\t\tbackground-color: ",";\n\t\t\t}\n\t\t\t&#P3 .name {\n\t\t\t\tbackground-color: ",";\n\t\t\t}\n\t\t\t&#P4 .name {\n\t\t\t\tbackground-color: ",";\n\t\t\t}\n\n\t\t\t.character {\n\t\t\t\ttop: ","px;\n\t\t\t\ttransform: translate(","px);\n\n\t\t\t\t",";\n\t\t\t\toverflow: hidden;\n\t\t\t\tposition: relative;\n\t\t\t\t/* MOVEMENT TRANSITION */\n\t\t\t\ttransition-duration: 400ms;\n\n\t\t\t\t& .name {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tleft: 0;\n\t\t\t\t\tright: 0;\n\t\t\t\t\ttop: ","px;\n\t\t\t\t\tfont-size: ","px;\n\t\t\t\t\tmax-width: ","px;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\tborder: 1px dashed white;\n\t\t\t\t\tborder-radius: 9999px;\n\t\t\t\t\topacity: 1;\n\t\t\t\t\tmargin: auto;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t}\n\n\t\t\t\t& .shadow {\n\t\t\t\t\t",";\n\t\t\t\t\topacity: 0.75;\n\t\t\t\t}\n\n\t\t\t\t& .spritesheet {\n\t\t\t\t\t",";\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tleft: 0;\n\t\t\t\t}\n\n\t\t\t\t/* DIRECTION */\n\t\t\t\t&[data-facing='Right'] .spritesheet {\n\t\t\t\t\ttop: ","px;\n\t\t\t\t}\n\t\t\t\t&[data-facing='Up'] .spritesheet {\n\t\t\t\t\ttop: ","px;\n\t\t\t\t}\n\t\t\t\t&[data-facing='Left'] .spritesheet {\n\t\t\t\t\ttop: ","px;\n\t\t\t\t}\n\n\t\t\t\t&[data-walking='true'] {\n\t\t\t\t\t/* MOVEMENT ANIMATION */\n\t\t\t\t\t.spritesheet {\n\t\t\t\t\t\tanimation: walkAnimation 0.6s steps(4) infinite;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* SHADOW ANIMATION */\n\t\t\t\t\t.shadow {\n\t\t\t\t\t\tanimation: shadowAnimation 0.3s infinite;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/* HIGHLIGHT/DAMAGE ANIMATION */\n\t\t\t\t&[data-highlight='true'] .spritesheet {\n\t\t\t\t\tanimation: opacityAnimation 0.6s steps(4) infinite;\n\t\t\t\t}\n\t\t\t}\n\t\t"])),m,b.b.palette.color.warning,b.b.palette.color.info,b.b.palette.color.success,b.b.palette.color.error,l,s,m,p,f,v,m,g,1*c,2*c,3*c)})),m=function(t){var e=t.id,n=t.shouldBindEvent,r=t.keyboardConfig,o=t.onPlayerIsWalking,i=t.setDirection,a=t.setIsWalking,c=Object(l.useRef)((new Date).getTime());Object(l.useEffect)((function(){var t=function(t){if(n){var u=function(t){return r?Object(f.j)(t.code,r):null}(t);if(!u)return null===o||void 0===o||o(!1,e),void a(!1);c.current=(new Date).getTime(),a(!0),function(t){i(t)}(u)}},u=function(){n&&setTimeout((function(){var t=(new Date).getTime()-200;c.current>=t||(a(!1),null===o||void 0===o||o(!1,e))}),200)};return n&&(document.addEventListener("keydown",t),document.addEventListener("keyup",u)),function(){document.removeEventListener("keydown",t),document.removeEventListener("keyup",u)}}),[e,r,o,i,a,n])};e.a=function(t){var e=t.id,n=t.currentOnlinePlayerId,r=t.name,o=t.coordinates,u=o.top,f=o.left,d=t.style,b=t.keyboardConfig,g=t.highlight,j=t.size,O=t.onPlayerIsWalking,h=t.isWalking,y=void 0!==h&&h,I=t.direction,k=void 0===I?s.b.DOWN:I,w=t.isNPC,A=void 0!==w&&w,x=Object(c.a)(t,["id","currentOnlinePlayerId","name","coordinates","style","keyboardConfig","highlight","size","onPlayerIsWalking","isWalking","direction","isNPC"]),E=Object(l.useState)(k),T=Object(a.a)(E,2),N=T[0],B=T[1],D=Object(l.useState)(y),P=Object(a.a)(D,2),S=P[0],M=P[1],C=!A&&(!n||e===n);m({id:e,currentOnlinePlayerId:n,keyboardConfig:b,shouldBindEvent:C,onPlayerIsWalking:O,setDirection:B,setIsWalking:M});var R=y,U=k;return C&&(R=S,U=N),Object(p.jsx)(v,Object(i.a)(Object(i.a)({id:e,style:Object(i.a)(Object(i.a)({},d),{},{top:u,left:f}),className:"character-wrapper"},x),{},{$size:2*j,$name:r,children:Object(p.jsxs)("div",{className:"character","data-facing":U,"data-walking":R.toString(),"data-highlight":g,children:[Object(p.jsx)("div",{className:"name",children:r}),Object(p.jsx)("img",{className:"shadow pixel-art",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAWUlEQVRYR+3XsQkAIAxEUe2cRXADx3cDwVksJYX970T41sE7Xqrk9Pjlx/nJAgoooIACCiiggAIKKKDAXwKt9k0uqblGIXMxgwVo+A2mJSyABYKWroHyx58Hv0cUIWfm8TkAAAAASUVORK5CYII=",alt:"sprite skin"}),Object(p.jsx)("img",{className:"spritesheet pixel-art",src:"data:image/png;base64,UklGRuYBAABXRUJQVlA4TNkBAAAvf8AfEDegkI0kaB1Wc63vv4M4DQUByDA6SKk4ex2mqG0bqCCKrfwp7N5em/8A4P9XnTtjLpKQBLi1tbdt/gbqnTCAN/D5RCygH6yhQ4C1GfefQQG/fjA4FhH9Z9i2bZjkAbZdhsAn0N9Qh3Rps6Tr7enSZ9lZ1PV+6bPsLO4q4Fj1ORugiqJzAdemHQCwqMszM8vOoq4wzXNrso4rVOW6YeXnwAFDfg66i/MBl3QOm5+DDrAmX0BjNK5QAfYsOYVzJHCjcr1VjGTyTmZhrj2PUeUKvuZIeWc7iQ6TdK4URIcJSXIQyS75V0Q70f+F9g48tFcs4Nq6A4Vd69w7RGdRF4UBhmRnWZd1wlhZB3tQuabj0JFQXb4+n2pMKlfoeHgRzhW9cK7ZcyKVa2Kehcn3SWRURueqkpdcSWIEE0jv+ne4d0DeKxZw7a5jV/aO4IDByDlGSZe/VvYc1dUpu+RzNrlqa+ZxyrtOPESNyzs+5s9FtbRGUT2mUeUKdapHZe4wkzZ3oH+muYNvAMjO8q5tO7CMS7MHeJRxrSt3gHsgVzBlXYOUG3QYOtK4yLpTq8oVqMX4dFDlEh+OrVHlConjTLpcgrklARpJcDYpKl0xNco1wgRTwLUPTQA=",alt:"sprite skin"})]})}))}},557:function(t,e,n){},578:function(t,e,n){"use strict";var r=n(2);e.a=function(t,e,n){var o=Object(r.useRef)(),i=Object(r.useRef)();Object(r.useEffect)((function(){o.current=t}),[t]);var a=Object(r.useCallback)((function(){i.current&&clearInterval(i.current)}),[]),c=Object(r.useCallback)((function(){var t;null===(t=o.current)||void 0===t||t.call(o)}),[]);return Object(r.useEffect)((function(){return n||(i.current=setInterval(c,e)),function(){return a()}}),[e,n,a,c]),Object(r.useEffect)((function(){n&&a()}),[n,a]),a}},579:function(t,e,n){"use strict";var r=n(2);e.a=function(t){var e=Object(r.useRef)();return Object(r.useEffect)((function(){e.current=t}),[t]),e.current}},586:function(t,e,n){"use strict";n.d(e,"b",(function(){return D}));var r=n(9),o=n(4),i=n(2),a=n(11),c=n(80),u=n(8),s=n(39),l=n(193);window.NPC_DEBUG=!1;var f,d,b=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";window.NPC_DEBUG&&(e=console).log.apply(e,Object(s.a)([n,t].filter(Boolean)))};!function(t){t[t.IsDanger=-1e4]="IsDanger",t[t.IsNonBreakingTile=-100]="IsNonBreakingTile",t[t.IsNonAdjacentNonBreakingTile=-5]="IsNonAdjacentNonBreakingTile",t[t.IsStuck=0]="IsStuck",t[t.IsEmptyTile=2]="IsEmptyTile",t[t.IsBreakingTile=3]="IsBreakingTile",t[t.IsPlayer=4]="IsPlayer",t[t.IsPossibleFireExit=1]="IsPossibleFireExit",t[t.IsPowerUp=1e3]="IsPowerUp"}(d||(d={}));var p=function(t,e){var n=t.ySquare,r=t.xSquare,o=e.ySquare,i=e.xSquare;return n!==o||r!==i},v=function(t){var e=Object.values(f.bombs);if(!e.length)return!1;var n=[];return e.forEach((function(t){var e,r=t.playerId,i=t.top,c=t.left,u=f.players,s=Object(a.h)(f.gameMap,{top:i,left:c},(null===(e=u[r])||void 0===e?void 0:e.state)?Object(a.k)(u[r].state,o.j.BombSize,f.powerUpConfig):f.powerUpConfig.defaults[o.j.BombSize],f.sizes).coordinatesToSetOnFire;Object.values(s).flat().forEach((function(t){n.push(t)}))})),n.findIndex((function(e){return!p(e,t)}))>=0},m=function(t,e){var n=t.ySquare,r=t.xSquare,o=e.ySquare,i=e.xSquare;return r===i&&(n===o+1||n===o-1)||n===o&&(r===i+1||r===i-1)},g=function(t,e,n,r){if(m(t,e)){var o=(new Date).getTime();return f.lastBombTime<=o-1e3*Object.values(f.bombDuration).reduce((function(t,e){return t+e}),0)&&(f.dropBomb(),f.lastBombTime=o),r}return p(t,e)?n:null},j=function(t,e,n){var r=t.ySquare,i=t.xSquare;if(!Object(a.q)(t,f.sizes.map)){var c,u=f.gameMap[r][i];if(v(t))return v(e)?d.IsPossibleFireExit:d.IsDanger;if(Object.values(o.j).includes(u))return d.IsPowerUp*n;if(!p(t,e))return d.IsStuck;if(u===o.k.Empty)return d.IsEmptyTile;if(c=u,Object.values(o.h).includes(c)){var s=g(t,e,d.IsPlayer);if(null!==s)return s}if(u===o.k.Breaking){if(v(e))return d.IsDanger;var l=g(t,e,d.IsBreakingTile);if(null!==l)return l}return u===o.k.NonBreaking?m(t,e)?d.IsNonBreakingTile:d.IsNonAdjacentNonBreakingTile:d.IsStuck}},O=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=e.ySquare,c=e.xSquare,s={};return Object.values(o.b).forEach((function(e){var l=a,d=c;switch(f.id++,e){case o.b.LEFT:d--;break;case o.b.UP:l--;break;case o.b.RIGHT:d++;break;case o.b.DOWN:l++}var b=j({ySquare:l,xSquare:d},n,r);s[f.id]={score:b,hasChildren:r>0&&void 0!==b,parentId:i,direction:e,level:r},r>0&&b&&(s=Object(u.a)(Object(u.a)({},s),t({ySquare:l,xSquare:d},n,r-1,f.id)))})),s},h=function(t){return t.reduce((function(t,e){var n=e;(void 0===e.score&&(n=t),t.score>e.score&&(n=t),t.score<e.score&&(n=e),t.score===e.score)&&(n=0===Object(l.a)(2)?e:t);return n}))},y=function(t){var e={};return t.forEach((function(t){var n=t.parentId;e[n]?e[n].push(t):e[n]=[t]})),e},I=function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(null!==r){n=void 0===r?Object.values(e).filter((function(t){return!t.hasChildren})):Object.values(e).filter((function(t){return t.parentId===e[r].parentId}));var o=y(n);Object.entries(o).forEach((function(n){var r=Object(c.a)(n,2),o=r[0],i=r[1],a="null"===o?null:Number(o),u=h(i);a?(e[a].score=e[a].score+(u.score?u.score:0),t(e,a)):f.parentNodes.some((function(t){return t.direction===u.direction}))||f.parentNodes.push(u)}))}},k=function(t){f.id=0,f.parentNodes=[];var e=O(t,t,void 0);return b(t,"currentCoordinates"),b(e,"originalMoves"),I(e),b(e,"scoredMoves"),h(f.parentNodes)},w=n(578),A=n(579),x=n(40),E=n(6),T=function(){var t=Object(i.useRef)({P1:document.getElementById("P1"),P2:document.getElementById("P2"),P3:document.getElementById("P3"),P4:document.getElementById("P4")});return{playerRefs:t,recalculate:function(){Object.keys(t.current).forEach((function(e){t.current[e]=document.getElementById(e)}))}}},N=function(){return Object(i.useRef)({P1:(new Date).getTime(),P2:(new Date).getTime(),P3:(new Date).getTime(),P4:(new Date).getTime()})},B=function(t,e){var n=N();return function(r){var i=t[r];if(!i)return!1;var c=i.state,u=(new Date).getTime(),s=Object(a.k)(c,o.j.MovementSpeed,e);return u-n.current[r]>s&&(n.current[r]=u,!0)}},D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onKeyDown,n=t.onKeyUp,r=Object(i.useRef)({});return Object(i.useEffect)((function(){var t=function(t){if(r.current){var o="keydown"===t.type;t.code===x.h&&t.preventDefault(),function(t,e){r.current[t.code]=e}(t,o),o?null===e||void 0===e||e(t.code):null===n||void 0===n||n(t.code)}};return window.addEventListener("keyup",t),window.addEventListener("keydown",t),function(){window.removeEventListener("keyup",t),window.removeEventListener("keydown",t)}}),[e,n]),r},P=function(t,e,n){var r=t[e];return!!r&&!Object(a.n)(r.state,n)},S=function(t,e,n,r){var c=function(t,e,n){return Object(i.useMemo)((function(){var r,i=null===(r=t[e])||void 0===r?void 0:r.state;return i?Object(a.k)(i,o.j.MovementSpeed,n):null}),[e,t,n])}(t,e,n);Object(w.a)((function(){P(t,e,n)&&r(e)}),c||Number.MAX_SAFE_INTEGER,!c)},M=function(t,e,n){return function(r){Object.keys(t).forEach((function(o){if(P(t,o,n)){var i=t[o].keyboardConfig;if(i)Object(a.r)(i,"DropBomb").includes(r)&&e(o)}}))}},C=function(t){var e=t.playerId,n=t.players,r=t.powerUpConfig,o=t.cb;return S(n,e,r,o),null};e.a=function(t){var e=t.state,n=t.provider,c=t.type,u=t.playerId,s=n.dropBomb,l=n.triggerMove,d=e.gameMap,p=e.bombs,v=e.players,m=e.is3D,g=e.config,j=g.powerUps,O=g.sizes,h=g.duration.bomb,y=T().playerRefs,I=Object(i.useMemo)((function(){return c===o.g.Local?v:Object(r.a)({},u,v[u])}),[v]),w=D({onKeyDown:M(I,s,j)}),x=N(),P=function(t){var e=t.triggerMove,n=t.players,r=t.timeOutRef,o=t.keyMap,c=t.is3D,u=t.powerUpConfig,s=T(),l=s.playerRefs,f=s.recalculate,d=Object(A.a)(c);Object(i.useEffect)((function(){d!==c&&f()}),[c,d,f]);var b=B(n,u),p=function(t,n){var r=Object(a.i)(o,n);r.length&&r.forEach((function(n){e({playerId:t,direction:n,ref:l.current[t]})}))};return{move:p,handleActions:function(t){if(o.current&&r.current&&Object.values(o.current).filter(Boolean).length){var e=n[t].keyboardConfig;if(e&&Object.keys(e).length){var i=l.current[t];i||(l.current[t]=document.getElementById(t)),i&&b(t)&&p(t,e)}}}}}({triggerMove:l,players:I,timeOutRef:x,keyMap:w,is3D:m,powerUpConfig:j}).handleActions,S=B(v,j),R=function(t){y.current[t]||(y.current[t]=document.getElementById(t)),function(t){var e=t.playerId,n=t.players,r=t.gameMap,o=t.bombs,i=t.triggerMove,c=t.dropBomb,u=t.ref,s=t.powerUpConfig,l=t.sizes,d=t.bombDuration,p=n[e];if(f={id:0,parentNodes:[],lastBombTime:0,dropBomb:function(){return c(e)},gameMap:r,bombs:o,players:n,powerUpConfig:s,sizes:l,bombDuration:d},p){var v=Object(a.l)(p.coordinates,l.movement),m=k(v);b(m,"bestMovementNode"),((null===m||void 0===m?void 0:m.score)||0)>0&&i({playerId:e,direction:m.direction,ref:u})}}({playerId:t,dropBomb:s,gameMap:d,bombs:p,players:I,triggerMove:function(e){S(t)&&l(e)},ref:y.current[t],powerUpConfig:j,sizes:O,bombDuration:h})};return Object.keys(I).map((function(t){var e=I[t].isNPC;return Object(E.jsx)(C,{playerId:t,players:I,powerUpConfig:j,cb:e?R:P},t)}))}}}]);
//# sourceMappingURL=4.a72bb75d.chunk.js.map
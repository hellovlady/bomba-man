(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{239:function(t,e,n){},243:function(t,e,n){},244:function(t,e,n){},430:function(t,e,n){"use strict";n.r(e);var r,a,o,i,c,s,u,l,d,f,p=n(2),b=n.n(p),m=n(100),v=n.n(m),g=(n(239),n(15)),O=n(5),j=n(10),y=n(11),h=y.c.div(r||(r=Object(j.a)(["\n\twidth: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n"])));!function(t){t.UP="Up",t.RIGHT="Right",t.DOWN="Down",t.LEFT="Left"}(a||(a={})),function(t){t.X="X",t.Y="Y"}(o||(o={})),function(t){t.Firing="Firing",t.Exploding="Exploding",t.Exploded="Exploded"}(i||(i={})),function(t){t.P1="P1",t.P2="P2",t.P3="P3",t.P4="P4"}(c||(c={})),(u=s||(s={})).Empty="T1",u.Breaking="T2",u.NonBreaking="T3",(d=l||(l={})).Life="PU1",d.BombCount="PU2",d.BombSize="PU3",d.MovementSpeed="PU4",function(t){t.Bomb="B",t.FireCore="FC",t.FireHorizontal="FH",t.FireVertical="FV"}(f||(f={}));var S,x=Object.values(f).filter((function(t){return t!==f.Bomb})),E=n(28),w=n(153),P=n(8),k=n(48),C=n(26);function T(t,e){var n=e||t,r=void 0!==e&&t||0;return Math.floor(Math.random()*(n-r))+r}var D,I=function(t,e){return{ySquare:t.top/e,xSquare:t.left/e}},z=function(t,e){var n=t.xSquare;return{top:t.ySquare*e,left:n*e}},_=function(t,e){var n,r;if(void 0!==t.xSquare)n=t.xSquare,r=t.ySquare;else{var a=I(t,e);n=a.xSquare,r=a.ySquare}return{xSquare:n,ySquare:r}},q=function(t){var e=t-1;return{P1:{ySquare:0,xSquare:0},P2:{ySquare:0,xSquare:e},P3:{ySquare:e,xSquare:e},P4:{ySquare:e,xSquare:0}}},M=function(t,e,n){var r=n||function(t){var e=q(t),n=[[1,1],[-1,1],[-1,-1],[1,-1]];return Object.values(e).reduce((function(t,e,r){var a=e.xSquare,o=e.ySquare,i=n[r];t.push(e);for(var c=0;c<2;c++)0===c?t.push({xSquare:a+i[c],ySquare:o}):t.push({xSquare:a,ySquare:o+i[c]});return t}),[])}(t),a=[].concat(Object(k.a)(Object.keys(s)),Object(k.a)(Array(11-e).fill("Empty"))),o=Array(t).fill(0),i=o.reduce((function(t,e,n){return t[n]=o.reduce((function(t,e,n){return t[n]=s[a[T(a.length)]],t}),{}),t}),{});return r.forEach((function(t){var e=t.ySquare,n=t.xSquare;i[e][n]!==s.Empty&&(i[e][n]=s.Empty)})),i},R=function(t,e,n){var r=e.keyboardConfig[t],a=e.sizes,o=a.map,i=a.movement;return{id:t,coordinates:function(t,e){var n,r;if(void 0!==t.xSquare){var a=z(t,e);n=a.top,r=a.left}else n=t.top,r=t.left;return{top:n,left:r}}(n||q(o)[t],i),state:{deathCount:0,powerUps:Object.values(l).reduce((function(t,e){return t[e]=0,t}),{})},keyboardConfig:r}},B=function(){var t,e,n;return{powerUps:{chance:5,defaults:(t={},Object(P.a)(t,l.Life,1),Object(P.a)(t,l.BombCount,1),Object(P.a)(t,l.BombSize,1),Object(P.a)(t,l.MovementSpeed,200),t),increaseValues:(e={},Object(P.a)(e,l.Life,1),Object(P.a)(e,l.BombCount,1),Object(P.a)(e,l.BombSize,1),Object(P.a)(e,l.MovementSpeed,-15),e),maxDropCount:(n={},Object(P.a)(n,l.Life,4),Object(P.a)(n,l.BombCount,6),Object(P.a)(n,l.BombSize,6),Object(P.a)(n,l.MovementSpeed,5),n)},tiles:{blockTileChance:1},sizes:{map:15,character:32,tile:32,movement:32},duration:{bomb:{firing:2,exploding:1}},keyboardConfig:{P1:{MoveUp:C.j,MoveRight:C.b,MoveDown:C.f,MoveLeft:C.a,DropBomb:C.h},P2:{MoveUp:C.i,MoveRight:C.e,MoveDown:C.c,MoveLeft:C.d,DropBomb:C.g}}}},A=function(t){var e=t||B(),n=e.sizes.map,r=e.tiles.blockTileChance;return{players:{P1:R(c.P1,e)},gameMap:M(n,r),bombs:{},powerUps:{},config:B(),is3D:!1,isSideView:!1,animationCounter:0}},N=function(t,e){var n=t.xSquare,r=t.ySquare,a=e-1;return n<0||n>a||(r<0||r>a)},U=function(t,e,n){var r=n.map,a=n.movement,o=_(t,a);return!function(t,e){var n,r=e.xSquare,a=null===(n=t[e.ySquare])||void 0===n?void 0:n[r];return a===s.Breaking||a===s.NonBreaking||a===f.Bomb}(e,o)&&!N(o,r)},L="translateZ(calc(var(--tile-size) / 2 * 1px)) rotateX(0deg) rotateY(0deg) scale(1, 1)",F=(S={},Object(P.a)(S,o.X,{REPLACE:/rotateX\(-?\d+deg\)/g,FIND:Object(w.a)(/rotateX\((\x2D?[0-9]+)deg\)/,{degree:1})}),Object(P.a)(S,o.Y,{REPLACE:/rotateY\(-?\d+deg\)/g,FIND:Object(w.a)(/rotateY\((\x2D?[0-9]+)deg\)/,{degree:1})}),S),G=function(t,e,n){t.style.transition="".concat(n,"ms"),t.style.transform=function(t,e){var n=90,r=o.Y;return e!==a.DOWN&&e!==a.LEFT||(n*=-1),e!==a.UP&&e!==a.DOWN||(r=o.X),t.replace(F[r].REPLACE,"rotate".concat(r,"(").concat(n,"deg)"))}(t.style.transform,e)},H=function(t,e,n,r,o){var i=t.playerConfig,c=i.id,s=i.coordinates,u=s.top,l=s.left,d=t.direction,f=t.is3D,p=t.gameMap;if(d){var b,m=o.movement,v=u,g=l;switch(d){case a.UP:v=u-m;break;case a.RIGHT:g=l+m;break;case a.DOWN:v=u+m;break;case a.LEFT:g=l-m}if(U({top:v,left:g},p,o))f&&((b=r).style.transition="0ms",b.style.transform=L),setTimeout((function(){f&&G(r,d,e),n({playerId:c,newCoordinates:{top:v,left:g}})}),0)}};!function(t){t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t.CORE="core"}(D||(D={}));var $,V,W=function(t,e,n){var r=[];return t[e][n]===s.Breaking&&r.push({ySquare:e,xSquare:n}),r},K=function(t,e){return t<0||t>=e},X=function(t,e,n,r){for(var a,o=r.map,i=r.movement,c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=_(e,i),l=u.xSquare,d=u.ySquare,p={xSquare:l,ySquare:d},b=(a={},Object(P.a)(a,D.HORIZONTAL,[]),Object(P.a)(a,D.VERTICAL,[]),Object(P.a)(a,D.CORE,[p]),a),m=function(t,e,n){b[n].push({xSquare:t,ySquare:e})},v=[[0,-1],[1,0],[0,1],[-1,0]],g=[D.VERTICAL,D.HORIZONTAL,D.VERTICAL,D.HORIZONTAL],O=0;O<4;O++)for(var j=l,y=d,h=g[O],S=!0,x=0;x<n;x++)if(S){var w=Object(E.a)(v[O],2),k=w[0],C=w[1];if(y+=C,!K(j+=k,o)&&!K(y,o)){var T=t[y][j];if(c){if(T!==f.FireHorizontal&&T!==f.FireVertical)continue;m(j,y,h)}switch(T){case s.Breaking:m(j,y,h),S=!1;break;case s.NonBreaking:S=!1;break;default:m(j,y,h)}}}return b},Z=function(t,e,n,r,a){var o,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=[],s=(o={},Object(P.a)(o,D.HORIZONTAL,[]),Object(P.a)(o,D.VERTICAL,[]),Object(P.a)(o,D.CORE,[]),o),u=X(t,n,r,a,i);return Object.keys(u).forEach((function(e){u[e].forEach((function(n){var r=n.ySquare,a=n.xSquare;s[e].push({xSquare:a,ySquare:r}),W(t,r,a).forEach((function(t){c.push(t)}))}))})),{coordinatesToSetOnFire:s,tilesToBreak:c}},Y=function(t,e,n){return n.defaults[e]+t.powerUps[e]*n.increaseValues[e]},J=function(t){return Object.values(l).includes(t)},Q=function(t,e){return t.deathCount>=Y(t,l.Life,e)};!function(t){t[t.IsDanger=-1e4]="IsDanger",t[t.IsNonBreakingTile=-100]="IsNonBreakingTile",t[t.IsNonAdjacentNonBreakingTile=-5]="IsNonAdjacentNonBreakingTile",t[t.IsStuck=0]="IsStuck",t[t.IsEmptyTile=2]="IsEmptyTile",t[t.IsBreakingTile=3]="IsBreakingTile",t[t.IsPlayer=4]="IsPlayer",t[t.IsPowerUp=1e3]="IsPowerUp"}(V||(V={}));var tt,et,nt,rt,at,ot,it,ct,st,ut,lt,dt,ft,pt,bt,mt,vt,gt,Ot=function(t,e){var n=t.ySquare,r=t.xSquare,a=e.ySquare,o=e.xSquare;return n!==a||r!==o},jt=function(t,e){var n=t.ySquare,r=t.xSquare,a=e.ySquare,o=e.xSquare;return r===o&&(n===a+1||n===a-1)||n===a&&(r===o+1||r===o-1)},yt=function(t,e,n,r){if(jt(t,e)){var a=(new Date).getTime();return $.lastBombTime<=a-1e3*Object.values($.bombDuration).reduce((function(t,e){return t+e}),0)&&($.dropBomb(),$.lastBombTime=a),r}return Ot(t,e)?n:null},ht=function(t,e,n){var r=t.ySquare,a=t.xSquare;if(!N(t,$.sizes.map)){var o,i=$.gameMap[r][a];if(function(t){var e=Object.values($.bombs);if(!e.length)return!1;var n=[];return e.forEach((function(t){var e=t.playerId,r=t.top,a=t.left,o=$.players,i=Z($.gameMap,o,{top:r,left:a},Y(o[e].state,l.BombSize,$.powerUpConfig),$.sizes).coordinatesToSetOnFire;Object.values(i).flat().forEach((function(t){n.push(t)}))})),n.findIndex((function(e){return!Ot(e,t)}))>=0}(t))return V.IsDanger;if(Object.values(l).includes(i))return V.IsPowerUp*n;if(!Ot(t,e))return V.IsStuck;if(i===s.Empty)return V.IsEmptyTile;if(o=i,Object.values(c).includes(o)){var u=yt(t,e,V.IsPlayer);if(null!==u)return u}if(i===s.Breaking){var d=yt(t,e,V.IsBreakingTile);if(null!==d)return d}return i===s.NonBreaking?jt(t,e)?V.IsNonBreakingTile:V.IsNonAdjacentNonBreakingTile:V.IsStuck}},St=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=e.ySquare,c=e.xSquare,s={};return Object.values(a).forEach((function(e){var u=i,l=c;switch($.id++,e){case a.LEFT:l--;break;case a.UP:u--;break;case a.RIGHT:l++;break;case a.DOWN:u++}var d=ht({ySquare:u,xSquare:l},n,r);s[$.id]={score:d,hasChildren:r>0&&void 0!==d,parentId:o,direction:e,level:r},r>0&&d&&(s=Object(O.a)(Object(O.a)({},s),t({ySquare:u,xSquare:l},n,r-1,$.id)))})),s},xt=function(t){return t.reduce((function(t,e){var n=e;(void 0===e.score&&(n=t),t.score>e.score&&(n=t),t.score<e.score&&(n=e),t.score===e.score)&&(n=0===T(2)?e:t);return n}))},Et=function(t){var e={};return t.forEach((function(t){var n=t.parentId;e[n]?e[n].push(t):e[n]=[t]})),e},wt=function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(null!==r){n=void 0===r?Object.values(e).filter((function(t){return!t.hasChildren})):Object.values(e).filter((function(t){return t.parentId===e[r].parentId}));var a=Et(n);Object.entries(a).forEach((function(n){var r=Object(E.a)(n,2),a=r[0],o=r[1],i="null"===a?null:Number(a),c=xt(o);i?(e[i].score=e[i].score+(c.score?c.score:0),t(e,i)):$.parentNodes.some((function(t){return t.direction===c.direction}))||$.parentNodes.push(c)}))}},Pt=function(t){$.id=0,$.parentNodes=[];var e=St(t,t,void 0);return wt(e),xt($.parentNodes)},kt=function(t,e){var n=Object(p.useRef)();Object(p.useEffect)((function(){n.current=t}),[t]),Object(p.useEffect)((function(){var t=setInterval((function(){var t;null===(t=n.current)||void 0===t||t.call(n)}),e);return function(){return clearInterval(t)}}),[e])},Ct=function(t){var e=Object(p.useRef)();return Object(p.useEffect)((function(){e.current=t}),[t]),e.current},Tt=n(4),Dt=function(){var t=Object(p.useRef)({P1:document.getElementById("P1"),P2:document.getElementById("P2"),P3:document.getElementById("P3"),P4:document.getElementById("P4")});return{playerRefs:t,recalculate:function(){Object.keys(t.current).forEach((function(e){t.current[e]=document.getElementById(e)}))}}},It=function(t){var e=t.triggerMove,n=t.players,r=t.timeOutRef,o=t.keyMap,i=t.is3D,c=t.powerUpConfig,s=Dt(),u=s.playerRefs,d=s.recalculate,f=Ct(i);Object(p.useEffect)((function(){f!==i&&d()}),[i,f,d]);var b=function(t,n){var r=function(t,e){var n=e.MoveUp,r=e.MoveRight,o=e.MoveDown,i=e.MoveLeft;return(arguments.length>2&&void 0!==arguments[2]&&arguments[2]?[t.current[n]&&a.UP,t.current[r]&&a.RIGHT,t.current[o]&&a.DOWN,t.current[i]&&a.LEFT]:[t.current[n]&&a.UP||t.current[r]&&a.RIGHT||t.current[o]&&a.DOWN||t.current[i]&&a.LEFT]).filter(Boolean)}(o,n);r.length&&r.forEach((function(n){e({playerId:t,direction:n,ref:u.current[t]})}))};return{move:b,handleActions:function(t){if(o.current&&r.current&&Object.values(o.current).filter(Boolean).length){var e=n[t],a=e.keyboardConfig,i=e.state;if(a){var s=Y(i,l.MovementSpeed,c),d=u.current[t];if(d||(u.current[t]=document.getElementById(t)),d){var f=(new Date).getTime();f-r.current[t]>s&&(r.current[t]=f,b(t,a))}}}}}},zt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onKeyDown,n=t.onKeyUp,r=Object(p.useRef)({});return Object(p.useEffect)((function(){var t=function(t){if(r.current){var a="keydown"===t.type;t.code===C.h&&t.preventDefault(),function(t,e){r.current[t.code]=e}(t,a),a?null===e||void 0===e||e(t.code):null===n||void 0===n||n(t.code)}};return window.addEventListener("keyup",t),window.addEventListener("keydown",t),function(){window.removeEventListener("keyup",t),window.removeEventListener("keydown",t)}}),[e,n]),r},_t=function(t,e,n){var r=t[e];return!!r&&!Q(r.state,n)},qt=function(t,e,n,r){var a=function(t,e,n){return Object(p.useMemo)((function(){var r,a=null===(r=t[e])||void 0===r?void 0:r.state;return a?Y(a,l.MovementSpeed,n):Number.MAX_SAFE_INTEGER}),[e,t,n])}(t,e,n);kt((function(){_t(t,e,n)&&r(e)}),a)},Mt=function(t,e,n){return function(r){Object.keys(t).forEach((function(a){if(_t(t,a,n)){var o=t[a].keyboardConfig;if(o){var i=o.DropBomb;r===i&&e(a)}}}))}},Rt=function(t){var e=t.playerId,n=t.players,r=t.powerUpConfig,a=t.cb;return qt(n,e,r,a),null},Bt=function(t){var e=t.state,n=t.provider,r=n.dropBomb,a=n.triggerMove,o=e.gameMap,i=e.bombs,c=e.players,s=e.is3D,u=e.config,l=u.powerUps,d=u.sizes,f=u.duration.bomb,b=Dt().playerRefs,m=zt({onKeyDown:Mt(c,r,l)}),v=Object(p.useRef)({P1:(new Date).getTime(),P2:(new Date).getTime(),P3:(new Date).getTime(),P4:(new Date).getTime()}),g=It({triggerMove:a,players:c,timeOutRef:v,keyMap:m,is3D:s,powerUpConfig:l}).handleActions;return Object.keys(c).map((function(t){return Object(Tt.jsx)(Rt,{playerId:t,players:c,powerUpConfig:l,cb:"P4"===t?function(){!function(t){var e=t.playerId,n=t.players,r=t.gameMap,a=t.bombs,o=t.triggerMove,i=t.dropBomb,c=t.ref,s=t.powerUpConfig,u=t.sizes,l=t.bombDuration,d=n[e];if($={id:0,parentNodes:[],lastBombTime:0,dropBomb:function(){return i(e)},gameMap:r,bombs:a,players:n,powerUpConfig:s,sizes:u,bombDuration:l},d){var f=_(d.coordinates,u.movement),p=Pt(f);((null===p||void 0===p?void 0:p.score)||0)>0&&o({playerId:e,direction:p.direction,ref:c})}}({playerId:t,dropBomb:r,gameMap:o,bombs:i,players:c,triggerMove:a,ref:b.current.P4,powerUpConfig:l,sizes:d,bombDuration:f})}:g},t)}))},At=y.c.div(tt||(tt=Object(j.a)(["\n\tdisplay: flex;\n\tjustify-content: center;\n\tflex-wrap: wrap;\n\n\t& > :first-child {\n\t\tmargin-right: 50px;\n\t\twidth: 15%;\n\t\t@media only screen and (max-width: 600px) {\n\t\t\twidth: 100%;\n\t\t\tmargin: 50px auto;\n\t\t\torder: 2;\n\t\t\t& button {\n\t\t\t\twidth: 80% !important;\n\t\t\t}\n\t\t}\n\t}\n"]))),Nt=y.c.div(et||(et=Object(j.a)(["\n\ttext-align: center;\n\t","\n"])),(function(t){return t.$is3D?"perspective: 1000":""})),Ut=function(t){var e=t.children,n=t.is3D;return Object(Tt.jsxs)(Nt,{$is3D:n,children:[Object(Tt.jsx)("h1",{children:"Bomba-man - Work In Progress"}),Object(Tt.jsx)(At,{children:e})]})},Lt={palette:{background:{primary:"var(--primary-background)",secondary:"var(--secondary-background)"},color:{primary:"var(--primary-color)",secondary:"var(--secondary-color)",error:"var(--error-color)",warning:"var(--warning-color)",success:"var(--success-color)",info:"var(--info-color)",default:"var(--default-color)"}},shape:{borderRadius:"var(--border-radius)",padding:"var(--padding)"},game:{character:{size:"var(--character-size)"},tile:{size:"var(--tile-size)"}}},Ft=Object(y.a)(nt||(nt=Object(j.a)(["\n\t:root {\n\t\t/* #region COLORS */\n\t\t--primary-background: #13141b;\n\t\t--secondary-background: #1a1d28;\n\n\t\t--primary-color: #ec7ebd;\n\t\t--secondary-color: #763ee6;\n\n\t\t/* --error-color: rgb(255, 122, 105);\n\t\t--warning-color: rgb(241, 168, 23);\n\t\t--success-color: rgb(49, 162, 76);\n\t\t--info-color: rgb(134, 218, 255);\n\t\t--default-color: rgb(228, 230, 235); */\n\t\t--error-color: #f44336;\n\t\t--warning-color: #ff9800;\n\t\t--success-color: #4caf50;\n\t\t--info-color: #2196f3;\n\t\t--default-color: #E4E6EB;\n\t\t/* #endregion */\n\n\t\t/* #region UTILITIES */\n\t\t--border-radius: 4px;\n\t\t--padding: 10px;\n\t\t/* #endregion */\n\n\t\t/* #region GAME */\n\t\t","\n\t\t/* #endregion */\n\t\t\n\t\t/* #region ANIMATIONS */\n\t\t/* @see https://easings.net/#easeInOutBack */\n\t\t--ease-in-out-back: cubic-bezier(0.68, -0.6, 0.32, 1.6);\n\t\t--ease-in-out-quint: cubic-bezier(0.83, 0, 0.17, 1);\n\t\t--incremental-animation-delay: 0.03s;\n\t\t--block-animation-duration: 0.5s;\n\t\t/* #endregion */\n\n\t\t/* #region GENERICS */\n\t\t*, ::before, ::after {\n\t\t\tbox-sizing: border-box;\n\t\t}\n\n\t\thtml,\n\t\tbody,\n\t\t#root {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tmargin: 0;\n\t\t\tpadding: 0;\n\t\t}\n\n\t\thtml {\n\t\t\tbackground-color: ",";\n\t\t\t/* color: #fff; */\n\t\t}\n\n\t\t#root {\n\t\t\tposition: relative;\n\t\t}\n\n\t\tpre {\n\t\t\twhite-space: pre-wrap;\n\t\t\tword-wrap: break-word;\n\t\t}\n\t\t/* #endregion */\n\n\t\t/* #region SCROLLBARS */\n\t\t*, ::before, ::after {\n\t\t\tscroll-behavior: smooth;\n\t\t\tscrollbar-color: black transparent;\n\t\t\tscrollbar-width: thin;\n\t\t}\n\n\t\t/* width */\n\t\t::-webkit-scrollbar {\n\t\t\twidth: 5px;\n\t\t\theight: 6px;\n\t\t}\n\n\t\t/* Track */\n\t\t::-webkit-scrollbar-track {\n\t\t\tbackground: #bfbfbf;\n\t\t}\n\n\t\t/* Handle */\n\t\t::-webkit-scrollbar-thumb {\n\t\t\tbackground: black;\n\t\t\tborder-radius: 10px;\n\t\t}\n\n\t\t/* Handle on hover */\n\t\t::-webkit-scrollbar-thumb:hover {\n\t\t\tbackground: rgba(0, 0, 0, 0.7);\n\t\t}\n\t\t/* #endregion */\n\t}\n"])),(function(t){var e=t.$gameConfig;return"\n\t\t\t--character-size: ".concat(e.sizes.character,"px;\n\t\t\t--tile-size: ").concat(e.sizes.tile,"px;\n\t\t\t--game-size: ").concat(e.sizes.map,"px;\n\t\t\t--exploding-duration: ").concat(e.duration.bomb.exploding,"s;\n\t\t\t--firing-duration: ").concat(e.duration.bomb.firing,"s;\n\t\t")}),Lt.palette.background.primary),Gt=Lt,Ht=y.c.button(rt||(rt=Object(j.a)(["\n\tbackground-color: ",";\n\t/* IGNORE SIZE FOR NOW */\n\tborder-radius: ",";\n\tpadding: ",";\n"])),(function(t){var e=t.$variant;return Gt.palette.color[e]}),Gt.shape.borderRadius,Gt.shape.padding),$t=function(t){var e=t.variant,n=t.size,r=t.children,a=Object(g.a)(t,["variant","size","children"]);return Object(Tt.jsx)(Ht,Object(O.a)(Object(O.a)({$variant:e,$size:n},a),{},{children:r}))},Vt=Object(p.memo)($t),Wt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(e){setTimeout(e,t)}))},Kt=function(t){var e,n=t.active,r=void 0!==n&&n,a=t.onClick,o=t.children,i=Object(g.a)(t,["active","onClick","children"]);return Object(Tt.jsx)(Vt,Object(O.a)(Object(O.a)({style:{width:"100%",wordWrap:"break-word",marginBottom:10},variant:r?"success":"warning",size:"medium",onClick:(e=a,function(t){t.currentTarget.blur(),e(t)})},i),{},{children:o}))},Xt=function(t){var e=t.state,n=t.provider,r=n.generateNewCollisionCoordinates,a=n.togglePerspective,o=n.toggleDimension,i=n.toggleTwoPlayer,c=n.toggleNPC,s=e.is3D,u=e.isSideView,l=e.players,d=l.P2,f=l.P4,b=!!d,m=!!f,v=Object(p.useMemo)((function(){return[{label:"New Collision Coordinates",onClick:r},{label:"Toggle 3D (Experimental)",onClick:o,active:s},{label:"Toggle Side View",onClick:a,active:u,disabled:!s},{label:"Toggle Two-Player Mode",onClick:i,active:b},{label:"Toggle NPC",onClick:c,active:m}].map((function(t){var e=t.label,n=Object(g.a)(t,["label"]);return Object(Tt.jsx)(Kt,Object(O.a)(Object(O.a)({},n),{},{children:e}),e)}))}),[r,s,u,m,b,o,c,a,i]);return Object(Tt.jsx)("div",{children:v})},Zt=Object(p.memo)(Xt),Yt=n(3),Jt=n.n(Yt),Qt=n(6),te=(n(243),y.c.div(at||(at=Object(j.a)([""])))),ee=y.c.div(ot||(ot=Object(j.a)(["\n\t","\n\theight: calc(var(--tile-size) * 1px);\n\twidth: calc(var(--tile-size) * 1px);\n\ttransform-style: preserve-3d;\n\tposition: absolute;\n\ttransform-origin: center center;\n\ttransition: 300ms;\n\n\ttransform: scale(1, 1) translateZ(calc(var(--tile-size) / 2 * -1px));\n\n\t& > "," {\n\t\tborder: 1px solid var(--primary-background);\n\n\t\theight: calc(var(--tile-size) * 1px);\n\t\twidth: calc(var(--tile-size) * 1px);\n\t\t/* transform-origin: 50% 50%; */\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\tposition: absolute;\n\n\t\t/** @see https://codepen.io/jh3y/pen/BaKqQLJ */\n\t\t&:nth-of-type(1) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(2) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg) rotateY(180deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(3) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg) rotateY(90deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(4) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg) rotateY(-90deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(5) {\n\t\t\tbackground-color: var(--secondary-background);\n\t\t\ttransform: translate(-50%, -50%)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(6) {\n\t\t\ttransform: translate(-50%, -50%)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * -1px)) rotateX(180deg);\n\t\t}\n\t}\n\n\t&.bouncy-block- {\n\t\t&no-animation {\n\t\t\ttransform: translateZ(calc(var(--tile-size) / 2 * 1px));\n\t\t\t& > "," {\n\t\t\t\tbackground-color: var(--secondary-color);\n\t\t\t}\n\t\t}\n\n\t\t&0 {\n\t\t\ttransform: translateZ(calc(var(--tile-size) / 2 * 1px))\n\t\t\t\trotateX(0deg) rotateY(0deg) rotateZ(0deg);\n\t\t}\n\t}\n"])),(function(t){var e=t.$size;return"\n\t\t--tile-size: ".concat(e,";\n\t")}),te,te),ne=function(t){var e=t.size,n=t.top,r=t.left,a=t.animate,o=void 0!==a&&a,i=t.variant,c=t.color,s=t.collisionIndex,u=t.style,l=t.className,d=Object(g.a)(t,["size","top","left","animate","variant","color","collisionIndex","style","className"]),f="cuboid bouncy-block-".concat((o?s:"no-animation")||0," ").concat(i).concat(l&&" ".concat(l)||"");return Object(Tt.jsx)(ee,Object(O.a)(Object(O.a)({className:f,style:Object(O.a)(Object(O.a)({},u),{},{top:n,left:r,width:e,height:e}),$size:e},d),{},{children:Array(6).fill(0).map((function(t,n){return Object(Tt.jsx)(te,{style:Object(O.a)(Object(O.a)({},c&&{backgroundColor:c}),{},{width:e,height:e})},n)}))}))},re=function(t,e){return"".concat(e?"transform: translateZ(calc(var(--tile-size) / 2 * 2px)) rotateX(".concat(t,"deg) rotateY(").concat(t,"deg)"):"transform: rotate(".concat(t,"deg)"),";")},ae=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(y.d)(it||(it=Object(j.a)(["\n\t0% { "," }\n\t\n\t/* 40% -> 100% */\n\t","\n"])),re(0,t),Array(7).fill(0).map((function(e,n){return"".concat(10*(n+4),"% { ").concat(re((n+1)*(t&&(n<6?90:100)||n<4&&90||n<6&&270||360),t)," }")})).join("\n"))},oe=y.c.div(ct||(ct=Object(j.a)(["\n\tanimation: "," linear forwards;\n"])),ae()),ie=Object(y.c)(ne)(st||(st=Object(j.a)(["\n\t/* "," */\n\tanimation: "," linear forwards;\n"])),(function(t){var e=t.size;return"\n\t\t--tile-size: ".concat(e,";\n\t")}),ae(!0)),ce=function(t){var e=t.color,n=t.firingDuration,r=t.explodingDuration,a=t.tileSize,o=t.id,c=t.top,s=t.left,u=t.triggerExplosion,l=t.onExplosionComplete,d=t.is3D,b=Object(p.useState)(i.Firing),m=Object(E.a)(b,2),v=m[0],g=m[1];Object(p.useEffect)((function(){(function(){var t=Object(Qt.a)(Jt.a.mark((function t(){return Jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Wt(1e3*n);case 2:u(o,function(){var t=Object(Qt.a)(Jt.a.mark((function t(e){return Jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g(i.Exploding),t.next=3,Wt(1e3*r);case 3:l(o),e.forEach((function(t){l(t)}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var O=a/2,j=O/2,y={position:"absolute",backgroundColor:e,width:O,height:O,top:c+j,left:s+j,animationDuration:"".concat(n,"s")};return v===i.Firing&&(!d&&Object(Tt.jsx)(oe,{style:y})||Object(Tt.jsx)(ie,{size:O,top:Number(y.top),left:Number(y.left),animate:!1,variant:f.Bomb,color:Gt.palette.color.error,collisionIndex:1,style:y}))||null},se=(n(244),function(t){var e=t.id,n=(t.name,t.coordinates),r=n.top,o=n.left,i=t.style,c=t.keyboardConfig,s=t.highlight,u=Object(g.a)(t,["id","name","coordinates","style","keyboardConfig","highlight"]),l=Object(p.useState)(a.DOWN),d=Object(E.a)(l,2),f=d[0],b=d[1],m=Object(p.useState)(""),v=Object(E.a)(m,2),j=v[0],y=v[1],h=Object(p.useRef)((new Date).getTime()),S=!!j;return Object(p.useEffect)((function(){var t=function(t){return c?function(t,e){var n=e.MoveUp,r=e.MoveRight,o=e.MoveDown,i=e.MoveLeft;switch(!0){case t===n:return a.UP;case t===r:return a.RIGHT;case t===o:return a.DOWN;case t===i:return a.LEFT;default:return null}}(t.code,c):null},e=function(){j&&y("")},n=function(n){var r=t(n);r?(h.current=(new Date).getTime(),y(r),function(t){b(t)}(r)):e()},r=function(){setTimeout((function(){var t=(new Date).getTime()-200;h.current>=t||e()}),200)};return document.addEventListener("keydown",n),document.addEventListener("keyup",r),function(){document.removeEventListener("keydown",n),document.removeEventListener("keyup",r)}}),[j,c]),Object(Tt.jsxs)("div",Object(O.a)(Object(O.a)({id:e,className:"character","data-facing":f,"data-walking":S.toString(),"data-highlight":s,style:Object(O.a)(Object(O.a)({},i),{},{top:r,left:o,position:"absolute",zIndex:9999})},u),{},{children:[Object(Tt.jsx)("div",{className:"shadow pixel-art"}),Object(Tt.jsx)("div",{className:"spritesheet-wrapper",children:Object(Tt.jsx)("div",{className:"spritesheet pixel-art"})})]}))}),ue=function(t){var e=t.id,n=t.name,r=t.size,a=t.tileSize,o=t.coordinates,i=o.top,s=o.left,u=t.keyboardConfig,l=t.is3D,d=t.highlight,f=void 0!==d&&d,p=Object(g.a)(t,["id","name","size","tileSize","coordinates","keyboardConfig","is3D","highlight"]),b=(a-r)/2,m=b+i,v=b+s,j=Object(O.a)({id:e,name:"".concat(n," ").concat(e),coordinates:{top:m,left:v},keyboardConfig:u,highlight:f},p);return l&&Object(Tt.jsx)(ne,Object(O.a)({id:e,size:r,top:m,left:v,animate:!0,color:Gt.palette.color.success,style:{transform:L},variant:c[e]},p))||Object(Tt.jsx)(se,Object(O.a)({},j))},le=n(45),de=n(46),fe=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(y.d)(ut||(ut=Object(j.a)(["\n\t0% { transform: scale(0, 0); }\n\t25% { transform: scale(0.9, 1.1); }\n\t50% { transform: scale(1.1, 0.9); }\n\t75% { transform: scale(0.95, 1.05); }\n\t100% { transform: scale(1, 1); "," }\n"])),t?"opacity: 1;":"")},pe=y.c.div(lt||(lt=Object(j.a)(["\n\tposition: absolute;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\topacity: 0;\n\tsvg {\n\t\theight: 100% !important;\n\t\twidth: 100% !important;\n\t\tmax-width: 70%;\n\t\tmax-height: 80%;\n\t}\n\t","\n"])),(function(t){var e=t.$size,n=t.$animationDelay,r=t.$top,a=t.$left;return Object(y.b)(dt||(dt=Object(j.a)(["\n\t\ttop: ","px;\n\t\tleft: ","px;\n\t\twidth: ","px;\n\t\theight: ","px;\n\t\tanimation: "," var(--block-animation-duration)\n\t\t\t"," ease-out forwards;\n\t"])),r,a,e,e,fe(!0),n||"")})),be=function(t){return Object(Tt.jsx)(le.a,Object(O.a)({icon:de.b},t))},me=function(t){var e=t.size,n=t.explodingDuration,r=t.coordinates,a=r.top,o=r.left;return Object(Tt.jsx)(pe,{$top:a,$left:o,$size:e,$animationDelay:"".concat(n,"s"),children:Object(Tt.jsx)(be,{color:Gt.palette.color.default})})},ve=function(t){var e=t.state,n=t.provider,r=n.triggerExplosion,a=n.onExplosionComplete,o=e.gameMap,i=e.players,c=e.bombs,s=e.is3D,u=e.config;return Object(Tt.jsxs)(Tt.Fragment,{children:[Object.entries(i).map((function(t){var e=Object(E.a)(t,2),n=e[0],r=e[1],a=u.keyboardConfig[n],i=r.coordinates,c=r.state,l=!Q(c,u.powerUps),d=function(t,e,n){var r=I(e,n),a=r.xSquare,o=t[r.ySquare][a];return x.includes(o)}(o,i,u.sizes.movement);return l&&Object(Tt.jsx)(ue,{id:n,name:"Bomber",size:u.sizes.character,tileSize:u.sizes.tile,coordinates:i,keyboardConfig:a,is3D:s,highlight:d},n)||Object(Tt.jsx)(me,{coordinates:i,size:u.sizes.character,explodingDuration:u.duration.bomb.exploding},n)})),Object.values(c).map((function(t){var e=t.id,n=t.playerId,o=Object(g.a)(t,["id","playerId"]),c=i[n].state,d=Y(c,l.BombSize,u.powerUps);return Object(Tt.jsx)(ce,Object(O.a)(Object(O.a)({id:e,playerId:n},o),{},{color:Gt.palette.color.error,tileSize:u.sizes.tile,explosionSize:d,firingDuration:u.duration.bomb.firing,explodingDuration:u.duration.bomb.exploding,triggerExplosion:r,onExplosionComplete:a,is3D:s}),e)}))]})},ge=y.c.div.attrs((function(t){var e=t.$size,n=t.$top,r=t.$left,a=t.$color;return{style:Object(O.a)({width:e,height:e,top:n,left:r},a&&{backgroundColor:a})}}))(pt||(pt=Object(j.a)(["\n\tposition: absolute;\n\t/* background-color: ","; */\n\tborder: 1px solid ",";\n\t","\n"])),Gt.palette.background.secondary,Gt.palette.background.primary,(function(t){var e=t.$color,n=t.$collisionIndex,r=t.$animate,a=t.$fireSquare;return a&&Object(y.b)(bt||(bt=Object(j.a)(["\n\t\t\t\t\tborder: none;\n\t\t\t\t\tanimation: ","\n\t\t\t\t\t\tcalc(var(--firing-duration) / 2)\n\t\t\t\t\t\tvar(--ease-in-out-quint) forwards;\n\t\t\t\t"])),function(t){var e=0,n=0,r="",a="",o="",i="";return t===f.FireHorizontal?e=1:t===f.FireVertical?n=1:(e=.5,n=.5,r=" rotate(90deg)",a=" rotate(360deg)",o="border-radius: 50%;",i="border-radius: 0%;"),Object(y.d)(ft||(ft=Object(j.a)(["\n\t\t// cool effect\n\t\t/* 0% { border: 16px solid ","; transform: scale(",", ",")","; "," } */\n\t\t0% { background-color: ","; transform: scale(",", ",")","; "," }\n\t\t20% { background-color: ","; }\n\t\t40% { background-color: ","; }\n\t\t50% { "," }\n\t\t60% { background-color: ","; }\n\t\t80% { background-color: ","; }\n\t\t100% { background-color: ","; transform: scale(1)",";  }\n\t"])),Gt.palette.background.primary,e,n,r,o,Gt.palette.background.primary,e,n,r,o,Gt.palette.color.error,Gt.palette.color.info,i,Gt.palette.color.error,Gt.palette.color.info,Gt.palette.color.error,a)}(a))||r&&e&&Object(y.b)(mt||(mt=Object(j.a)(["\n\t\t\t\t\ttransform: scale(0, 0);\n\t\t\t\t\tz-index: 9999;\n\t\t\t\t\tanimation: ","\n\t\t\t\t\t\tvar(--block-animation-duration) ease\n\t\t\t\t\t\tcalc(\n\t\t\t\t\t\t\t"," *\n\t\t\t\t\t\t\t\tvar(--incremental-animation-delay)\n\t\t\t\t\t\t)\n\t\t\t\t\t\tforwards;\n\t\t\t\t"])),fe(),n)||""})),Oe=function(t){var e=t.size,n=t.top,r=t.left,a=t.color,o=t.collisionIndex,i=t.animate,c=void 0!==i&&i,s=t.fireSquare;return Object(Tt.jsx)(ge,{$size:e,$top:n,$left:r,$animate:c,$color:a,$collisionIndex:o,$fireSquare:s})},je=Object(p.memo)(Oe),ye=(vt={},Object(P.a)(vt,l.Life,{color:Gt.palette.color.success,icon:function(t){return Object(Tt.jsx)(le.a,Object(O.a)({icon:de.c},t))}}),Object(P.a)(vt,l.BombCount,{color:Gt.palette.color.error,icon:function(t){return Object(Tt.jsx)(le.a,Object(O.a)({icon:de.a},t))}}),Object(P.a)(vt,l.BombSize,{color:Gt.palette.color.warning,icon:function(t){return Object(Tt.jsx)(le.a,Object(O.a)({icon:de.d},t))}}),Object(P.a)(vt,l.MovementSpeed,{color:Gt.palette.color.info,icon:function(t){return Object(Tt.jsx)(le.a,Object(O.a)({icon:de.e},t))}}),vt),he=function(t){var e=t.variant,n=t.top,r=t.left,a=t.size,o=ye[e],i=o.icon,c=o.color;return Object(Tt.jsx)(pe,{$top:n,$left:r,$size:a,children:Object(Tt.jsx)(i,{color:c})})},Se=y.c.div(gt||(gt=Object(j.a)(["\n\twidth: ",";\n\theight: ",";\n\tborder-radius: ",";\n\tbackground-color: ",";\n\tposition: relative;\n\tbox-shadow: 0 10px 20px rgba(0, 0, 0, 0.5), 0 6px 6px rgba(0, 0, 0, 0.6);\n\ttransition: transform var(--block-animation-duration);\n\n\t","\n"])),(function(t){var e=t.$size;return"calc(".concat(Gt.game.tile.size," * ").concat(e,")")}),(function(t){var e=t.$size;return"calc(".concat(Gt.game.tile.size," * ").concat(e,")")}),Gt.shape.borderRadius,Gt.palette.background.secondary,(function(t){var e=t.$is3D,n=t.$isTopView,r="";return e&&(r+="transform-style: preserve-3d;",n||(r+="\ntransform: rotateX(-24deg) rotateY(-24deg) rotateX(90deg);")),r})),xe=function(t){var e=t.size,n=t.gameMap,r=t.is3D,a=t.isTopView,o=t.animationCounter,i=t.children,c=t.tileSize,u=o!==Ct(o);Object(p.useEffect)((function(){u=!0}),[]);var l=1;return Object(Tt.jsxs)(Se,{$size:e,$is3D:r,$isTopView:a,children:[Object.keys(n).map((function(t,e){return Object.values(n[t]).map((function(t,n){var a,o=t===s.NonBreaking||t===s.Breaking,i="".concat(e,"_").concat(n),d=c,p=e*c,b=n*c;if(J(t))return Object(Tt.jsx)(he,{size:d,variant:t,top:p,left:b},i);t!==f.FireCore&&t!==f.FireHorizontal&&t!==f.FireVertical||(a=t);var m=Object(O.a)({key:i,size:d,top:p,left:b,animate:u,variant:t,fireSquare:a},o&&{color:Gt.palette.color[t===s.NonBreaking?"secondary":"primary"],collisionIndex:l++});return r&&(o&&Object(Tt.jsx)(ne,Object(O.a)({},m))||Object(Tt.jsx)(je,Object(O.a)({},m)))||Object(Tt.jsx)(je,Object(O.a)({},m))}))})),i]})},Ee=function(t){var e=t.sizes,n=e.map,r=e.tile,a=t.children,o=t.gameMap,i=t.is3D,c=t.isSideView,s=t.animationCounter;return Object(Tt.jsx)(xe,{size:n,gameMap:o,is3D:i,isTopView:!c,animationCounter:s,tileSize:r,children:a})},we=function(t){var e=Bt(t),n=function(t){var e=t.state,n=e.is3D,r=e.gameMap,a=e.isSideView,o=e.animationCounter,i=e.config;return{gameContainerProps:{is3D:n},gameSettingProps:Object(O.a)({},t),gameMapProps:{sizes:i.sizes,gameMap:r,is3D:n,isSideView:a,animationCounter:o},gameContentProps:Object(O.a)({},t)}}(t),r=n.gameContainerProps,a=n.gameSettingProps,o=n.gameMapProps,i=n.gameContentProps;return Object(Tt.jsxs)(Ut,Object(O.a)(Object(O.a)({},r),{},{children:[Object(Tt.jsx)(Zt,Object(O.a)({},a)),Object(Tt.jsx)(Ee,Object(O.a)(Object(O.a)({},o),{},{children:Object(Tt.jsx)(ve,Object(O.a)({},i))})),e]}))},Pe=n(25),ke=n(35),Ce=n(230),Te=n(231),De=n(21),Ie=n(104),ze=n(232),_e=n(36),qe=n(61),Me=n(105),Re=function(t,e){Object.keys(e).forEach((function(n){t[n]=e[n]}))},Be=function t(){Object(_e.a)(this,t)},Ae=function(t){Object(qe.a)(n,t);var e=Object(Me.a)(n);function n(t,r){var a;return Object(_e.a)(this,n),(a=e.call(this)).state=t,a.draft=r,a.updateGameState=function(){var t=Object(Qt.a)(Jt.a.mark((function t(e){return Jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Re(a.draft,e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a.updatePlayers=function(){var t=Object(Qt.a)(Jt.a.mark((function t(e){return Jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.draft.players=e;case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a.addPlayer=function(){var t=Object(Qt.a)(Jt.a.mark((function t(e,n){return Jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.draft.players[n]=e;case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),a.updatePlayer=function(){var t=Object(Qt.a)(Jt.a.mark((function t(e,n){return Jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Re(a.draft.players[n],e);case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),a.removePlayer=function(){var t=Object(Qt.a)(Jt.a.mark((function t(e){return Jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:delete a.draft.players[e];case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a.updatePlayerId=function(){var t=Object(Qt.a)(Jt.a.mark((function t(e,n){return Jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.draft.players[n].id=e;case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),a.updatePlayerCoordinates=function(){var t=Object(Qt.a)(Jt.a.mark((function t(e,n){return Jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.draft.players[n].coordinates=e;case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),a.updatePlayerState=function(){var t=Object(Qt.a)(Jt.a.mark((function t(e,n){return Jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Re(a.draft.players[n].state,e);case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),a.incrementPlayerPowerUp=function(){var t=Object(Qt.a)(Jt.a.mark((function t(e,n){return Jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.draft.players[n].state.powerUps[e]++;case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),a.incrementPlayerDeathCount=function(){var t=Object(Qt.a)(Jt.a.mark((function t(e){return Jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.draft.players[e].state.deathCount++;case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a.updatePlayerPlayerKeyboardConfig=function(){var t=Object(Qt.a)(Jt.a.mark((function t(e,n){return Jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Re(a.draft.players[n].keyboardConfig||{},e);case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),a.updateGameMap=function(){var t=Object(Qt.a)(Jt.a.mark((function t(e){var n,r,o;return Jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.gameMap,r=e.animate,o=void 0!==r&&r,a.draft.gameMap=n,o&&a.incrementAnimationCounter();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a.updateGameMapSquare=function(){var t=Object(Qt.a)(Jt.a.mark((function t(e,n){var r,o;return Jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.xSquare,o=e.ySquare,a.draft.gameMap[o][r]=n;case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),a.addBomb=function(){var t=Object(Qt.a)(Jt.a.mark((function t(e){return Jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.draft.bombs[e.id]=e;case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a.removeBomb=function(){var t=Object(Qt.a)(Jt.a.mark((function t(e){return Jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:delete a.draft.bombs[e];case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a.addPowerUp=function(){var t=Object(Qt.a)(Jt.a.mark((function t(e,n){var r,o;return Jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.ySquare,o=n.xSquare,a.draft.powerUps[r]||(a.draft.powerUps[r]={}),a.draft.powerUps[r][o]=e;case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),a.removePowerUp=function(){var t=Object(Qt.a)(Jt.a.mark((function t(e){var n,r;return Jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.ySquare,r=e.xSquare,a.draft.powerUps[n][r]=null;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a.toggleIs3D=Object(Qt.a)(Jt.a.mark((function t(){return Jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.draft.is3D=!a.state.is3D;case 1:case"end":return t.stop()}}),t)}))),a.toggleIsSideView=Object(Qt.a)(Jt.a.mark((function t(){return Jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.draft.isSideView=!a.state.isSideView;case 1:case"end":return t.stop()}}),t)}))),a.incrementAnimationCounter=Object(Qt.a)(Jt.a.mark((function t(){return Jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.draft.animationCounter++;case 1:case"end":return t.stop()}}),t)}))),a}return n}(Be),Ne=function t(e,n){var r=this;Object(_e.a)(this,t),this.state=e,this.updaters=n,this.getPlayerState=function(t){return r.state.players[t].state},this.isPlayerDead=function(t){var e=r.getPlayerState(t);return e.deathCount>=Y(e,l.Life,r.state.config.powerUps)},this.getPowerUpOrNull=function(t){var e=_(t,r.state.config.sizes.movement),n=e.xSquare,a=e.ySquare;try{var o=r.state.gameMap[a][n];if(o!==s.Breaking)return null;var i=function(t){var e=[].concat(Object(k.a)(Object.values(l)),Object(k.a)(Array(6-t).fill(null)));return e[T(e.length)]}(r.state.config.powerUps.chance);return i&&o===s.Breaking?{square:i,coordinates:{ySquare:a,xSquare:n}}:null}catch(c){return console.error("Square being set is out of boundaries",{gameMap:r.state.gameMap,xSquare:n,ySquare:a}),null}},this.getBombCountForPlayer=function(t){return Y(r.getPlayerState(t),l.BombCount,r.state.config.powerUps)},this.getBombSizeForPlayer=function(t){return Y(r.getPlayerState(t),l.BombSize,r.state.config.powerUps)},this.getMovementSpeedForPlayer=function(t){return Y(r.getPlayerState(t),l.MovementSpeed,r.state.config.powerUps)},this.getBombToTriggerFromExplosion=function(t,e){var n=t.ySquare,a=t.xSquare;if(r.state.gameMap[n][a]!==f.Bomb)return null;var o=z(t,r.state.config.sizes.movement),i=o.top,c=o.left,s=Object.values(r.state.bombs).find((function(t){var e=t.top,n=t.left;return i===e&&c===n}));return s?s.id===e?null:s:null},this.setSquare=function(t,e){var n=_(t,r.state.config.sizes.movement);try{r.updaters.updateGameMapSquare(n,e)}catch(a){console.error("Square being set is out of boundaries",{gameMap:r.state.gameMap,squareCoordinates:n})}},this.populatePowerUps=function(t){var e=r.getPowerUpOrNull(t);if(e){var n=e.square,a=e.coordinates;r.updaters.addPowerUp(n,a)}},this.handlePlayerExplosionHit=function(t){var e=t.xSquare,n=t.ySquare;Object.values(r.state.players).forEach((function(t){var a=t.id,o=t.coordinates,i=I(o,r.state.config.sizes.movement),c=i.xSquare,s=i.ySquare;c===e&&s===n&&r.updaters.incrementPlayerDeathCount(a)}))},this.triggerChainExplosion=function(t,e){var n=new Set;if(e.includes(t))return n;var a=r.state.bombs[t];if(!a)return n;var o={top:a.top,left:a.left},i=r.getBombSizeForPlayer(a.playerId),c=Z(r.state.gameMap,r.state.players,o,i,r.state.config.sizes).coordinatesToSetOnFire,s=c.horizontal,u=c.vertical;return[{fireCoordinates:c.core,direction:f.FireCore},{fireCoordinates:s,direction:f.FireHorizontal},{fireCoordinates:u,direction:f.FireVertical}].forEach((function(t){var o=t.fireCoordinates,i=t.direction;o.forEach((function(t){r.populatePowerUps(t),r.setSquare(t,i),r.handlePlayerExplosionHit(t);var o=a.id,c=r.getBombToTriggerFromExplosion(t,o);c&&(r.triggerChainExplosion(c.id,[].concat(Object(k.a)(e),[o])).forEach((function(t){return n.add(t)})),n.add(c.id))}))})),n},this.setGameState=function(t){r.updaters.updateGameState(t)},this.startGame=function(){},this.endGame=function(){},this.setGameMap=function(t){r.updaters.updateGameMap(t)},this.triggerMove=function(t){var e=t.playerId,n=t.direction,a=t.onComplete,o=t.ref;if(!r.isPlayerDead(e)){var i=r.state,c=i.is3D,s=i.players,u=i.gameMap,l=s[e];H({playerConfig:l,direction:n,is3D:c,gameMap:u},r.getMovementSpeedForPlayer(e),a,o,r.state.config.sizes)}},this.makeMove=function(t){var e=t.playerId,n=t.newCoordinates;if(!r.isPlayerDead(e)){var a=I(n,r.state.config.sizes.movement),o=a.ySquare,i=a.xSquare,c=r.state.gameMap[o][i];if(x.includes(c)){if(r.updaters.incrementPlayerDeathCount(e),r.isPlayerDead(e))return}else r.setSquare({ySquare:o,xSquare:i},e);var u=r.state.players[e].coordinates,l=I(u,r.state.config.sizes.movement),d=l.ySquare,f=l.xSquare;r.state.gameMap[d][f]===e&&r.setSquare({ySquare:d,xSquare:f},s.Empty);var p=r.state.gameMap[o][i];J(p)&&r.updaters.incrementPlayerPowerUp(p,e),r.updaters.updatePlayerCoordinates(n,e)}},this.dropBomb=function(t){if(!r.isPlayerDead(t)){var e=r.state.players[t],n=e.coordinates,a=_(n,r.state.config.sizes.movement),o=a.xSquare,i=a.ySquare;if(r.state.gameMap[i][o]!==f.Bomb)if(!(Object.values(r.state.bombs).filter((function(e){return e.playerId===t})).length>=r.getBombCountForPlayer(t))){var c=function(t,e){var n=t.id,r=t.coordinates,a=r.top,o=r.left,i=t.state,c=Y(i,l.BombSize,e);return{id:(new Date).getTime().toString(),explosionSize:c,top:a,left:o,playerId:n}}(e,r.state.config.powerUps);r.updaters.addBomb(c),r.setSquare(e.coordinates,f.Bomb)}}},this.triggerExplosion=function(t,e){if(r.state.bombs[t]){var n=r.triggerChainExplosion(t,[]);null===e||void 0===e||e(n)}},this.onExplosionComplete=function(t){var e=r.state.bombs[t];if(e){var n={top:e.top,left:e.left},a=r.getBombSizeForPlayer(e.playerId);r.updaters.removeBomb(t);var o=Z(r.state.gameMap,r.state.players,n,a,r.state.config.sizes,!0).coordinatesToSetOnFire;Object.values(o).flat().forEach((function(t){var e,n=_(t,r.state.config.sizes.movement),a=n.xSquare,o=n.ySquare,i=null===(e=r.state.powerUps[o])||void 0===e?void 0:e[a];i?(r.setSquare(t,i),r.updaters.removePowerUp({xSquare:a,ySquare:o})):r.setSquare(t,s.Empty)}))}},this.triggerGameAnimation=function(){r.updaters.incrementAnimationCounter()},this.toggleGameDimension=function(){r.updaters.toggleIs3D()},this.toggleGamePerspective=function(){r.updaters.toggleIsSideView()},this.toggleGameTwoPlayer=function(){r.state.players.P2?r.updaters.removePlayer(c.P2):r.updaters.addPlayer(R(c.P2,r.state.config),c.P2)},this.toggleGameNpc=function(){r.state.players.P4?r.updaters.removePlayer(c.P4):r.updaters.addPlayer(R(c.P4,r.state.config),c.P4)}},Ue="Game",Le=A(),Fe="".concat(Ue,"/SET_GAME_STATE"),Ge="".concat(Ue,"/START_GAME"),He="".concat(Ue,"/END_GAME"),$e="".concat(Ue,"/SET_GAME_MAP"),Ve="".concat(Ue,"/MAKE_MOVE"),We="".concat(Ue,"/TRIGGER_MOVE"),Ke="".concat(Ue,"/DROP_BOMB"),Xe="".concat(Ue,"/TRIGGER_EXPLOSION"),Ze="".concat(Ue,"/ON_EXPLOSION_COMPLETE"),Ye="".concat(Ue,"/TRIGGER_ANIMATION"),Je="".concat(Ue,"/TOGGLE_GAME_DIMENSION"),Qe="".concat(Ue,"/TOGGLE_GAME_PERSPECTIVE"),tn="".concat(Ue,"/TOGGLE_GAME_TWO_PLAYER"),en="".concat(Ue,"/TOGGLE_GAME_NPC"),nn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,e=arguments.length>1?arguments[1]:void 0;return Object(ze.a)(t,(function(n){var r=new Ae(t,n),a=new Ne(t,r);switch(e.type){case Fe:a.setGameState(e.payload);break;case Ge:a.startGame();break;case He:a.endGame();break;case $e:a.setGameMap(e.payload);break;case We:a.triggerMove(e.payload);break;case Ve:a.makeMove(e.payload);break;case Ke:a.dropBomb(e.payload);break;case Xe:a.triggerExplosion(e.payload,e.cb);break;case Ze:a.onExplosionComplete(e.payload);break;case Ye:a.triggerGameAnimation();break;case Je:a.toggleGameDimension();break;case Qe:a.toggleGamePerspective();break;case tn:a.toggleGameTwoPlayer();break;case en:a.toggleGameNpc()}}))},rn=Object(ke.combineReducers)(Object(P.a)({firebase:De.firebaseReducer,firestore:Ie.firestoreReducer},Ue,nn)),an=function(t){var e=[Ce.a],n=ke.applyMiddleware.apply(void 0,e);return Object(ke.createStore)(rn,t,Object(Te.composeWithDevTools)(n))},on=n(22),cn=function(t){return t.Game||Le},sn=function(){return Object(on.a)(cn,(function(t){return t.config}))},un=function(){return Object(on.a)(cn,(function(t){return t}))},ln=function(){var t=Object(Pe.b)(),e=Object(Pe.c)(sn()),n=e.sizes.map,r=e.tiles.blockTileChance,a=Object(p.useCallback)((function(e){return t(function(t){return{type:Fe,payload:t}}(e))}),[t]),o=Object(p.useCallback)((function(e){return t({type:$e,payload:e})}),[t]),i=Object(p.useCallback)((function(){return o({gameMap:M(n,r),animate:!0})}),[r,n,o]),c=Object(p.useCallback)((function(e){return t({type:Ve,payload:e})}),[t]),s=Object(p.useCallback)((function(e){return t((n=Object(O.a)(Object(O.a)({},e),{},{onComplete:c}),{type:We,payload:n}));var n}),[t,c]),u=Object(p.useCallback)((function(e){return t({type:Ke,payload:e})}),[t]),l=Object(p.useCallback)((function(e,n){return t(function(t,e){return{type:Xe,payload:t,cb:e}}(e,n))}),[t]),d=Object(p.useCallback)((function(e){t({type:Ze,payload:e})}),[t]),f=Object(p.useCallback)((function(){return t({type:Ye})}),[t]),b=Object(p.useCallback)((function(){return t({type:Je})}),[t]),m=Object(p.useCallback)((function(){return t({type:Qe})}),[t]),v=Object(p.useCallback)((function(){return t({type:tn})}),[t]),g=Object(p.useCallback)((function(){return t({type:en})}),[t]);return{updateGameSettings:a,generateNewCollisionCoordinates:i,makeMove:c,triggerMove:s,dropBomb:u,triggerExplosion:l,onExplosionComplete:d,triggerAnimation:f,toggleDimension:b,togglePerspective:m,toggleTwoPlayer:v,toggleNPC:g}},dn=function(){return{provider:ln(),state:Object(Pe.c)(un())}},fn=n(47),pn=(n(428),n(432),n(431),{apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/bomberman",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_KEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"/bomberman",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_AUTH_DOMAIN,databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"/bomberman",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_DATABASE_URL,projectId:Object({NODE_ENV:"production",PUBLIC_URL:"/bomberman",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PROJECT_ID,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"/bomberman",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/bomberman",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MESSAGING_SENDER_ID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"/bomberman",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APP_ID,measurementId:Object({NODE_ENV:"production",PUBLIC_URL:"/bomberman",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MEASUREMENT_ID});fn.a.initializeApp(pn),fn.a.firestore(),fn.a.analytics();var bn={userProfile:"users",profileFactory:function(t){var e;if(!t)throw new Error("Error creating the user, the user was not found");var n={email:t.email||(null===(e=t.providerData[0])||void 0===e?void 0:e.email)||null,roles:["User"]};return t.providerData&&t.providerData.length&&(n.providerData=t.providerData),n}},mn=(A(),function(t){var e=t.children,n=Object(Pe.c)(sn());return Object(Tt.jsxs)(Tt.Fragment,{children:[e,Object(Tt.jsx)(Ft,{$gameConfig:n})]})}),vn=an({});var gn=function(){var t=dn();return Object(Tt.jsx)(we,Object(O.a)({},t))},On=function(){return Object(Tt.jsx)(Pe.a,{store:vn,children:Object(Tt.jsx)(De.ReactReduxFirebaseProvider,Object(O.a)(Object(O.a)({},(t=vn,{firebase:fn.a,config:bn,dispatch:t.dispatch,createFirestoreInstance:Ie.createFirestoreInstance})),{},{children:Object(Tt.jsxs)(mn,{children:[Object(Tt.jsx)(h,{children:Object(Tt.jsx)(gn,{})}),Object(Tt.jsx)("div",{id:"created-by-numan"})]})}))});var t},jn=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,433)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,o=e.getLCP,i=e.getTTFB;n(t),r(t),a(t),o(t),i(t)}))};v.a.render(Object(Tt.jsx)(b.a.StrictMode,{children:Object(Tt.jsx)(On,{})}),document.getElementById("root")),jn()}},[[430,1,2]]]);
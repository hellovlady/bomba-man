(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{35:function(t,e,n){},45:function(t,e,n){},46:function(t,e,n){},47:function(t,e,n){"use strict";n.r(e);var r,a,o,i,c,l,s,u,b,d,f=n(0),p=n.n(f),g=n(17),m=n.n(g),v=(n(35),n(3)),O=n(4),j=O.c.div(r||(r=Object(v.a)(["\n\twidth: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n"]))),y=n(6);!function(t){t.UP="Up",t.RIGHT="Right",t.DOWN="Down",t.LEFT="Left"}(a||(a={})),function(t){t.X="X",t.Y="Y"}(o||(o={})),function(t){t.Firing="Firing",t.Exploding="Exploding",t.Exploded="Exploded"}(i||(i={})),function(t){t.P1="P1",t.P2="P2",t.P3="P3",t.P4="P4"}(c||(c={})),(s=l||(l={})).Empty="T1",s.Breaking="T2",s.NonBreaking="T3",(b=u||(u={})).BombSize="PU1",b.MovementSpeed="PU2",function(t){t.Bomb="B",t.FireCore="FC",t.FireHorizontal="FH",t.FireVertical="FV"}(d||(d={}));var h,k,x,w=n(10),E={title:"Bomberman - Work In Progress",game:(x={blockDensity:8,powerUpChance:5,lives:1},Object(y.a)(x,u.BombSize,1),Object(y.a)(x,u.MovementSpeed,200),Object(y.a)(x,"powerUps",(h={},Object(y.a)(h,u.BombSize,0),Object(y.a)(h,u.MovementSpeed,0),h)),Object(y.a)(x,"powerUpIncreaseValue",(k={},Object(y.a)(k,u.BombSize,1),Object(y.a)(k,u.MovementSpeed,-50),k)),x),size:{game:15,character:32,tile:32,movement:32,collisionMin:1,collisionMax:1,bomb:16,explosion:1},duration:{movement:200,bomb:{firing:2,exploding:2}},keyboardConfig:{player:{P1:{MoveUp:w.j,MoveRight:w.b,MoveDown:w.f,MoveLeft:w.a,DropBomb:w.h},P2:{MoveUp:w.i,MoveRight:w.e,MoveDown:w.c,MoveLeft:w.d,DropBomb:w.g}}}};E.size.collisionMin=Math.floor(E.size.game*E.size.game/3),E.size.collisionMax=Math.floor(E.size.game*E.size.game/2);var z,S=E,C=n(5),M=n(2),T=n(7),P=n(22),I=n(8),D=n(9);function R(t,e){var n=e||t,r=void 0!==e&&t||0;return Math.floor(Math.random()*(n-r))+r}var q,N=S.size.game-1,B=[[0,0],[0,1],[1,0],[0,N],[0,N-1],[1,N],[N,N],[N,N-1],[N-1,N],[N,0],[N,1],[N-1,0]],L=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B,n=[].concat(Object(D.a)(Object.keys(l)),Object(D.a)(Array(11-S.game.blockDensity).fill("Empty"))),r=Array(t).fill(0).map((function(){return Array(t).fill(0).map((function(){return l[n[R(n.length)]]}))}));return e.forEach((function(t){var e=Object(I.a)(t,2),n=e[0],a=e[1];r[n][a]!==l.Empty&&(r[n][a]=l.Empty)})),r},A=function(t){var e=t.top,n=t.left;return{ySquare:e/S.size.movement,xSquare:n/S.size.movement}},F=S.size.movement*(S.size.game-1),G="translateZ(calc(var(--tile-size) / 2 * 1px)) rotateX(0deg) rotateY(0deg) scale(1, 1)",U=(z={},Object(y.a)(z,o.X,{REPLACE:/rotateX\(-?\d+deg\)/g,FIND:Object(P.a)(/rotateX\((\x2D?[0-9]+)deg\)/,{degree:1})}),Object(y.a)(z,o.Y,{REPLACE:/rotateY\(-?\d+deg\)/g,FIND:Object(P.a)(/rotateY\((\x2D?[0-9]+)deg\)/,{degree:1})}),z),$=function(t,e,n){t.style.transition="".concat(n,"ms"),t.style.transform=function(t,e){var n=90,r=o.Y;return e!==a.DOWN&&e!==a.LEFT||(n*=-1),e!==a.UP&&e!==a.DOWN||(r=o.X),t.replace(U[r].REPLACE,"rotate".concat(r,"(").concat(n,"deg)"))}(t.style.transform,e)},_=function(t,e,n){var r,o=t.playerConfig,i=o.id,c=o.coordinates,s=c.top,u=c.left,b=o.ref,f=t.direction,p=t.is3D,g=t.gameMap,m=s,v=u;switch(f){case a.UP:m=s-S.size.movement;break;case a.RIGHT:v=u+S.size.movement;break;case a.DOWN:m=s+S.size.movement;break;case a.LEFT:v=u-S.size.movement}(function(t,e,n){var r,a=A({top:t,left:e}),o=a.xSquare,i=null===(r=n[a.ySquare])||void 0===r?void 0:r[o];return!(i===l.Breaking||i===l.NonBreaking||i===d.Bomb)&&!(e<0||e>F)&&!(t<0||t>F)})(m,v,g)&&(p&&((r=b).style.transition="0ms",r.style.transform=G),setTimeout((function(){p&&$(b,f,e),n({playerId:i,newCoordinates:{top:m,left:v}})}),0))};!function(t){t.HORIZONTAL="horizontal",t.VERTICAL="vertical"}(q||(q={}));var V,X,H,Z,Y,W,J,K,Q,tt,et,nt,rt,at,ot,it=function(t,e,n){var r=[];return t[e][n]===l.Breaking&&r.push({ySquare:e,xSquare:n}),r},ct=function(t,e,n){var r=[];return Object.values(t).forEach((function(t){var a=t.id,o=t.coordinates,i=A(o),c=i.xSquare,l=i.ySquare;c===n&&l===e&&r.push(a)})),r},lt=function(t){var e,n;if(void 0!==t.xSquare)e=t.xSquare,n=t.ySquare;else{var r=A(t);e=r.xSquare,n=r.ySquare}return{xSquare:e,ySquare:n}},st=function(t){return t<0||t>=S.size.game},ut=function(t,e,n){for(var r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=lt(e),i=o.xSquare,c=o.ySquare,s={xSquare:i,ySquare:c},u=(r={},Object(y.a)(r,q.HORIZONTAL,[s]),Object(y.a)(r,q.VERTICAL,[s]),r),b=function(t,e,n){u[n].push({xSquare:t,ySquare:e})},f=[[0,-1],[1,0],[0,1],[-1,0]],p=[q.VERTICAL,q.HORIZONTAL,q.VERTICAL,q.HORIZONTAL],g=0;g<4;g++)for(var m=i,v=c,O=p[g],j=!0,h=0;h<n;h++)if(j){var k=Object(I.a)(f[g],2),x=k[0],w=k[1];if(v+=w,!st(m+=x)&&!st(v)){var E=t[v][m];if(a){if(E!==d.FireHorizontal&&E!==d.FireVertical)continue;b(m,v,O)}switch(E){case l.Breaking:b(m,v,O),j=!1;break;case l.NonBreaking:j=!1;break;default:b(m,v,O)}}}return u},bt=function(t,e,n,r){var a,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=[],c=[],l=(a={},Object(y.a)(a,q.HORIZONTAL,[]),Object(y.a)(a,q.VERTICAL,[]),a),s=ut(t,n,r,o);return Object.keys(s).forEach((function(n){s[n].forEach((function(r){var a=r.ySquare,o=r.xSquare;l[n].push({xSquare:o,ySquare:a}),i=[].concat(Object(D.a)(i),Object(D.a)(it(t,a,o))),c=[].concat(Object(D.a)(c),Object(D.a)(ct(e,a,o)))}))})),{coordinatesToSetOnFire:l,tilesToBreak:i,playersToKill:c}},dt=function(t,e){return t[e]+t.powerUps[e]*S.game.powerUpIncreaseValue[e]},ft=function(t){var e=t.id,n=t.coordinates,r=n.top,a=n.left,o=t.state,i=dt(o,u.BombSize);return{id:(new Date).toJSON(),explosionSize:i,top:r,left:a,playerId:e}},pt=function(t,e,n){var r=S.game,a=(r.blockDensity,Object(T.a)(r,["blockDensity"]));return{id:t,coordinates:{top:32*e,left:32*n},ref:null,state:Object(M.a)(Object(M.a)({},a),{},{powerUps:Object(M.a)({},a.powerUps)})}},gt=function(){var t=[].concat(Object(D.a)(Object.values(u)),Object(D.a)(Array(6-S.game.powerUpChance).fill(null)));return t[R(t.length)]},mt=function(t){return Object.values(u).includes(t)},vt=function(t,e,n,r){if(!(t>N||e>N||t<0||e<0)){var a=r[t][e];if(t===n.top&&e===n.left)return 0;if(a===l.Empty)return 1;if(a===l.Breaking)return-1;if(a!==l.NonBreaking)return 0}},Ot=function t(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l={},s=i?e:c.top,u=i?n:c.left;return Object.values(a).forEach((function(i){var c=e,b=n;switch(i){case a.LEFT:b-=1;break;case a.UP:c-=1;break;case a.RIGHT:b+=1;break;case a.DOWN:c+=1}var d=vt(c,b,{top:s,left:u},r);l[i]={topCoordinate:c,leftCoordinate:b,score:d},o>0&&d&&(l[i]=Object(M.a)(Object(M.a)({},l[i]),{child:t(c,b,r,o-1,!1,{top:s,left:u})}))})),l},jt=function(t,e,n){var r=Ot(t,e,n);console.log(r);var a,o=null,i=null;return Object.entries(r).forEach((function(t){var e=Object(I.a)(t,2),n=e[0],r=e[1],c=function(t,e){var n=null;return void 0===e.score?n:n=e.score}(0,r);(!i||c&&i<c)&&(i=c,o=r,a=n)})),o?a:null},yt=function(t,e){var n=Object(f.useRef)();Object(f.useEffect)((function(){n.current=t}),[t]),Object(f.useEffect)((function(){var t=setInterval((function(){var t;null===(t=n.current)||void 0===t||t.call(n)}),e);return function(){return clearInterval(t)}}),[e])},ht=n(11),kt=S.size.game-1,xt=pt("P1",0,0),wt=pt("P2",0,kt),Et=pt("P3",kt,kt),zt=pt("P4",kt,0),St="Game",Ct={players:{P1:xt},bombs:[],gameMap:L(S.size.game),is3D:!1,isSideView:!1,size:S.size.game,animationCounter:0,powerUps:{}},Mt={P1:xt,P2:wt,P3:Et,P4:zt},Tt="".concat(St,"/SET_GAME_STATE"),Pt="".concat(St,"/START_GAME"),It="".concat(St,"/SET_GAME_MAP"),Dt="".concat(St,"/SET_PLAYER_REF"),Rt="".concat(St,"/MAKE_MOVE"),qt="".concat(St,"/TRIGGER_MOVE"),Nt="".concat(St,"/DROP_BOMB"),Bt="".concat(St,"/REMOVE_BOMB"),Lt="".concat(St,"/TRIGGER_EXPLOSION"),At="".concat(St,"/ON_EXPLOSION_COMPLETE"),Ft="".concat(St,"/TRIGGER_ANIMATION"),Gt="".concat(St,"/TOGGLE_GAME_DIMENSION"),Ut="".concat(St,"/TOGGLE_GAME_PERSPECTIVE"),$t="".concat(St,"/TOGGLE_GAME_TWO_PLAYER"),_t="".concat(St,"/TOGGLE_GAME_NPC"),Vt=function(t){return t.Game||Ct},Xt=function(){return Object(ht.a)(Vt,(function(t){return t.players}))},Ht=function(){return Object(ht.a)(Vt,(function(t){return t.is3D}))},Zt=function(){return Object(ht.a)(Vt,(function(t){return t.isSideView}))},Yt=function(){return Object(ht.a)(Vt,(function(t){return t.gameMap}))},Wt=function(t){return{type:It,payload:t}},Jt=function(){var t=Object(C.b)(),e=Object(C.c)(Object(ht.a)(Vt,(function(t){return t.size}))),n=Object(f.useCallback)((function(e){return t(function(t){return{type:Tt,payload:t}}(e))}),[t]),r=Object(f.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t(Wt({gameMap:e,animate:n}))}),[t]),a=Object(f.useCallback)((function(){return r(L(e),!0)}),[e,r]),o=Object(f.useCallback)((function(e){return t({type:Dt,payload:e})}),[t]),i=Object(f.useCallback)((function(e){return t({type:Rt,payload:e})}),[t]),c=Object(f.useCallback)((function(e){return t((n=Object(M.a)(Object(M.a)({},e),{},{onComplete:i}),{type:qt,payload:n}));var n}),[t,i]),l=Object(f.useCallback)((function(e){return t({type:Nt,payload:e})}),[t]),s=Object(f.useCallback)((function(e){return t({type:Bt,payload:e})}),[t]),u=Object(f.useCallback)((function(e){return t({type:Lt,payload:e})}),[t]),b=Object(f.useCallback)((function(e){t({type:At,payload:e})}),[t]),d=Object(f.useCallback)((function(){return t({type:Ft})}),[t]),p=Object(f.useCallback)((function(){return t({type:Gt})}),[t]),g=Object(f.useCallback)((function(){return t({type:Ut})}),[t]),m=Object(f.useCallback)((function(){return t({type:$t})}),[t]),v=Object(f.useCallback)((function(){return t({type:_t})}),[t]);return{updateGameSettings:n,generateNewCollisionCoordinates:a,setPlayerRef:o,makeMove:i,triggerMove:c,dropBomb:l,removeBomb:s,triggerExplosion:u,onExplosionComplete:b,triggerAnimation:d,toggleDimension:p,togglePerspective:g,toggleTwoPlayer:m,toggleNPC:v}},Kt=function(){var t=Jt(),e=t.dropBomb,n=t.triggerMove,r=Object(C.c)(Yt()),o=Object(C.c)(Ht()),i=Object(C.c)(Xt()),l=Object(f.useRef)({P1:(new Date).getTime(),P2:(new Date).getTime(),P3:(new Date).getTime(),P4:(new Date).getTime()}),s=Object(f.useRef)({}),b=Object(f.useMemo)((function(){var t,e=null===(t=i.P4)||void 0===t?void 0:t.state;return e?dt(e,u.MovementSpeed):Number.MAX_SAFE_INTEGER}),[i.P4]);return yt((function(){i.P4&&function(t){var e=t.players,n=t.gameMap,r=t.triggerMove,a=c.P4,o=e[a];if(o){var i=o.coordinates.top/S.size.character,l=o.coordinates.left/S.size.character,s=jt(i,l,n);console.log(s),s&&r({playerId:a,direction:s})}}({players:i,gameMap:r,triggerMove:n,dropBomb:e})}),b),Object(f.useEffect)((function(){var t=function(t,e){var r=function(t,e){var n=e.MoveUp,r=e.MoveRight,o=e.MoveDown,i=e.MoveLeft;return[t.current[n]&&a.UP,t.current[r]&&a.RIGHT,t.current[o]&&a.DOWN,t.current[i]&&a.LEFT].filter(Boolean)}(s,e);r.length&&r.forEach((function(e){n({playerId:t,direction:e})}))},r=function(){s.current&&Object.keys(i).forEach((function(n){var r=S.keyboardConfig.player[n],a=i[n].state,o=dt(a,u.MovementSpeed);if(r){if(i[n].ref){var c=(new Date).getTime();c-l.current[n]>o&&(l.current[n]=c,t(n,r))}!function(t,n){var r=n.DropBomb;s.current[r]&&e(t)}(n,r)}}))},o=function(t){if(s.current&&l.current){var e="keydown"===t.type;!function(t,e){s.current[t.code]=e}(t,e),e&&r()}};return window.addEventListener("keyup",o),window.addEventListener("keydown",o),function(){window.removeEventListener("keyup",o),window.removeEventListener("keydown",o)}}),[e,r,o,i,n]),{}},Qt=n(1),te=O.c.div(V||(V=Object(v.a)(["\n\tdisplay: flex;\n\tjustify-content: center;\n\tflex-wrap: wrap;\n\n\t& > :first-child {\n\t\tmargin-right: 50px;\n\t\twidth: 15%;\n\t\t@media only screen and (max-width: 600px) {\n\t\t\twidth: 100%;\n\t\t\tmargin: 50px auto;\n\t\t\torder: 2;\n\t\t\t& button {\n\t\t\t\twidth: 80% !important;\n\t\t\t}\n\t\t}\n\t}\n"]))),ee=O.c.div(X||(X=Object(v.a)(["\n\ttext-align: center;\n\t","\n"])),(function(t){return t.$is3D?"perspective: 1000":""})),ne=function(t){var e=t.children,n=Object(C.c)(Ht());return Object(Qt.jsxs)(ee,{$is3D:n,children:[Object(Qt.jsx)("h1",{children:S.title}),Object(Qt.jsx)(te,{children:e})]})},re={palette:{background:{primary:"var(--primary-background)",secondary:"var(--secondary-background)"},color:{primary:"var(--primary-color)",secondary:"var(--secondary-color)",error:"var(--error-color)",warning:"var(--warning-color)",success:"var(--success-color)",info:"var(--info-color)",default:"var(--default-color)"}},shape:{borderRadius:"var(--border-radius)",padding:"var(--padding)"},game:{character:{size:"var(--character-size)"},tile:{size:"var(--tile-size)"}}},ae=Object(O.a)(H||(H=Object(v.a)(["\n\t:root {\n\t\t/* #region COLORS */\n\t\t--primary-background: #13141b;\n\t\t--secondary-background: #1a1d28;\n\n\t\t--primary-color: #ec7ebd;\n\t\t--secondary-color: #763ee6;\n\n\t\t/* --error-color: rgb(255, 122, 105);\n\t\t--warning-color: rgb(241, 168, 23);\n\t\t--success-color: rgb(49, 162, 76);\n\t\t--info-color: rgb(134, 218, 255);\n\t\t--default-color: rgb(228, 230, 235); */\n\t\t--error-color: #f44336;\n\t\t--warning-color: #ff9800;\n\t\t--success-color: #4caf50;\n\t\t--info-color: #2196f3;\n\t\t--default-color: #E4E6EB;\n\t\t/* #endregion */\n\n\t\t/* #region UTILITIES */\n\t\t--border-radius: 4px;\n\t\t--padding: 10px;\n\t\t/* #endregion */\n\n\t\t/* #region GAME */\n\t\t--character-size: ","px;\n\t\t--tile-size: ","px;\n\t\t--game-size: ","px;\n\t\t--exploding-duration: ","s;\n\t\t--firing-duration: ","s;\n\t\t/* #endregion */\n\t\t\n\t\t/* #region ANIMATIONS */\n\t\t/* @see https://easings.net/#easeInOutBack */\n\t\t--ease-in-out-back: cubic-bezier(0.68, -0.6, 0.32, 1.6);\n\t\t--ease-in-out-quint: cubic-bezier(0.83, 0, 0.17, 1);\n\t\t--incremental-animation-delay: 0.03s;\n\t\t--block-animation-duration: 0.5s;\n\t\t/* #endregion */\n\n\t\t/* #region GENERICS */\n\t\t*, ::before, ::after {\n\t\t\tbox-sizing: border-box;\n\t\t}\n\n\t\thtml,\n\t\tbody,\n\t\t#root {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tmargin: 0;\n\t\t\tpadding: 0;\n\t\t}\n\n\t\thtml {\n\t\t\tbackground-color: ",";\n\t\t\t/* color: #fff; */\n\t\t}\n\n\t\t#root {\n\t\t\tposition: relative;\n\t\t}\n\n\t\tpre {\n\t\t\twhite-space: pre-wrap;\n\t\t\tword-wrap: break-word;\n\t\t}\n\t\t/* #endregion */\n\n\t\t/* #region SCROLLBARS */\n\t\t*, ::before, ::after {\n\t\t\tscroll-behavior: smooth;\n\t\t\tscrollbar-color: black transparent;\n\t\t\tscrollbar-width: thin;\n\t\t}\n\n\t\t/* width */\n\t\t::-webkit-scrollbar {\n\t\t\twidth: 5px;\n\t\t\theight: 6px;\n\t\t}\n\n\t\t/* Track */\n\t\t::-webkit-scrollbar-track {\n\t\t\tbackground: #bfbfbf;\n\t\t}\n\n\t\t/* Handle */\n\t\t::-webkit-scrollbar-thumb {\n\t\t\tbackground: black;\n\t\t\tborder-radius: 10px;\n\t\t}\n\n\t\t/* Handle on hover */\n\t\t::-webkit-scrollbar-thumb:hover {\n\t\t\tbackground: rgba(0, 0, 0, 0.7);\n\t\t}\n\t\t/* #endregion */\n\t}\n"])),S.size.character,S.size.tile,S.size.game,S.duration.bomb.exploding,S.duration.bomb.firing,re.palette.background.primary),oe=re,ie=O.c.button(Z||(Z=Object(v.a)(["\n\tbackground-color: ",";\n\t/* IGNORE SIZE FOR NOW */\n\tborder-radius: ",";\n\tpadding: ",";\n"])),(function(t){var e=t.$variant;return oe.palette.color[e]}),oe.shape.borderRadius,oe.shape.padding),ce=function(t){var e=t.variant,n=t.size,r=t.children,a=Object(T.a)(t,["variant","size","children"]);return Object(Qt.jsx)(ie,Object(M.a)(Object(M.a)({$variant:e,$size:n},a),{},{children:r}))},le=Object(f.memo)(ce),se=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(e){setTimeout(e,t)}))},ue=function(t){var e,n=t.active,r=void 0!==n&&n,a=t.onClick,o=t.children,i=Object(T.a)(t,["active","onClick","children"]);return Object(Qt.jsx)(le,Object(M.a)(Object(M.a)({style:{width:"100%",wordWrap:"break-word",marginBottom:10},variant:r?"success":"warning",size:"medium",onClick:(e=a,function(t){t.currentTarget.blur(),e(t)})},i),{},{children:o}))},be=function(){var t=Jt(),e=t.generateNewCollisionCoordinates,n=t.togglePerspective,r=t.toggleDimension,a=t.toggleTwoPlayer,o=t.toggleNPC,i=Object(C.c)(Ht()),c=Object(C.c)(Zt()),l=Object(C.c)(Xt()),s=[{label:"New Collision Coordinates",onClick:e},{label:"Toggle 3D (Experimental)",onClick:r,active:i},{label:"Toggle Side View",onClick:n,active:c,disabled:!i},{label:"Toggle Two-Player Mode",onClick:a,active:!!l.P2},{label:"Toggle NPC",onClick:o,active:!!l.P4}];return Object(Qt.jsx)("div",{children:s.map((function(t){var e=t.label,n=Object(T.a)(t,["label"]);return Object(Qt.jsx)(ue,Object(M.a)(Object(M.a)({},n),{},{children:e}),e)}))})},de=function(t){var e=Object(f.useRef)();return Object(f.useEffect)((function(){e.current=t}),[t]),e.current},fe=n(21),pe=n.n(fe),ge=n(28),me=(n(45),O.c.div(Y||(Y=Object(v.a)([""])))),ve=O.c.div(W||(W=Object(v.a)(["\n\t","\n\theight: calc(var(--tile-size) * 1px);\n\twidth: calc(var(--tile-size) * 1px);\n\ttransform-style: preserve-3d;\n\tposition: absolute;\n\ttransform-origin: center center;\n\ttransition: 300ms;\n\n\ttransform: scale(1, 1) translateZ(calc(var(--tile-size) / 2 * -1px));\n\n\t& > "," {\n\t\tborder: 1px solid var(--primary-background);\n\n\t\theight: calc(var(--tile-size) * 1px);\n\t\twidth: calc(var(--tile-size) * 1px);\n\t\t/* transform-origin: 50% 50%; */\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\tposition: absolute;\n\n\t\t/** @see https://codepen.io/jh3y/pen/BaKqQLJ */\n\t\t&:nth-of-type(1) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(2) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg) rotateY(180deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(3) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg) rotateY(90deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(4) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg) rotateY(-90deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(5) {\n\t\t\tbackground-color: var(--secondary-background);\n\t\t\ttransform: translate(-50%, -50%)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(6) {\n\t\t\ttransform: translate(-50%, -50%)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * -1px)) rotateX(180deg);\n\t\t}\n\t}\n\n\t&.bouncy-block- {\n\t\t&no-animation {\n\t\t\ttransform: translateZ(calc(var(--tile-size) / 2 * 1px));\n\t\t\t& > "," {\n\t\t\t\tbackground-color: var(--secondary-color);\n\t\t\t}\n\t\t}\n\n\t\t&0 {\n\t\t\ttransform: translateZ(calc(var(--tile-size) / 2 * 1px))\n\t\t\t\trotateX(0deg) rotateY(0deg) rotateZ(0deg);\n\t\t}\n\t}\n"])),(function(t){var e=t.$size;return"\n\t\t--tile-size: ".concat(e,";\n\t")}),me,me),Oe=Object(f.forwardRef)((function(t,e){var n=t.size,r=t.top,a=t.left,o=t.animate,i=void 0!==o&&o,c=t.variant,l=t.color,s=t.collisionIndex,u=t.style,b=t.className,d=Object(T.a)(t,["size","top","left","animate","variant","color","collisionIndex","style","className"]),f="cuboid bouncy-block-".concat((i?s:"no-animation")||0," ").concat(c).concat(b&&" ".concat(b)||"");return Object(Qt.jsx)(ve,Object(M.a)(Object(M.a)({className:f,style:Object(M.a)(Object(M.a)({},u),{},{top:r,left:a,width:n,height:n}),ref:e,$size:n},d),{},{children:Array(6).fill(0).map((function(t,e){return Object(Qt.jsx)(me,{style:Object(M.a)(Object(M.a)({},l&&{backgroundColor:l}),{},{width:n,height:n})},e)}))}))})),je=function(t,e){return"".concat(e?"transform: translateZ(calc(var(--tile-size) / 2 * 2px)) rotateX(".concat(t,"deg) rotateY(").concat(t,"deg)"):"transform: rotate(".concat(t,"deg)"),";")},ye=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(O.d)(J||(J=Object(v.a)(["\n\t0% { "," }\n\t\n\t/* 40% -> 100% */\n\t","\n"])),je(0,t),Array(7).fill(0).map((function(e,n){return"".concat(10*(n+4),"% { ").concat(je((n+1)*(t&&(n<6?90:100)||n<4&&90||n<6&&270||360),t)," }")})).join("\n"))},he=O.c.div(K||(K=Object(v.a)(["\n\tanimation: "," linear forwards;\n"])),ye()),ke=Object(O.c)(Oe)(Q||(Q=Object(v.a)(["\n\t/* "," */\n\tanimation: "," linear forwards;\n"])),(function(t){var e=t.size;return"\n\t\t--tile-size: ".concat(e,";\n\t")}),ye(!0)),xe=function(t){var e=t.color,n=t.firingDuration,r=t.explodingDuration,a=t.explosionSize,o=t.id,c=t.top,l=t.left,s=t.triggerExplosion,u=t.onExplosionComplete,b=t.is3D,p=Object(f.useState)(i.Firing),g=Object(I.a)(p,2),m=g[0],v=g[1];Object(f.useEffect)((function(){(function(){var t=Object(ge.a)(pe.a.mark((function t(){return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,se(1e3*n);case 2:return s(o),v(i.Exploding),t.next=6,se(r/2*1e3);case 6:u(o);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[r,a,n,s,u,c,l,o]);var O=S.size.bomb,j=O/2,y={position:"absolute",backgroundColor:e,width:O,height:O,top:c+j,left:l+j,animationDuration:"".concat(n,"s")};return m===i.Firing&&(!b&&Object(Qt.jsx)(he,{style:y})||Object(Qt.jsx)(ke,{size:O,top:Number(y.top),left:Number(y.left),animate:!1,variant:d.Bomb,color:oe.palette.color.error,collisionIndex:1,style:y}))||null},we=(n(46),Object(f.forwardRef)((function(t,e){t.id,t.name;var n=t.coordinates,r=n.top,o=n.left,i=t.style,c=t.keyboardConfig,l=Object(T.a)(t,["id","name","coordinates","style","keyboardConfig"]),s=Object(f.useState)(a.DOWN),u=Object(I.a)(s,2),b=u[0],d=u[1],p=Object(f.useState)(""),g=Object(I.a)(p,2),m=g[0],v=g[1],O=Object(f.useRef)((new Date).getTime()),j=!!m;return Object(f.useEffect)((function(){var t=function(t){return c?function(t,e){var n=e.MoveUp,r=e.MoveRight,o=e.MoveDown,i=e.MoveLeft;switch(!0){case t===n:return a.UP;case t===r:return a.RIGHT;case t===o:return a.DOWN;case t===i:return a.LEFT;default:return null}}(t.code,c):null},e=function(){m&&v("")},n=function(n){var r=t(n);r?(O.current=(new Date).getTime(),v(r),function(t){d(t)}(r)):e()},r=function(){setTimeout((function(){var t=(new Date).getTime()-200;O.current>=t||e()}),200)};return document.addEventListener("keydown",n),document.addEventListener("keyup",r),function(){document.removeEventListener("keydown",n),document.removeEventListener("keyup",r)}}),[m,c]),Object(Qt.jsxs)("div",Object(M.a)(Object(M.a)({className:"character","data-facing":b,"data-walking":j.toString(),ref:e,style:Object(M.a)(Object(M.a)({},i),{},{top:r,left:o})},l),{},{children:[Object(Qt.jsx)("div",{className:"shadow pixel-art"}),Object(Qt.jsx)("div",{className:"spritesheet-wrapper",children:Object(Qt.jsx)("div",{className:"spritesheet pixel-art"})})]}))}))),Ee=Object(f.forwardRef)((function(t,e){var n=t.id,r=t.name,a=t.coordinates,o=a.top,i=a.left,l=t.keyboardConfig,s=t.is3D,u=Object(T.a)(t,["id","name","coordinates","keyboardConfig","is3D"]),b=S.size,d=(b.tile-b.character)/2,f=d+o,p=d+i,g=Object(M.a)({id:n,name:"".concat(r," ").concat(n),coordinates:{top:f,left:p},keyboardConfig:l,ref:e},u);return s&&Object(Qt.jsx)(Oe,Object(M.a)({size:S.size.character,top:f,left:p,animate:!0,color:oe.palette.color.success,style:{transform:G},variant:c[n],ref:e},u))||Object(Qt.jsx)(we,Object(M.a)({},g))})),ze=function(){var t=Jt().setPlayerRef,e=Object(C.c)(Xt()),n=Object(C.c)(Object(ht.a)(Vt,(function(t){return t.bombs}))),r=Object(C.c)(Ht()),a=de(r),o=Jt(),i=o.triggerExplosion,c=o.onExplosionComplete,l=Object(f.useCallback)((function(e){var n=e.id,o=e.ref;return function(e){a===r&&o||t({playerId:n,newRef:e})}}),[r,a,t]);return Object(Qt.jsxs)(Qt.Fragment,{children:[Object.entries(e).map((function(t){var e=Object(I.a)(t,2),n=e[0],a=e[1],o=S.keyboardConfig.player[n];return Object(Qt.jsx)(Ee,{id:n,name:"Bomber",coordinates:a.coordinates,keyboardConfig:o,is3D:r,ref:l(a)},n)})),n.map((function(t){var n=t.id,a=t.playerId,o=Object(T.a)(t,["id","playerId"]),l=e[a].state,s=dt(l,u.BombSize);return Object(Qt.jsx)(xe,Object(M.a)(Object(M.a)({id:n,playerId:a},o),{},{color:oe.palette.color.error,explosionSize:s,firingDuration:S.duration.bomb.firing,explodingDuration:S.duration.bomb.exploding,triggerExplosion:i,onExplosionComplete:c,is3D:r}),n)}))]})},Se=Object(O.d)(tt||(tt=Object(v.a)(["\n\t0% { transform: scale(0, 0); }\n\t25% { transform: scale(0.9, 1.1); }\n\t50% { transform: scale(1.1, 0.9); }\n\t75% { transform: scale(0.95, 1.05); }\n\t100% { transform: scale(1, 1); }\n"]))),Ce=O.c.div.attrs((function(t){var e=t.$size,n=t.$top,r=t.$left,a=t.$color;return{style:Object(M.a)({width:e,height:e,top:n,left:r},a&&{backgroundColor:a})}}))(nt||(nt=Object(v.a)(["\n\tposition: absolute;\n\t/* background-color: ","; */\n\tborder: 1px solid ",";\n\t","\n"])),oe.palette.background.secondary,oe.palette.background.primary,(function(t){var e=t.$color,n=t.$collisionIndex,r=t.$animate,a=t.$fireSquare;return a&&Object(O.b)(rt||(rt=Object(v.a)(["\n\t\t\t\t\tborder: none;\n\t\t\t\t\tanimation: ","\n\t\t\t\t\t\tcalc(var(--firing-duration) / 2)\n\t\t\t\t\t\tvar(--ease-in-out-quint) forwards;\n\t\t\t\t"])),function(t){var e=0,n=0,r="",a="",o="",i="";return t===d.FireHorizontal?e=1:t===d.FireVertical?n=1:(e=.5,n=.5,r=" rotate(90deg)",a=" rotate(360deg)",o="border-radius: 50%;",i="border-radius: 0%;"),Object(O.d)(et||(et=Object(v.a)(["\n\t\t// cool effect\n\t\t/* 0% { border: 16px solid ","; transform: scale(",", ",")","; "," } */\n\t\t0% { background-color: ","; transform: scale(",", ",")","; "," }\n\t\t20% { background-color: ","; }\n\t\t40% { background-color: ","; }\n\t\t50% { "," }\n\t\t60% { background-color: ","; }\n\t\t80% { background-color: ","; }\n\t\t100% { background-color: ","; transform: scale(1)",";  }\n\t"])),oe.palette.background.primary,e,n,r,o,oe.palette.background.primary,e,n,r,o,oe.palette.color.error,oe.palette.color.info,i,oe.palette.color.error,oe.palette.color.info,oe.palette.color.error,a)}(a))||r&&e&&Object(O.b)(at||(at=Object(v.a)(["\n\t\t\t\t\ttransform: scale(0, 0);\n\t\t\t\t\tz-index: 9999;\n\t\t\t\t\tanimation: ","\n\t\t\t\t\t\tvar(--block-animation-duration) ease\n\t\t\t\t\t\tcalc(\n\t\t\t\t\t\t\t"," *\n\t\t\t\t\t\t\t\tvar(--incremental-animation-delay)\n\t\t\t\t\t\t)\n\t\t\t\t\t\tforwards;\n\t\t\t\t"])),Se,n)||""})),Me=function(t){var e=t.size,n=t.top,r=t.left,a=t.color,o=t.collisionIndex,i=t.animate,c=void 0!==i&&i,l=t.fireSquare;return Object(Qt.jsx)(Ce,{$size:e,$top:n,$left:r,$animate:c,$color:a,$collisionIndex:o,$fireSquare:l})},Te=Object(f.memo)(Me),Pe=function(t){var e=t.variant,n=t.top,r=t.left,a=t.size;return Object(Qt.jsx)("div",{style:{position:"absolute",top:n,left:r,width:a,height:a},children:e})},Ie=O.c.div(ot||(ot=Object(v.a)(["\n\twidth: ",";\n\theight: ",";\n\tborder-radius: ",";\n\tbackground-color: ",";\n\tposition: relative;\n\tbox-shadow: 0 10px 20px rgba(0, 0, 0, 0.5), 0 6px 6px rgba(0, 0, 0, 0.6);\n\ttransition: transform var(--block-animation-duration);\n\n\t","\n"])),(function(t){var e=t.$size;return"calc(".concat(oe.game.tile.size," * ").concat(e,")")}),(function(t){var e=t.$size;return"calc(".concat(oe.game.tile.size," * ").concat(e,")")}),oe.shape.borderRadius,oe.palette.background.secondary,(function(t){var e=t.$is3D,n=t.$isTopView,r="";return e&&(r+="transform-style: preserve-3d;",n||(r+="\ntransform: rotateX(-24deg) rotateY(-24deg) rotateX(90deg);")),r})),De=function(t){var e=t.size,n=t.gameMap,r=t.is3D,a=t.isTopView,o=t.animationCounter,i=t.children,c=o!==de(o),s=1;return Object(Qt.jsxs)(Ie,{$size:e,$is3D:r,$isTopView:a,children:[n.map((function(t,e){return t.map((function(t,n){var a,o=t===l.NonBreaking||t===l.Breaking,i="".concat(e,"_").concat(n),u=S.size.tile,b=e*S.size.tile,f=n*S.size.tile;if(mt(t))return Object(Qt.jsx)(Pe,{size:u,variant:t,top:b,left:f},i);t!==d.FireCore&&t!==d.FireHorizontal&&t!==d.FireVertical||(a=t);var p=Object(M.a)({key:i,size:u,top:b,left:f,animate:c,variant:t,fireSquare:a},o&&{color:oe.palette.color[t===l.NonBreaking?"secondary":"primary"],collisionIndex:s++});return r&&(o&&Object(Qt.jsx)(Oe,Object(M.a)({},p))||Object(Qt.jsx)(Te,Object(M.a)({},p)))||Object(Qt.jsx)(Te,Object(M.a)({},p))}))})),i]})},Re=function(t){var e=t.children,n=Object(C.c)(Yt()),r=Object(C.c)(Ht()),a=!Object(C.c)(Zt()),o=Object(C.c)(Object(ht.a)(Vt,(function(t){return t.animationCounter})));return Object(Qt.jsx)(De,{size:S.size.game,gameMap:n,is3D:r,isTopView:a,animationCounter:o,children:e})},qe=function(){return Kt(),Object(Qt.jsxs)(ne,{children:[Object(Qt.jsx)(be,{}),Object(Qt.jsx)(Re,{children:Object(Qt.jsx)(ze,{})})]})},Ne=n(12),Be=n(29),Le=n(30),Ae=n(15),Fe=function(t,e){Object.keys(e).forEach((function(n){t[n]=e[n]}))},Ge=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct,e=arguments.length>1?arguments[1]:void 0;return Object(Ae.b)(t,(function(n){var r=function(e,r){var a=lt(e),o=a.xSquare,i=a.ySquare;try{n.gameMap[i][o]=r}catch(c){console.error("Square being set is out of boundaries",{gameMap:t.gameMap,xSquare:o,ySquare:i})}},a=function(e){var r=function(e){var n=lt(e),r=n.xSquare,a=n.ySquare;try{var o=t.gameMap[a][r];if(o!==l.Breaking)return null;var i=gt();return i&&o===l.Breaking?{square:i,coordinates:{ySquare:a,xSquare:r}}:null}catch(c){return console.error("Square being set is out of boundaries",{gameMap:t.gameMap,xSquare:r,ySquare:a}),null}}(e);if(r){var a=r.square,o=r.coordinates,i=o.xSquare,c=o.ySquare;n.powerUps[c]||(n.powerUps[c]={}),n.powerUps[c][i]=a}},o=function(e){return t.players[e].state},i=function(t){return dt(o(t),u.BombSize)};switch(e.type){case Tt:Fe(n,e.payload);break;case Pt:n.players.P1=Object(Ae.a)(Mt.P1);break;case It:var c=e.payload,s=c.animate,b=c.gameMap;n.gameMap=b,s&&n.animationCounter++;break;case Dt:var f=e.payload,p=f.playerId,g=f.newRef;if(!g)break;n.players[p].ref=Object(Ae.a)(g),r(t.players[p].coordinates,p);break;case qt:var m=e.payload,v=m.playerId,O=m.direction,j=m.onComplete,y=t.is3D,h=t.players,k=t.gameMap,x=h[v];_({playerConfig:x,direction:O,is3D:y,gameMap:k},function(t){return dt(o(t),u.MovementSpeed)}(v),j);break;case Rt:var w=e.payload,E=w.playerId,z=w.newCoordinates,S=t.players[E].coordinates,C=A(S),M=C.ySquare,T=C.xSquare;t.gameMap[M][T]===E&&r(S,l.Empty);var P=A(z),I=P.ySquare,R=P.xSquare,q=t.gameMap[I][R];mt(q)&&n.players[E].state.powerUps[q]++,r(z,E),n.players[E].coordinates=z;break;case Nt:var N=e.payload,B=t.players[N],L=ft(B);n.bombs.push(L),r(B.coordinates,d.Bomb);break;case Bt:var F=e.payload;n.bombs=n.bombs.filter((function(t){return t.id!==F}));break;case Lt:var G=e.payload,U=t.bombs.find((function(t){return t.id===G})),$={top:U.top,left:U.left},V=i(U.playerId),X=bt(t.gameMap,t.players,$,V),H=X.coordinatesToSetOnFire,Z=X.playersToKill,Y=H.horizontal,W=H.vertical;Y.forEach((function(t){a(t),r(t,d.FireHorizontal)})),W.forEach((function(t){a(t),r(t,d.FireVertical)})),r(Y[0],d.FireCore),Z.forEach((function(e){delete n.players[e],r(t.players[e].coordinates,l.Empty)}));break;case At:var J=e.payload,K=t.bombs.find((function(t){return t.id===J})),Q={top:K.top,left:K.left},tt=i(K.playerId);n.bombs=n.bombs.filter((function(t){return t.id!==J}));var et=bt(t.gameMap,t.players,Q,tt,!0).coordinatesToSetOnFire,nt=et.horizontal,rt=et.vertical;[].concat(Object(D.a)(nt),Object(D.a)(rt)).forEach((function(e){var a,o=lt(e),i=o.xSquare,c=o.ySquare,s=null===(a=t.powerUps[c])||void 0===a?void 0:a[i];s?(r(e,s),n.powerUps[c][i]=null):r(e,l.Empty)}));break;case Ft:n.animationCounter++;break;case Gt:n.is3D=!n.is3D;break;case Ut:n.isSideView=!n.isSideView;break;case $t:if(n.players.P2){delete n.players.P2;break}n.players.P2=Object(Ae.a)(Mt.P2);break;case _t:if(n.players.P4){delete n.players.P4;break}n.players.P4=Object(Ae.a)(Mt.P4)}}))},Ue=Object(Ne.combineReducers)(Object(y.a)({},St,Ge)),$e=function(t){var e=[Be.a],n=Ne.applyMiddleware.apply(void 0,e);return Object(Ne.createStore)(Ue,t,Object(Le.composeWithDevTools)(n))}({});var _e=function(){return Object(Qt.jsxs)(C.a,{store:$e,children:[Object(Qt.jsx)(j,{children:Object(Qt.jsx)(qe,{})}),Object(Qt.jsx)("div",{id:"created-by-numan"}),Object(Qt.jsx)(ae,{})]})},Ve=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,o=e.getLCP,i=e.getTTFB;n(t),r(t),a(t),o(t),i(t)}))};m.a.render(Object(Qt.jsx)(p.a.StrictMode,{children:Object(Qt.jsx)(_e,{})}),document.getElementById("root")),Ve()}},[[47,1,2]]]);
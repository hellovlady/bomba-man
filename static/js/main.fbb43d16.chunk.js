(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{27:function(t,e,n){},32:function(t,e,n){},33:function(t,e,n){"use strict";n.r(e);var r,o=n(0),a=n.n(o),i=n(18),c=n.n(i),s=(n(27),n(3)),l=n(4),u=l.c.div(r||(r=Object(s.a)(["\n\twidth: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n"]))),b=n(10),d=n(8),f=n(5),j=n(2),p=n(7),m=n(6),O={size:{game:15,character:32,tile:32,movement:32,collisionMin:1,collisionMax:1,bomb:16,explosion:1},duration:{movement:300,bomb:{firing:2,exploding:2}},keyboardConfig:{player:{P1:{MoveUp:m.j,MoveRight:m.b,MoveDown:m.f,MoveLeft:m.a,DropBomb:m.h},P2:{MoveUp:m.i,MoveRight:m.e,MoveDown:m.c,MoveLeft:m.d,DropBomb:m.g}}}};O.size.collisionMin=Math.floor(O.size.game*O.size.game/3),O.size.collisionMax=Math.floor(O.size.game*O.size.game/2);var v,g,x,h,y,z,k,w,E,D=O,$=Object(l.a)(v||(v=Object(s.a)(["\n\t:root {\n\t\t/* Colors */\n\t\t--primary-background: #13141b;\n\t\t--secondary-background: #1a1d28;\n\n\t\t--primary-color: #ec7ebd;\n\t\t--secondary-color: #763ee6;\n\n\t\t--error-color: rgb(255, 122, 105);\n\t\t--warning-color: rgb(241, 168, 23);\n\t\t--success-color: rgb(49, 162, 76);\n\t\t--info-color: rgb(134, 218, 255);\n\t\t--default-color: rgb(228, 230, 235);\n\n\t\t/* Utilities */\n\t\t--border-radius: 4px;\n\t\t--padding: 10px;\n\n\t\t/* Game */\n\t\t--character-size: ","px;\n\t\t--tile-size: ",";\n\t\t--game-size: ",";\n\t\t\n\t\t/* Animations */\n\t\t/* @see https://easings.net/#easeInOutBack */\n\t\t--ease-in-out-back: cubic-bezier(0.68, -0.6, 0.32, 1.6);\n\t\t--incremental-animation-delay: 0.03s;\n\t\t--block-animation-duration: 0.5s;\n\t}\n"])),D.size.character,D.size.tile,D.size.game),P={palette:{background:{primary:"var(--primary-background)",secondary:"var(--secondary-background)"},color:{primary:"var(--primary-color)",secondary:"var(--secondary-color)",error:"var(--error-color)",warning:"var(--warning-color)",success:"var(--success-color)",info:"var(--info-color)",default:"var(--default-color)"}},shape:{borderRadius:"var(--border-radius)",padding:"var(--padding)"},game:{character:{size:"var(--character-size)"}}},S=n(1),T=l.c.button(g||(g=Object(s.a)(["\n\tbackground-color: ",";\n\t/* IGNORE SIZE FOR NOW */\n\tborder-radius: ",";\n\tpadding: ",";\n"])),(function(t){var e=t.$variant;return P.palette.color[e]}),P.shape.borderRadius,P.shape.padding),M=function(t){var e=t.variant,n=t.size,r=t.children,o=Object(p.a)(t,["variant","size","children"]);return Object(S.jsx)(T,Object(j.a)(Object(j.a)({$variant:e,$size:n},o),{},{children:r}))},C=Object(o.memo)(M);!function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT"}(x||(x={})),function(t){t.X="X",t.Y="Y"}(h||(h={})),function(t){t.Firing="Firing",t.Exploding="Exploding",t.Exploded="Exploded"}(y||(y={})),function(t){t.P1="P1",t.P2="P2",t.Npc1="P3",t.Npc2="P4",t.Npc3="P5"}(z||(z={})),(w=k||(k={})).Empty="T1",w.Breaking="T2",w.NonBreaking="T3",function(t){t.BombSize="PU1",t.Speed="PU2",t.Invincibility="PU3"}(E||(E={}));var N,R=n(16);function B(t,e){var n=e||t,r=void 0!==e&&t||0;return Math.floor(Math.random()*(n-r))+r}var I,F,L,A,U,X,Y,W,q,G,J,V,H,_,Z,K=D.size.game-1,Q=[[0,0],[0,1],[1,0],[0,K],[0,K-1],[1,K],[K,K],[K,K-1],[K-1,K],[K,0],[K,1],[K-1,0]],tt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q,n=[].concat(Object(b.a)(Object.keys(k)),Object(b.a)(Array(3).fill("Empty"))),r=Array(t).fill(0).map((function(){return Array(t).fill(0).map((function(){return k[n[B(n.length)]]}))}));return e.forEach((function(t){var e=Object(f.a)(t,2),n=e[0],o=e[1];r[n][o]!==k.Empty&&(r[n][o]=k.Empty)})),r},et=function(t){var e=t.top,n=t.left;return{ySquare:e/D.size.movement,xSquare:n/D.size.movement}},nt=D.size.movement*(D.size.game-1),rt=function(t,e,n){var r,o=et({top:t,left:e}),a=o.xSquare,i=null===(r=n[o.ySquare])||void 0===r?void 0:r[a];return!(i===k.Breaking||i===k.NonBreaking)&&!(e<0||e>nt)&&!(t<0||t>nt)},ot=(N={},Object(d.a)(N,h.X,{REPLACE:/rotateX\(-?\d+deg\)/g,FIND:Object(R.a)(/rotateX\((\x2D?[0-9]+)deg\)/,{degree:1})}),Object(d.a)(N,h.Y,{REPLACE:/rotateY\(-?\d+deg\)/g,FIND:Object(R.a)(/rotateY\((\x2D?[0-9]+)deg\)/,{degree:1})}),N),at=function(t,e,n){e&&(t.current.style.transition="".concat(D.duration.movement,"ms"),t.current.style.transform=function(t,e){var n=90,r=h.Y;return e!==x.DOWN&&e!==x.LEFT||(n*=-1),e!==x.UP&&e!==x.DOWN||(r=h.X),t.replace(ot[r].REPLACE,"rotate".concat(r,"(").concat(n,"deg)"))}(t.current.style.transform,n))},it="translateZ(calc(var(--tile-size) / 2 * 1px)) rotateX(0deg) rotateY(0deg)",ct=function(t,e){return Object(d.a)({},t,{coordinates:{top:32*e,left:32*e},ref:Object(o.createRef)()})},st=function(t,e,n,r,a){var i=Object(o.useRef)({P1:(new Date).getTime(),P2:(new Date).getTime()}),c=Object(o.useRef)({});return Object(o.useEffect)((function(){var o=function(t,o,a,i){var s,l=t.top,u=t.left,b=o.MoveUp,d=o.MoveRight,f=o.MoveDown,j=o.MoveLeft;if(r&&((s=i).current.style.transition="0ms",s.current.style.transform=it),c.current[b]){var p=l-D.size.movement,m=u;rt(p,m,n)&&setTimeout((function(){e(a,{top:p,left:m}),at(i,r,x.UP)}),0)}if(c.current[d]){var O=l,v=u+D.size.movement;rt(O,v,n)&&setTimeout((function(){e(a,{top:O,left:v}),at(i,r,x.RIGHT)}),0)}if(c.current[f]){var g=l+D.size.movement,h=u;rt(g,h,n)&&setTimeout((function(){e(a,{top:g,left:h}),at(i,r,x.DOWN)}),0)}if(c.current[j]){var y=l,z=u-D.size.movement;rt(y,z,n)&&setTimeout((function(){e(a,{top:y,left:z}),at(i,r,x.LEFT)}),0)}},s=function(){c.current&&Object.keys(t).forEach((function(e){var n=t[e].coordinates,r=D.keyboardConfig.player[e],s=t[e].ref;if(s.current){var l=(new Date).getTime();l-i.current[e]>D.duration.movement&&(i.current[e]=l,o(n,r,e,s))}!function(t,e){var n=t.top,r=t.left,o=e.DropBomb;c.current[o]&&a({top:n,left:r})}(n,r)}))},l=function(t){if(c.current&&i.current){var e="keydown"===t.type;!function(t,e){c.current[t.code]=e}(t,e),e&&s()}};return window.addEventListener("keyup",l),window.addEventListener("keydown",l),function(){window.removeEventListener("keyup",l),window.removeEventListener("keydown",l)}}),[a,n,r,e,t]),{}},lt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(e){setTimeout(e,t)}))},ut=n(15),bt=n.n(ut),dt=n(22),ft=Object(l.d)(I||(I=Object(s.a)(["\n\t0% { transform:rotate(0deg); }\n\t/* 40% -> 100% */\n\t","\n"])),Array(7).fill(0).map((function(t,e){return"".concat(10*(e+4),"% {transform: rotate(").concat((e+1)*((e<4?90:e<6&&270)||360),"deg);}")})).join("\n")),jt=l.c.div(F||(F=Object(s.a)(["\n\tanimation: "," linear forwards;\n"])),ft),pt=l.c.div(A||(A=Object(s.a)(["\n\t","\n"])),(function(t){var e=t.$explosionAxis,n=t.$explosionSize;return Object(l.b)(U||(U=Object(s.a)(["\n\t\tanimation: ","\n\t\t\tvar(--ease-in-out-back) forwards;\n\t"])),function(t){var e=t.$explosionAxis,n=2*(2*(t.$explosionSize+1)-1),r=2,o=2;return e===h.X?r=n:o=n,r-=.5,o-=.5,Object(l.d)(L||(L=Object(s.a)(["\n\t  \t0% {\n\t\t\ttransform: scale(1);\n\t\t\topacity: 1;\n\t\t}\n\t\t65% {\n\t\t\ttransform: scale(",", ",");\n\t\t}\n\t\t100% {\n\t\t\topacity: 0;\n\t\t}\n\t"])),r,o)}({$explosionAxis:e,$explosionSize:n}))})),mt=function(t){var e=t.color,n=t.firingDuration,r=t.explodingDuration,a=t.explosionSize,i=t.id,c=t.top,s=t.left,l=t.onExplosion,u=Object(o.useState)(y.Firing),b=Object(f.a)(u,2),d=b[0],p=b[1];Object(o.useEffect)((function(){(function(){var t=Object(dt.a)(bt.a.mark((function t(){return bt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,lt(1e3*n);case 2:return p(y.Exploding),t.next=5,lt(r/2*1e3);case 5:l(i,{top:c,left:s});case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[r,a,n,l,c,s,i]);var m=D.size.bomb,O=m/2,v=null,g={position:"absolute",backgroundColor:e,width:m,height:m,top:c+O,left:s+O,animationDuration:"".concat(r,"s")};return d===y.Exploding&&(v=Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(pt,{style:g,$explosionAxis:h.X,$explosionSize:a}),Object(S.jsx)(pt,{style:g,$explosionAxis:h.Y,$explosionSize:a})]})),d===y.Firing&&(v=Object(S.jsx)(jt,{style:Object(j.a)(Object(j.a)({},g),{},{animationDuration:"".concat(n,"s")})})),v},Ot=(n(32),Object(o.forwardRef)((function(t,e){var n=t.size,r=t.top,o=t.left,a=t.animate,i=t.variant,c=t.color,s=t.collisionIndex,l=t.style,u=t.className,b=Object(p.a)(t,["size","top","left","animate","variant","color","collisionIndex","style","className"]);return Object(S.jsx)("div",Object(j.a)(Object(j.a)({className:"".concat(u&&"".concat(u," ")||"","cuboid bouncy-block-").concat((a?s:"no-animation")||0," ").concat(i),style:Object(j.a)(Object(j.a)({},l),{},{top:r,left:o,width:n,height:n}),ref:e},b),{},{children:Array(6).fill(0).map((function(t,e){return Object(S.jsx)("div",{className:"cuboid__side",style:Object(j.a)(Object(j.a)({},c&&{backgroundColor:c}),{},{width:n,height:n})},e)}))}))}))),vt=l.c.span(X||(X=Object(s.a)(["\n\tcolor: ",";\n"])),P.palette.color.warning),gt=l.c.div(Y||(Y=Object(s.a)(["\n\tcolor: #000;\n"]))),xt=l.c.span(W||(W=Object(s.a)([""]))),ht=l.c.span(q||(q=Object(s.a)([""]))),yt=l.c.div(G||(G=Object(s.a)(["\n\twidth: ",";\n\theight: ",";\n\tbackground-color: ",";\n\tposition: absolute;\n\t/* top: 0;\n\tleft: 0; */\n\tborder-radius: 50%;\n\tdisplay: flex;\n\tjustify-content: center;\n\n\ttransition: top ","ms,\n\t\tleft ","ms;\n\n\t& > "," {\n\t\tz-index: 9999;\n\t\tposition: absolute;\n\t\ttop: -27px;\n\t\tfont-size: 10px;\n\t}\n\n\t& > "," {\n\t\tposition: absolute;\n\t\ttop: 7px;\n\t\tfont-size: 8px;\n\n\t\t/* & > "," {\n\t\t}\n\t\t& > "," {\n\t\t} */\n\t}\n"])),P.game.character.size,P.game.character.size,P.palette.color.success,D.duration.movement,D.duration.movement,vt,gt,xt,ht),zt=Object(o.forwardRef)((function(t,e){var n=t.id,r=t.name,o=t.coordinates,a=o.top,i=o.left,c=t.is3D,s=Object(p.a)(t,["id","name","coordinates","is3D"]);return c&&Object(S.jsx)(Ot,Object(j.a)({size:32,left:i,top:a,animate:!0,color:P.palette.color.success,style:{transform:it},variant:z[n],ref:e},s))||Object(S.jsxs)(yt,Object(j.a)(Object(j.a)({$name:"".concat(r," ").concat(n),style:{top:a,left:i},ref:e},s),{},{children:[Object(S.jsx)(vt,{children:"".concat(r," ").concat(n)}),Object(S.jsxs)(gt,{children:[Object(S.jsx)(xt,{children:"o-o"}),Object(S.jsx)("br",{}),Object(S.jsx)(ht,{children:"==="})]})]}))})),kt=function(t){var e=Object(o.useRef)();return Object(o.useEffect)((function(){e.current=t}),[t]),e.current},wt=Object(l.d)(J||(J=Object(s.a)(["\n\t0% { transform: scale(0, 0); }\n\t25% { transform: scale(0.9, 1.1); }\n\t50% { transform: scale(1.1, 0.9); }\n\t75% { transform: scale(0.95, 1.05); }\n\t100% { transform: scale(1, 1); }\n"]))),Et=l.c.div.attrs((function(t){var e=t.$size,n=t.$top,r=t.$left,o=t.$color;return{style:Object(j.a)({width:e,height:e,top:n,left:r},o&&{backgroundColor:o})}}))(V||(V=Object(s.a)(["\n\tposition: absolute;\n\t/* background-color: ","; */\n\tborder: 1px solid ",";\n\t","\n"])),P.palette.background.secondary,P.palette.background.primary,(function(t){var e=t.$color,n=t.$collisionIndex;return t.$animate&&e&&Object(l.b)(H||(H=Object(s.a)(["\n\t\t\t\t\ttransform: scale(0, 0);\n\t\t\t\t\tz-index: 9999;\n\t\t\t\t\tanimation: ","\n\t\t\t\t\t\tvar(--block-animation-duration) ease\n\t\t\t\t\t\tcalc(\n\t\t\t\t\t\t\t"," *\n\t\t\t\t\t\t\t\tvar(--incremental-animation-delay)\n\t\t\t\t\t\t)\n\t\t\t\t\t\tforwards;\n\t\t\t\t"])),wt,n)||""})),Dt=function(t){var e=t.size,n=t.top,r=t.left,o=t.animate,a=t.color,i=t.collisionIndex;return Object(S.jsx)(Et,{$size:e,$top:n,$left:r,$animate:o,$color:a,$collisionIndex:i})},$t=Object(o.memo)(Dt),Pt=l.c.div(_||(_=Object(s.a)(["\n\twidth: ",";\n\theight: ",";\n\tborder-radius: ",";\n\tbackground-color: ",";\n\tposition: relative;\n\tbox-shadow: 0 10px 20px rgba(0, 0, 0, 0.5), 0 6px 6px rgba(0, 0, 0, 0.6);\n\ttransition: transform var(--block-animation-duration);\n\n\t","\n"])),(function(t){var e=t.$size;return"calc(".concat(P.game.character.size," * ").concat(e,")")}),(function(t){var e=t.$size;return"calc(".concat(P.game.character.size," * ").concat(e,")")}),P.shape.borderRadius,P.palette.background.secondary,(function(t){var e=t.$is3D,n=t.$isTopView,r="";return e&&(r+="transform-style: preserve-3d;",n||(r+="\ntransform: rotateX(-24deg) rotateY(-24deg) rotateX(90deg);")),r})),St=function(t){var e=t.size,n=t.gameMap,r=t.is3D,o=t.isTopView,a=t.animationCounter,i=t.children,c=a!==kt(a),s=1;return Object(S.jsxs)(Pt,{$size:e,$is3D:r,$isTopView:o,children:[n.map((function(t,e){return t.map((function(t,n){var o=t===k.NonBreaking||t===k.Breaking,a=Object(j.a)({key:"".concat(e,"_").concat(n),size:D.size.tile,top:e*D.size.tile,left:n*D.size.tile,animate:c,variant:t},o&&{color:P.palette.color[t===k.NonBreaking?"secondary":"primary"],collisionIndex:s++});return r&&(o&&Object(S.jsx)(Ot,Object(j.a)({},a))||Object(S.jsx)($t,Object(j.a)({},a)))||Object(S.jsx)($t,Object(j.a)({},a))}))})),i]})},Tt=l.c.div(Z||(Z=Object(s.a)(["\n\ttext-align: center;\n\t","\n"])),(function(t){return t.$is3D?"perspective: 1000":""})),Mt=function(t){var e,n=t.active,r=void 0!==n&&n,o=t.onClick,a=t.children,i=Object(p.a)(t,["active","onClick","children"]);return Object(S.jsx)(C,Object(j.a)(Object(j.a)({variant:r?"success":"warning",size:"medium",onClick:(e=o,function(t){t.currentTarget.blur(),e(t)})},i),{},{children:a}))},Ct=ct("P1",0),Nt=ct("P2",D.size.game-1),Rt=function(){var t=Object(o.useState)((function(){return tt(D.size.game)})),e=Object(f.a)(t,2),n=e[0],r=e[1],a=Object(o.useState)(0),i=Object(f.a)(a,2),c=i[0],s=i[1],l=Object(o.useState)(!1),u=Object(f.a)(l,2),m=u[0],O=u[1],v=Object(o.useState)(!0),g=Object(f.a)(v,2),x=g[0],h=g[1],y=Object(o.useState)([]),z=Object(f.a)(y,2),w=z[0],E=z[1],$=Object(o.useState)(Object(j.a)({},Ct)),P=Object(f.a)($,2),T=P[0],M=P[1];console.log(T);var C=Object(o.useCallback)((function(t,e){E((function(e){return e.filter((function(e){return e.id!==t}))})),r(function(t,e,n){for(var r=JSON.parse(JSON.stringify(t)),o=et(e),a=o.xSquare,i=o.ySquare,c=Math.max(0,i-n);c<=i+n;c++)r[c][a]===k.Breaking&&(r[c][a]=k.Empty);for(var s=Math.max(0,a-n);s<=a+n;s++)r[i][s]===k.Breaking&&(r[i][s]=k.Empty);return r}(n,e,D.size.explosion))}),[n]);return st(T,(function(t,e){M((function(n){return Object(j.a)(Object(j.a)({},n),{},Object(d.a)({},t,Object(j.a)(Object(j.a)({},n[t]),{},{coordinates:e})))}))}),n,m,(function(t){var e=t.top,n=t.left;E((function(t){return[].concat(Object(b.a)(t),[{id:(new Date).toJSON(),top:e,left:n}])}))})),Object(S.jsxs)(Tt,{$is3D:m,children:[Object(S.jsx)("h1",{children:"Bomberman - Work In Progress"}),Object(S.jsx)(Mt,{onClick:function(){r(tt(D.size.game)),s((function(t){return t+1}))},children:"New Collision Coordinates"}),Object(S.jsx)(Mt,{active:m,onClick:function(){O((function(t){return!t}))},children:"Toggle 3D (Experimental)"}),Object(S.jsx)(Mt,{active:!x,onClick:function(){h((function(t){return!t}))},disabled:!m,children:"Toggle Side View"}),Object(S.jsx)("br",{}),Object(S.jsx)(Mt,{active:!!T.P2,onClick:function(){M((function(t){var e=t.P2,n=Object(p.a)(t,["P2"]);return Object(j.a)(Object(j.a)({},n),!e&&Nt)}))},children:"Toggle Two-Player Mode"}),Object(S.jsx)("br",{}),Object(S.jsx)("br",{}),Object(S.jsxs)(St,{size:D.size.game,gameMap:n,is3D:m,isTopView:x,animationCounter:c,children:[Object.entries(T).map((function(t){var e=Object(f.a)(t,2),n=e[0],r=e[1],o=r.coordinates,a=r.ref;return Object(S.jsx)(zt,{id:n,name:"Bomber",coordinates:o,is3D:m,ref:a},n)})),w.map((function(t){var e=t.id,n=Object(p.a)(t,["id"]);return Object(S.jsx)(mt,Object(j.a)(Object(j.a)({id:e},n),{},{color:"red",explosionSize:D.size.explosion,firingDuration:D.duration.bomb.firing,explodingDuration:D.duration.bomb.exploding,onExplosion:C}),e)}))]})]})},Bt=function(){return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(u,{children:Object(S.jsx)(Rt,{})}),Object(S.jsx)($,{})]})},It=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,34)).then((function(e){var n=e.getCLS,r=e.getFID,o=e.getFCP,a=e.getLCP,i=e.getTTFB;n(t),r(t),o(t),a(t),i(t)}))};c.a.render(Object(S.jsx)(a.a.StrictMode,{children:Object(S.jsx)(Bt,{})}),document.getElementById("root")),It()}},[[33,1,2]]]);
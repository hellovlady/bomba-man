(this["webpackJsonpbomba-man"]=this["webpackJsonpbomba-man"]||[]).push([[13],{526:function(t,n,e){"use strict";e.r(n);var a=e(549),r=e(39),c=e(80),i=e(2),o=e(563),s=e(12),u=e(28),l=e(592),d=e(44),b=e(202),f=e(545),j=e(588),p=e(6),v=function(t){var n=t.gameId,e=Object(s.g)().push,a=Object(o.a)(n),v=a.pending,m=a.error,O=a.game,h=a.isReady,g=a.onPlayerJoin,x=a.onStartGame,y=Object(i.useRef)([]),w=Object(i.useState)(!1),A=Object(c.a)(w,2),k=A[0],S=A[1],E=Object(i.useState)(),I=Object(c.a)(E,2),P=I[0],N=I[1];Object(l.a)(n,P),Object(i.useEffect)((function(){if(h){var t=O.gamePlayers,n=Object.keys(t),a=n.length;if(O.started)e("".concat(u.a,"/unauthorized"),{message:"Game has already started!"});else if(a>3)e("".concat(u.a,"/unauthorized"),{message:"Game is full!"});else{var c=n.map((function(t){return Number(t.replace("P",""))})),i=[1,2,3,4].filter((function(t){return!c.includes(t)})),o="P".concat(Math.min.apply(Math,Object(r.a)(i)));g(o),N(o)}}}),[h]),Object(i.useEffect)((function(){h&&(null===O||void 0===O?void 0:O.started)&&e("".concat(u.a,"/online/").concat(n),{playerId:P})}),[h,null===O||void 0===O?void 0:O.started]),Object(i.useEffect)((function(){if(h){var t=O.gamePlayers;Object.keys(t).length-y.current.length>1&&S(!0)}}),[O,h]);var M=window.location,D=M.origin+M.pathname;return v||m||Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(f.a,{children:" Waiting Room "}),Object(p.jsx)(b.a,{}),Object(p.jsxs)(f.b,{children:["Room / Game Id:",Object(p.jsx)("br",{}),Object(p.jsx)("span",{style:{color:d.b.palette.color.info},children:n})]}),Object(p.jsx)(b.a,{}),Object(p.jsxs)(f.b,{children:["Join Link:",Object(p.jsx)("br",{}),Object(p.jsx)("span",{style:{color:d.b.palette.color.info},children:D})]}),Object(p.jsx)(j.a,{players:O.gamePlayers,onStartGame:x,canStart:k,currentOnlinePlayerId:P})]})};n.default=function(t){var n=t.match.params.id;return Object(p.jsx)(a.a,{style:{overflow:"hidden"},children:Object(p.jsx)(v,{gameId:n})})}},543:function(t,n,e){"use strict";e.d(n,"a",(function(){return o})),e.d(n,"b",(function(){return s}));var a,r,c=e(34),i=e(29),o=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(i.e)(a||(a=Object(c.a)(["\n\t0% { transform: scale(0, 0); }\n\t25% { transform: scale(0.9, 1.1); }\n\t50% { transform: scale(1.1, 0.9); }\n\t75% { transform: scale(0.95, 1.05); }\n\t100% { transform: scale(1, 1); "," }\n"])),t?"opacity: 1;":"")},s=function(t,n){return Object(i.e)(r||(r=Object(c.a)(["\n\t0%, 100% { \n\t\ttransform: translateY(0px); \n\t\tbox-shadow: 0 10px 10px #000000;\n\t}\n\t50% {\n\t\ttransform: translateY(-10px);\n\t\tbox-shadow: 0 20px ","px ",";\n\t}\n"])),Math.ceil(t/6)+10,n)}},544:function(t,n,e){"use strict";e.d(n,"c",(function(){return a})),e.d(n,"d",(function(){return r})),e.d(n,"a",(function(){return c})),e.d(n,"b",(function(){return i}));var a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(n){setTimeout(n,t)}))},r=function(t){return function(n){n.currentTarget.blur(),t(n)}},c=function(t){return null===t||void 0===t},i=function(t,n){return Object.keys(t)[Object.values(t).indexOf(n)]}},547:function(t,n,e){"use strict";var a,r,c=e(34),i=e(543),o=e(29),s=o.d.div(a||(a=Object(c.a)(["\n\tposition: absolute;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\topacity: 0;\n\tsvg {\n\t\theight: 100% !important;\n\t\twidth: 100% !important;\n\t\tmax-width: 70%;\n\t\tmax-height: 80%;\n\t}\n\t","\n"])),(function(t){var n=t.$size,e=t.$animationDelay,a=t.$top,s=t.$left;return Object(o.c)(r||(r=Object(c.a)(["\n\t\ttop: ","px;\n\t\tleft: ","px;\n\t\twidth: ","px;\n\t\theight: ","px;\n\t\tanimation: "," var(--block-animation-duration)\n\t\t\t"," ease-out forwards;\n\t"])),a,s,n,n,Object(i.a)(!0),e||"")}));n.a=s},548:function(t,n,e){"use strict";e.d(n,"g",(function(){return f})),e.d(n,"b",(function(){return j})),e.d(n,"f",(function(){return p})),e.d(n,"c",(function(){return v})),e.d(n,"i",(function(){return m})),e.d(n,"j",(function(){return O})),e.d(n,"h",(function(){return h})),e.d(n,"d",(function(){return g})),e.d(n,"a",(function(){return y})),e.d(n,"k",(function(){return A})),e.d(n,"e",(function(){return w}));var a,r=e(65),c=e(34),i=e(8),o=e(201),s=e(200),u=(e(551),e(554)),l=e(29),d=e(561),b=e(6),f=function(t){return Object(b.jsx)(s.a,Object(i.a)({icon:o.e},t))},j=function(t){return Object(b.jsx)(s.a,Object(i.a)({icon:o.c},t))},p=function(t){return Object(b.jsx)(s.a,Object(i.a)({icon:o.n},t))},v=function(t){return Object(b.jsx)(s.a,Object(i.a)({icon:o.d},t))},m=function(t){return Object(b.jsx)(s.a,Object(i.a)({icon:o.m},t))},O=function(t){return Object(b.jsx)(s.a,Object(i.a)({icon:o.o},t))},h=function(t){return Object(b.jsx)(s.a,Object(i.a)({icon:o.k},t))},g=function(t){return Object(b.jsx)(s.a,Object(i.a)({icon:o.f},t))},x=l.d.div(a||(a=Object(c.a)(["\n\tposition: relative;\n\tpointer-events: none;\n\tmin-width: 50px;\n\n\t","\n\n\t","\n"])),(function(t){var n=t.$showName,e=t.$color;return"\n\t\t\t.name {\n\t\t\t\t".concat(n?"":"display: none;","\n\t\t\t\t").concat(e?"background-color: ".concat(e," !important;"):"","\n\t\t\t\t\n\t\t\t}\n\t\t")}),(function(t){var n=t.$size;return"\n\t\t\twidth: ".concat(n,"px;\n\t\t\theight: ").concat(n,"px;\n\n\t\t\t> div {\n\t\t\t\t/* Gotta override as char is taking coordinates by default */\n\t\t\t\ttop: ").concat(n/2,"px !important;\n\t\t\t\tleft: calc(50% - ").concat(n,"px / 2) !important;\n\t\t\t}\n\t\t")})),y=function(t){var n=t.size,e=t.showName,a=void 0!==e&&e,c=t.color,o=Object(r.a)(t,["size","showName","color"]);return Object(b.jsx)(x,{$size:n,$showName:a,$color:c,children:Object(b.jsx)(u.a,Object(i.a)({coordinates:{top:0,left:0},id:"P1",name:"Bomba-man",isNPC:!0,size:n},o))})},w={fontSize:40,width:50},A=Object(d.a)(w)},551:function(t,n,e){"use strict";var a=e(8),r=e(200),c=e(201),i=e(44),o=e(2),s=e(547),u=e(6),l=function(t){return Object(u.jsx)(r.a,Object(a.a)({icon:c.b},t))};n.a=function(t){var n=t.id,e=t.size,a=t.explodingDuration,r=t.coordinates,c=r.top,d=r.left,b=t.onDeathAnimationComplete;return Object(o.useEffect)((function(){setTimeout((function(){null===b||void 0===b||b(n)}),1e3*a+1e3)}),[]),Object(u.jsx)(s.a,{$top:c,$left:d,$size:e,$animationDelay:"".concat(a,"s"),children:Object(u.jsx)(l,{color:i.b.palette.color.default})})}},552:function(t,n,e){},553:function(t,n,e){"use strict";var a,r=e(9),c=e(8),i=e(200),o=e(201),s=e(4),u=e(44),l=e(6),d=(a={},Object(r.a)(a,s.j.Life,{color:u.b.palette.color.success,icon:function(t){return Object(l.jsx)(i.a,Object(c.a)({icon:o.g},t))}}),Object(r.a)(a,s.j.BombCount,{color:u.b.palette.color.error,icon:function(t){return Object(l.jsx)(i.a,Object(c.a)({icon:o.a},t))}}),Object(r.a)(a,s.j.BombSize,{color:u.b.palette.color.warning,icon:function(t){return Object(l.jsx)(i.a,Object(c.a)({icon:o.j},t))}}),Object(r.a)(a,s.j.MovementSpeed,{color:u.b.palette.color.info,icon:function(t){return Object(l.jsx)(i.a,Object(c.a)({icon:o.l},t))}}),a);n.a=d},554:function(t,n,e){"use strict";var a,r,c=e(8),i=e(80),o=e(65),s=e(34),u=e(4),l=e(2),d=e(11),b=e(29),f=e(44),j=(e(552),e(6)),p=b.d.div(a||(a=Object(s.a)(["\n\t","\n"])),(function(t){var n=t.$size,e=t.$name,a=n/32,c=32*a,i=4*c,o=-1*a*32,u=n/4*-1,l=Math.min(-15,2.5*u),d=Math.min(30,Math.ceil(c/6)),j=Math.floor(c/10),p=Math.floor(20*e.length+c*a/10),v="\n\t\t\twidth: ".concat(c,"px;\n\t\t\theight: ").concat(c,"px;\n\t\t"),m="\n\t\t\twidth: ".concat(i,"px;\n\t\t\theight: ").concat(i,"px;\n\t\t");return Object(b.c)(r||(r=Object(s.a)(["\n\t\t\tposition: absolute;\n\t\t\tz-index: 9999;\n\t\t\t",";\n\t\t\ttransition-duration: 450ms;\n\n\t\t\t&#P1 .name {\n\t\t\t\tbackground-color: ",";\n\t\t\t}\n\t\t\t&#P2 .name {\n\t\t\t\tbackground-color: ",";\n\t\t\t}\n\t\t\t&#P3 .name {\n\t\t\t\tbackground-color: ",";\n\t\t\t}\n\t\t\t&#P4 .name {\n\t\t\t\tbackground-color: ",";\n\t\t\t}\n\n\t\t\t.character {\n\t\t\t\ttop: ","px;\n\t\t\t\ttransform: translate(","px);\n\n\t\t\t\t",";\n\t\t\t\toverflow: hidden;\n\t\t\t\tposition: relative;\n\t\t\t\t/* MOVEMENT TRANSITION */\n\t\t\t\ttransition-duration: 400ms;\n\n\t\t\t\t& .name {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tleft: 0;\n\t\t\t\t\tright: 0;\n\t\t\t\t\ttop: ","px;\n\t\t\t\t\tfont-size: ","px;\n\t\t\t\t\tmax-width: ","px;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\tborder: 1px dashed white;\n\t\t\t\t\tborder-radius: 9999px;\n\t\t\t\t\topacity: 1;\n\t\t\t\t\tmargin: auto;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t}\n\n\t\t\t\t& .shadow {\n\t\t\t\t\t",";\n\t\t\t\t\topacity: 0.75;\n\t\t\t\t}\n\n\t\t\t\t& .spritesheet {\n\t\t\t\t\t",";\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tleft: 0;\n\t\t\t\t}\n\n\t\t\t\t/* DIRECTION */\n\t\t\t\t&[data-facing='Right'] .spritesheet {\n\t\t\t\t\ttop: ","px;\n\t\t\t\t}\n\t\t\t\t&[data-facing='Up'] .spritesheet {\n\t\t\t\t\ttop: ","px;\n\t\t\t\t}\n\t\t\t\t&[data-facing='Left'] .spritesheet {\n\t\t\t\t\ttop: ","px;\n\t\t\t\t}\n\n\t\t\t\t&[data-walking='true'] {\n\t\t\t\t\t/* MOVEMENT ANIMATION */\n\t\t\t\t\t.spritesheet {\n\t\t\t\t\t\tanimation: walkAnimation 0.6s steps(4) infinite;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* SHADOW ANIMATION */\n\t\t\t\t\t.shadow {\n\t\t\t\t\t\tanimation: shadowAnimation 0.3s infinite;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/* HIGHLIGHT/DAMAGE ANIMATION */\n\t\t\t\t&[data-highlight='true'] .spritesheet {\n\t\t\t\t\tanimation: opacityAnimation 0.6s steps(4) infinite;\n\t\t\t\t}\n\t\t\t}\n\t\t"])),v,f.b.palette.color.warning,f.b.palette.color.info,f.b.palette.color.success,f.b.palette.color.error,l,u,v,j,d,p,v,m,1*o,2*o,3*o)})),v=function(t){var n=t.id,e=t.shouldBindEvent,a=t.keyboardConfig,r=t.onPlayerIsWalking,c=t.setDirection,i=t.setIsWalking,o=Object(l.useRef)((new Date).getTime());Object(l.useEffect)((function(){var t=function(t){if(e){var s=function(t){return a?Object(d.j)(t.code,a):null}(t);if(!s)return null===r||void 0===r||r(!1,n),void i(!1);o.current=(new Date).getTime(),i(!0),function(t){c(t)}(s)}},s=function(){e&&setTimeout((function(){var t=(new Date).getTime()-200;o.current>=t||(i(!1),null===r||void 0===r||r(!1,n))}),200)};return e&&(document.addEventListener("keydown",t),document.addEventListener("keyup",s)),function(){document.removeEventListener("keydown",t),document.removeEventListener("keyup",s)}}),[n,a,r,c,i,e])};n.a=function(t){var n=t.id,e=t.currentOnlinePlayerId,a=t.name,r=t.coordinates,s=r.top,d=r.left,b=t.style,f=t.keyboardConfig,m=t.highlight,O=t.size,h=t.onPlayerIsWalking,g=t.isWalking,x=void 0!==g&&g,y=t.direction,w=void 0===y?u.b.DOWN:y,A=t.isNPC,k=void 0!==A&&A,S=Object(o.a)(t,["id","currentOnlinePlayerId","name","coordinates","style","keyboardConfig","highlight","size","onPlayerIsWalking","isWalking","direction","isNPC"]),E=Object(l.useState)(w),I=Object(i.a)(E,2),P=I[0],N=I[1],M=Object(l.useState)(x),D=Object(i.a)(M,2),z=D[0],C=D[1],R=!k&&(!e||n===e);v({id:n,currentOnlinePlayerId:e,keyboardConfig:f,shouldBindEvent:R,onPlayerIsWalking:h,setDirection:N,setIsWalking:C});var T=x,G=w;return R&&(T=z,G=P),Object(j.jsx)(p,Object(c.a)(Object(c.a)({id:n,style:Object(c.a)(Object(c.a)({},b),{},{top:s,left:d}),className:"character-wrapper"},S),{},{$size:2*O,$name:a,children:Object(j.jsxs)("div",{className:"character","data-facing":G,"data-walking":T.toString(),"data-highlight":m,children:[Object(j.jsx)("div",{className:"name",children:a}),Object(j.jsx)("img",{className:"shadow pixel-art",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAWUlEQVRYR+3XsQkAIAxEUe2cRXADx3cDwVksJYX970T41sE7Xqrk9Pjlx/nJAgoooIACCiiggAIKKKDAXwKt9k0uqblGIXMxgwVo+A2mJSyABYKWroHyx58Hv0cUIWfm8TkAAAAASUVORK5CYII=",alt:"sprite skin"}),Object(j.jsx)("img",{className:"spritesheet pixel-art",src:"data:image/png;base64,UklGRuYBAABXRUJQVlA4TNkBAAAvf8AfEDegkI0kaB1Wc63vv4M4DQUByDA6SKk4ex2mqG0bqCCKrfwp7N5em/8A4P9XnTtjLpKQBLi1tbdt/gbqnTCAN/D5RCygH6yhQ4C1GfefQQG/fjA4FhH9Z9i2bZjkAbZdhsAn0N9Qh3Rps6Tr7enSZ9lZ1PV+6bPsLO4q4Fj1ORugiqJzAdemHQCwqMszM8vOoq4wzXNrso4rVOW6YeXnwAFDfg66i/MBl3QOm5+DDrAmX0BjNK5QAfYsOYVzJHCjcr1VjGTyTmZhrj2PUeUKvuZIeWc7iQ6TdK4URIcJSXIQyS75V0Q70f+F9g48tFcs4Nq6A4Vd69w7RGdRF4UBhmRnWZd1wlhZB3tQuabj0JFQXb4+n2pMKlfoeHgRzhW9cK7ZcyKVa2Kehcn3SWRURueqkpdcSWIEE0jv+ne4d0DeKxZw7a5jV/aO4IDByDlGSZe/VvYc1dUpu+RzNrlqa+ZxyrtOPESNyzs+5s9FtbRGUT2mUeUKdapHZe4wkzZ3oH+muYNvAMjO8q5tO7CMS7MHeJRxrSt3gHsgVzBlXYOUG3QYOtK4yLpTq8oVqMX4dFDlEh+OrVHlConjTLpcgrklARpJcDYpKl0xNco1wgRTwLUPTQA=",alt:"sprite skin"})]})}))}},556:function(t,n,e){"use strict";var a=e(7),r=e.n(a),c=e(9),i=e(16),o=e(204),s=e(557),u=e(101),l=e(6);n.a=function(t){var n=Object(u.useFirebase)();Object(u.useFirebaseConnect)([t]);var e=function(n){return"".concat(t).concat(n||"")};return{create:function(){var t=Object(i.a)(r.a.mark((function t(){var a,i,o,s,u,l,d,b,f,j=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a=j.length,i=new Array(a),o=0;o<a;o++)i[o]=j[o];if(s=i[0],u=i[1],l=i[2],d=i[3],t.prev=2,!d){t.next=9;break}return t.next=6,n.uniqueSet(e(u),Object(c.a)({},d,s));case 6:f=t.sent,t.next=12;break;case 9:return t.next=11,n.push(e(u),s);case 11:f=t.sent;case 12:return null===l||void 0===l||null===(b=l.onSuccess)||void 0===b||b.call(l,f),t.abrupt("return",f);case 16:return t.prev=16,t.t0=t.catch(2),(null===l||void 0===l?void 0:l.onError)&&l.onError(t.t0),t.abrupt("return",t.t0);case 20:case"end":return t.stop()}}),t,null,[[2,16]])})));return function(){return t.apply(this,arguments)}}(),read:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];var a=n[0],r=!Object(u.isLoaded)(a)&&Object(l.jsx)(o.default,{}),c=Object(u.isEmpty)(a)&&Object(l.jsx)(s.a,{});return{state:a,pending:r,error:c}},update:function(){var t=Object(i.a)(r.a.mark((function t(){var a,c,i,o,s,u,l,d,b=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a=b.length,c=new Array(a),i=0;i<a;i++)c[i]=b[i];return o=c[0],s=c[1],u=c[2],t.prev=2,t.next=5,n.update(e(s),o);case 5:return d=t.sent,null===u||void 0===u||null===(l=u.onSuccess)||void 0===l||l.call(u,d),t.abrupt("return",d);case 10:return t.prev=10,t.t0=t.catch(2),(null===u||void 0===u?void 0:u.onError)&&u.onError(t.t0),t.abrupt("return",t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),push:function(){var t=Object(i.a)(r.a.mark((function t(){var a,c,i,o,s,u,l,d,b=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a=b.length,c=new Array(a),i=0;i<a;i++)c[i]=b[i];return o=c[0],s=c[1],u=c[2],t.prev=2,t.next=5,n.push(e(s),o);case 5:return d=t.sent,null===u||void 0===u||null===(l=u.onSuccess)||void 0===l||l.call(u,d),t.abrupt("return",d);case 10:return t.prev=10,t.t0=t.catch(2),(null===u||void 0===u?void 0:u.onError)&&u.onError(t.t0),t.abrupt("return",t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),remove:function(){var t=Object(i.a)(r.a.mark((function t(){var a,c,i,o,s,u,l,d=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a=d.length,c=new Array(a),i=0;i<a;i++)c[i]=d[i];return o=c[0],s=c[1],t.prev=2,t.next=5,n.remove(e(o));case 5:return l=t.sent,null===s||void 0===s||null===(u=s.onSuccess)||void 0===u||u.call(s,l),t.abrupt("return",l);case 10:return t.prev=10,t.t0=t.catch(2),(null===s||void 0===s?void 0:s.onError)&&s.onError(t.t0),t.abrupt("return",t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}()}}},557:function(t,n,e){"use strict";e.d(n,"a",(function(){return b}));var a,r=e(34),c=e(549),i=e(545),o=e(44),s=e(29),u=e(202),l=e(6),d=Object(s.d)(i.a)(a||(a=Object(r.a)(["\n\tcolor: ",";\n"])),o.b.palette.color.error),b=function(t){var n=t.children,e=t.message,a=void 0===e?"Either the game is not found or you don't have access to it.":e;return Object(l.jsxs)(c.a,{fullHeight:!0,children:[Object(l.jsx)(u.a,{spacing:"5"}),Object(l.jsx)(d,{children:a}),Object(l.jsx)(u.a,{spacing:"10"}),n]})}},561:function(t,n,e){"use strict";e.d(n,"a",(function(){return b})),e.d(n,"b",(function(){return f}));var a=e(39),r=e(8),c=e(4),i=e(553),o=e(544),s=e(555),u=e(562),l=e(548),d=e(6),b=function(t){return Object.values(c.j).reduce((function(n,e){var a=i.a[e],r=a.icon,c=a.color;return n[e]={icon:Object(d.jsx)(r,{style:t}),color:c},n}),{})},f=function(t,n,e){return Object.values(c.j).map((function(i){var d="".concat(Object(o.b)(c.j,i));return Object(r.a)(Object(r.a)({type:s.a.Rating,label:"".concat(d," (number)"),name:"".concat(t,".").concat(i),max:n},l.k[i]),e&&i===c.j.MovementSpeed&&{label:"".concat(d," (action interval, milliseconds)"),type:s.a.Slider,step:null,min:Math.min.apply(Math,Object(a.a)(e)),max:Math.max.apply(Math,Object(a.a)(e)),marks:Object(u.a)(e)})}))}},562:function(t,n,e){"use strict";e.d(n,"a",(function(){return r}));var a=e(8);function r(t,n){if(Array.isArray(t))return t.map((function(t){return{value:t,label:t}}));var e=n-t;return Array(e+1).fill(0).map((function(n,r){var c=t+r;return Object(a.a)({value:c},(0===r||r===e)&&{label:c})}))}},563:function(t,n,e){"use strict";var a=e(9),r=e(101),c=e(104),i=e(48),o=function(t){return t.firebase},s=e(11),u=e(204),l=e(557),d=e(22),b=e(60),f=e(4),j=e(556),p=e(565),v=e(6),m=Object(d.a)((function(){return Promise.all([e.e(4),e.e(18)]).then(e.bind(null,512))})),O=Object(s.d)();n.a=function(t){var n,e,d,h,g,x,y,w,A="online/".concat(t);Object(r.useFirebaseConnect)(A);var k=Object(j.a)(A),S=k.update,E=k.remove,I=Object(p.a)().removeOnlineGame,P=Object(c.c)(function(t){return Object(i.a)(o,(function(n){var e=n.data.online;return null===e||void 0===e?void 0:e[t]}))}(t)),N=!Object(r.isLoaded)(P)&&Object(v.jsx)(u.default,{}),M=Object(r.isEmpty)(P)&&Object(v.jsx)(l.a,{children:Object(v.jsx)(m,{noWrapper:!0})}),D=P;return{game:{gameId:t,gameState:{players:(null===D||void 0===D||null===(n=D.gameState)||void 0===n?void 0:n.players)||O.players,gameMap:(null===D||void 0===D||null===(e=D.gameState)||void 0===e?void 0:e.gameMap)||O.gameMap,bombs:(null===D||void 0===D||null===(d=D.gameState)||void 0===d?void 0:d.bombs)||O.bombs,powerUps:(null===D||void 0===D||null===(h=D.gameState)||void 0===h?void 0:h.powerUps)||O.powerUps,is3D:(null===D||void 0===D||null===(g=D.gameState)||void 0===g?void 0:g.is3D)||O.is3D,isSideView:(null===D||void 0===D||null===(x=D.gameState)||void 0===x?void 0:x.isSideView)||O.isSideView,animationCounter:(null===D||void 0===D||null===(y=D.gameState)||void 0===y?void 0:y.animationCounter)||O.animationCounter,config:(null===D||void 0===D||null===(w=D.gameState)||void 0===w?void 0:w.config)||O.config},gamePlayers:(null===D||void 0===D?void 0:D.gamePlayers)||{},started:(null===D||void 0===D?void 0:D.started)||!1},pending:N,error:M,isReady:!N&&!M,onPlayerJoin:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];S(Object(a.a)({},t,f.i.Alive),"/gamePlayers");var e=Object(s.e)(t,D.gameState.config,!n&&b.a.keyboardConfig||null);S(e,"/gameState/players/".concat(t))},onPlayerExit:function(n){if(E("/gamePlayers/".concat(n)),E("/gameState/players/".concat(n)),D.gamePlayers){var e=Object.keys(D.gamePlayers).length;e<=1?I(t):e<=2&&S({started:!1})}},onStartGame:function(){S({started:!0})},onPlayerDeath:function(t){S(Object(a.a)({},t,f.i.Dead),"/gamePlayers")}}}},565:function(t,n,e){"use strict";var a=e(7),r=e.n(a),c=e(16),i=e(101),o=e(581),s={dictionaries:[o.b,o.a],separator:"-"},u=function(){return Object(o.c)(s)},l=e(556);n.a=function(){var t="online";Object(i.useFirebaseConnect)(t);var n=Object(l.a)(t),e=n.create,a=n.update,o=n.remove;return{createOnlineGame:function(){var t=Object(c.a)(r.a.mark((function t(n){var c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=u(),t.next=3,e({gameState:n,started:!1},void 0,void 0,c);case 3:return t.next=5,a({gameId:c},"/".concat(c));case 5:return t.abrupt("return",c);case 6:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),removeOnlineGame:function(){var t=Object(c.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o("/".concat(n));case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()}}},588:function(t,n,e){"use strict";var a,r,c=e(8),i=e(34),o=e(548),s=e(656),u=e(558),l=e(202),d=e(560),b=e(4),f=e(29),j=e(543),p=e(44),v=e(6),m=Object(f.d)(o.d)(a||(a=Object(i.a)(["\n\t","\n"])),(function(t){var n=t.$size,e=t.$playerId,a=p.b.palette.color,c=[a.warning,a.info,a.success,a.error][Number(e.replace("P",""))-1];return Object(f.c)(r||(r=Object(i.a)(["\n\t\t\tfont-size: ","px;\n\t\t\tanimation: "," 3s infinite;\n\t\t\tborder-radius: 50%;\n\t\t"])),n,Object(j.b)(n,c))}));n.a=function(t){var n=t.players,e=t.currentOnlinePlayerId,a=t.onStartGame,r=t.isGameEnd,i=void 0!==r&&r,f=t.canStart,j=void 0!==f&&f;return Object(v.jsxs)(u.a,{container:!0,children:[a&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(l.a,{spacing:"5"}),Object(v.jsx)(u.a,{container:!0,children:Object(v.jsx)(s.a,{container:!0,justify:"center",item:!0,xs:12,sm:4,children:Object(v.jsx)(d.a,{text:"Start",fullWidth:!0,bg:"primary",variant:"contained",disabled:!j,onClick:a})})})]}),Object(v.jsx)(l.a,{spacing:"15"}),Object(v.jsx)(s.a,{container:!0,justify:"space-between",item:!0,xs:12,sm:8,children:Object.keys(n).sort().map((function(t){var a=e===t,r=i&&n[t]===b.i.Dead,s=50,u=!1;(!a||i&&r)&&(a||!i||r)||(s=80,u=!0);var l={key:t,size:s,name:t,id:t,showName:!0,isWalking:u};return r?Object(v.jsx)(m,{id:t,$size:s,$playerId:t},t):Object(v.jsx)(o.a,Object(c.a)({},l))}))}),Object(v.jsx)(l.a,{spacing:"5"})]})}},592:function(t,n,e){"use strict";var a=e(2),r=e(12),c=e(28),i=e(563),o=function(){return null},s=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;Object(a.useEffect)((function(){return window.addEventListener("beforeunload",t),window.addEventListener("unload",n),function(){window.removeEventListener("beforeunload",t),window.removeEventListener("unload",n)}}))};n.a=function(t,n){var e=Object(i.a)(t).onPlayerExit,o=Object(r.g)().listen;s((function(){n&&e(n)})),Object(a.useEffect)((function(){return o((function(a){var r=a.pathname;n&&r!=="".concat(c.a,"/online/").concat(t)&&r!=="".concat(c.a,"/game-end")&&e(n)}))}),[t,o,e,n])}}}]);
//# sourceMappingURL=13.e818158d.chunk.js.map
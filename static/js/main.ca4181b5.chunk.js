(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{26:function(t,e,n){},31:function(t,e,n){},32:function(t,e,n){"use strict";n.r(e);var r,o=n(0),i=n.n(o),a=n(17),c=n.n(a),s=(n(26),n(2)),l=n(3),u=l.c.div(r||(r=Object(s.a)(["\n\twidth: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n"]))),d=n(4),b=n(6),f=n(9),p=n(5),m={size:{game:15,character:32,tile:32,movement:32,collisionMin:1,collisionMax:1,bomb:16,explosion:1},duration:{movement:300,bomb:{firing:2,exploding:2}}};m.size.collisionMin=Math.floor(m.size.game*m.size.game/3),m.size.collisionMax=Math.floor(m.size.game*m.size.game/2);var j,O,g,x,v,y,h,z,w,k,E=m,$=Object(l.a)(j||(j=Object(s.a)(["\n\t:root {\n\t\t/* Colors */\n\t\t--primary-background: #13141b;\n\t\t--secondary-background: #1a1d28;\n\n\t\t--primary-color: #ec7ebd;\n\t\t--secondary-color: #763ee6;\n\n\t\t--error-color: rgb(255, 122, 105);\n\t\t--warning-color: rgb(241, 168, 23);\n\t\t--success-color: rgb(49, 162, 76);\n\t\t--info-color: rgb(134, 218, 255);\n\n\t\t/* Utilities */\n\t\t--border-radius: 4px;\n\t\t--padding: 10px;\n\n\t\t/* Game */\n\t\t--character-size: ","px;\n\t\t--tile-size: ",";\n\t\t--game-size: ",";\n\t}\n"])),E.size.character,E.size.tile,E.size.game),S={palette:{background:{primary:"var(--primary-background)",secondary:"var(--secondary-background)"},color:{primary:"var(--primary-color)",secondary:"var(--secondary-color)",error:"var(--error-color)",warning:"var(--warning-color)",success:"var(--success-color)",info:"var(--info-color)"}},shape:{borderRadius:"var(--border-radius)",padding:"var(--padding)"},game:{character:{size:"var(--character-size)"}}},D=n(1),T=l.c.button(O||(O=Object(s.a)(["\n\tbackground-color: ",";\n\t/* IGNORE SIZE FOR NOW */\n\tborder-radius: ",";\n\tpadding: ",";\n"])),(function(t){var e=t.$variant;return S.palette.color[e]}),S.shape.borderRadius,S.shape.padding),N=function(t){var e=t.variant,n=t.size,r=t.children,o=Object(b.a)(t,["variant","size","children"]);return Object(D.jsx)(T,Object(d.a)(Object(d.a)({$variant:e,$size:n},o),{},{children:r}))},P=Object(o.memo)(N),C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(e){setTimeout(e,t)}))},I=function(t){return function(e){e.currentTarget.blur(),t(e)}},A=n(7),B=n(15);function F(t,e){var n=e||t,r=void 0!==e&&t||0;return Math.floor(Math.random()*(n-r))+r}!function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT"}(g||(g={})),function(t){t.X="X",t.Y="Y"}(x||(x={})),function(t){t.Firing="Firing",t.Exploding="Exploding",t.Exploded="Exploded"}(v||(v={})),function(t){t.Player1="P1",t.Player2="P2",t.Npc1="P3",t.Npc2="P4",t.Npc3="P5"}(y||(y={})),(z=h||(h={})).Empty="T1",z.Breaking="T2",z.NonBreaking="T3",function(t){t.BombSize="PU1",t.Speed="PU2",t.Invincibility="PU3"}(w||(w={}));var M,R,L,X,U,Y,W,q,G,J,V,H,_,Z,K,Q=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[[0,0],[0,1],[1,0]],n=[].concat(Object(f.a)(Object.keys(h)),Object(f.a)(Array(3).fill("Empty"))),r=Array(t).fill(0).map((function(){return Array(t).fill(0).map((function(){return h[n[F(n.length)]]}))}));return e.forEach((function(t){var e=Object(p.a)(t,2),n=e[0],o=e[1];r[n][o]!==h.Empty&&(r[n][o]=h.Empty)})),r},tt=function(t){var e=t.top,n=t.left;return{ySquare:e/E.size.movement,xSquare:n/E.size.movement}},et=E.size.movement*(E.size.game-1),nt=function(t,e,n){var r,o=tt({top:t,left:e}),i=o.xSquare,a=null===(r=n[o.ySquare])||void 0===r?void 0:r[i];return!(a===h.Breaking||a===h.NonBreaking)&&!(e<0||e>et)&&!(t<0||t>et)},rt=(k={},Object(A.a)(k,x.X,{REPLACE:/rotateX\(-?\d+deg\)/g,FIND:Object(B.a)(/rotateX\((\x2D?[0-9]+)deg\)/,{degree:1})}),Object(A.a)(k,x.Y,{REPLACE:/rotateY\(-?\d+deg\)/g,FIND:Object(B.a)(/rotateY\((\x2D?[0-9]+)deg\)/,{degree:1})}),k),ot=function(t,e,n){e&&(t.current.style.transition="".concat(E.duration.movement,"ms"),t.current.style.transform=function(t,e){var n=90,r=x.Y;return e!==g.DOWN&&e!==g.LEFT||(n*=-1),e!==g.UP&&e!==g.DOWN||(r=x.X),t.replace(rt[r].REPLACE,"rotate".concat(r,"(").concat(n,"deg)"))}(t.current.style.transform,n))},it="translateZ(calc(var(--tile-size) / 2 * 1px)) rotateX(0deg) rotateY(0deg)",at=n(14),ct=n.n(at),st=n(21),lt=Object(l.d)(M||(M=Object(s.a)(["\n\t0% { transform:rotate(0deg); }\n\t/* 40% -> 100% */\n\t","\n"])),Array(7).fill(0).map((function(t,e){return"".concat(10*(e+4),"% {transform: rotate(").concat((e+1)*((e<4?90:e<6&&270)||360),"deg);}")})).join("\n")),ut=l.c.div(R||(R=Object(s.a)(["\n\tanimation: "," linear forwards;\n"])),lt),dt=l.c.div(X||(X=Object(s.a)(["\n\t","\n"])),(function(t){var e=t.$explosionAxis,n=t.$explosionSize;return Object(l.b)(U||(U=Object(s.a)(["\n\t\tanimation: ","\n\t\t\t/** @see https://easings.net/#easeInOutBack */\n\t\t\tcubic-bezier(0.68, -0.6, 0.32, 1.6) forwards;\n\t"])),function(t){var e=t.$explosionAxis,n=2*(2*(t.$explosionSize+1)-1),r=2,o=2;return e===x.X?r=n:o=n,r-=.5,o-=.5,Object(l.d)(L||(L=Object(s.a)(["\n\t  \t0% {\n\t\t\ttransform: scale(1);\n\t\t\topacity: 1;\n\t\t}\n\t\t65% {\n\t\t\ttransform: scale(",", ",");\n\t\t}\n\t\t100% {\n\t\t\topacity: 0;\n\t\t}\n\t"])),r,o)}({$explosionAxis:e,$explosionSize:n}))})),bt=function(t){var e=t.color,n=t.firingDuration,r=t.explodingDuration,i=t.explosionSize,a=t.id,c=t.top,s=t.left,l=t.onExplosion,u=Object(o.useState)(v.Firing),b=Object(p.a)(u,2),f=b[0],m=b[1];Object(o.useEffect)((function(){(function(){var t=Object(st.a)(ct.a.mark((function t(){return ct.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C(1e3*n);case 2:return m(v.Exploding),t.next=5,C(r/2*1e3);case 5:l(a,{top:c,left:s});case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[r,i,n,l,c,s,a]);var j=E.size.bomb,O=j/2,g=null,y={position:"absolute",backgroundColor:e,width:j,height:j,top:c+O,left:s+O,animationDuration:"".concat(r,"s")};return f===v.Exploding&&(g=Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(dt,{style:y,$explosionAxis:x.X,$explosionSize:i}),Object(D.jsx)(dt,{style:y,$explosionAxis:x.Y,$explosionSize:i})]})),f===v.Firing&&(g=Object(D.jsx)(ut,{style:Object(d.a)(Object(d.a)({},y),{},{animationDuration:"".concat(n,"s")})})),g},ft=(n(31),Object(o.forwardRef)((function(t,e){var n=t.size,r=t.top,o=t.left,i=t.animate,a=t.color,c=t.collisionIndex,s=t.style,l=t.className,u=Object(b.a)(t,["size","top","left","animate","color","collisionIndex","style","className"]);return Object(D.jsx)("div",Object(d.a)(Object(d.a)({className:"".concat(l&&"".concat(l," ")||"","cuboid bouncy-block-").concat((i?c:"no-animation")||0),style:Object(d.a)(Object(d.a)({},s),{},{top:r,left:o,width:n,height:n}),ref:e},u),{},{children:Array(6).fill(0).map((function(t,e){return Object(D.jsx)("div",{className:"cuboid__side",style:Object(d.a)(Object(d.a)({},a&&{backgroundColor:a}),{},{width:n,height:n})},e)}))}))}))),pt=l.c.span(Y||(Y=Object(s.a)(["\n\tcolor: ",";\n"])),S.palette.color.warning),mt=l.c.div(W||(W=Object(s.a)(["\n\tcolor: #000;\n"]))),jt=l.c.span(q||(q=Object(s.a)([""]))),Ot=l.c.span(G||(G=Object(s.a)([""]))),gt=l.c.div(J||(J=Object(s.a)(["\n\twidth: ",";\n\theight: ",";\n\tbackground-color: ",";\n\tposition: absolute;\n\t/* top: 0;\n\tleft: 0; */\n\tborder-radius: 50%;\n\tdisplay: flex;\n\tjustify-content: center;\n\n\ttransition: top ","ms,\n\t\tleft ","ms;\n\n\t& > "," {\n\t\tz-index: 9999;\n\t\tposition: absolute;\n\t\ttop: -20px;\n\t\tfont-size: 10px;\n\t}\n\n\t& > "," {\n\t\tposition: absolute;\n\t\ttop: 7px;\n\t\tfont-size: 8px;\n\n\t\t/* & > "," {\n\t\t}\n\t\t& > "," {\n\t\t} */\n\t}\n"])),S.game.character.size,S.game.character.size,S.palette.color.success,E.duration.movement,E.duration.movement,pt,mt,jt,Ot),xt=function(t){var e=t.name,n=t.coordinates,r=t.onMove,i=t.gameMap,a=t.is3D,c=t.addBomb,s=Object(o.useRef)(null),l=Object(o.useRef)((new Date).getTime()),u=Object(o.useRef)({}),d=n.top,b=n.left;return Object(o.useEffect)((function(){var t=function(){if(s.current&&u.current){if(a&&function(t){t.current.style.transition="0ms",t.current.style.transform=it}(s),u.current.ArrowUp){var t=d-E.size.movement,e=b;nt(t,e,i)&&setTimeout((function(){r({top:t,left:e}),ot(s,a,g.UP)}),0)}if(u.current.ArrowRight){var n=d,o=b+E.size.movement;nt(n,o,i)&&setTimeout((function(){r({top:n,left:o}),ot(s,a,g.RIGHT)}),0)}if(u.current.ArrowDown){var c=d+E.size.movement,l=b;nt(c,l,i)&&setTimeout((function(){r({top:c,left:l}),ot(s,a,g.DOWN)}),0)}if(u.current.ArrowLeft){var f=d,p=b-E.size.movement;nt(f,p,i)&&setTimeout((function(){r({top:f,left:p}),ot(s,a,g.LEFT)}),0)}}},e=function(e){if(u.current&&l.current&&(u.current[e.code]="keydown"===e.type,"keydown"===e.type)){var n=(new Date).getTime();if(n-l.current>E.duration.movement&&(l.current=n,t()),"Space"===e.code){if(!s.current)return;c({top:d,left:b})}}};return window.addEventListener("keyup",e),window.addEventListener("keydown",e),function(){window.removeEventListener("keyup",e),window.removeEventListener("keydown",e)}}),[c,i,a,b,d,r]),a&&Object(D.jsx)(ft,{ref:s,size:32,left:b,top:d,animate:!0,color:S.palette.color.success,style:{transform:it}})||Object(D.jsxs)(gt,{ref:s,$name:e,style:{top:d,left:b},children:[Object(D.jsx)(pt,{children:e}),Object(D.jsxs)(mt,{children:[Object(D.jsx)(jt,{children:"o-o"}),Object(D.jsx)("br",{}),Object(D.jsx)(Ot,{children:"==="})]})]})},vt=function(t){var e=Object(o.useRef)();return Object(o.useEffect)((function(){e.current=t}),[t]),e.current},yt=Object(l.d)(V||(V=Object(s.a)(["\n\t0% { transform: scale(0, 0); }\n\t25% { transform: scale(0.9, 1.1); }\n\t50% { transform: scale(1.1, 0.9); }\n\t75% { transform: scale(0.95, 1.05); }\n\t100% { transform: scale(1, 1); }\n"]))),ht=l.c.div.attrs((function(t){var e=t.$size,n=t.$top,r=t.$left,o=t.$color;return{style:Object(d.a)({width:e,height:e,top:n,left:r},o&&{backgroundColor:o})}}))(H||(H=Object(s.a)(["\n\tposition: absolute;\n\t/* background-color: ","; */\n\tborder: 1px solid ",";\n\t","\n"])),S.palette.background.secondary,S.palette.background.primary,(function(t){var e=t.$color,n=t.$collisionIndex;return t.$animate&&e&&Object(l.b)(_||(_=Object(s.a)(["\n\t\t\t\t\ttransform: scale(0, 0);\n\t\t\t\t\tz-index: 9999;\n\t\t\t\t\tanimation: "," 0.5s ease\n\t\t\t\t\t\t","s forwards;\n\t\t\t\t"])),yt,.1*n)||""})),zt=function(t){var e=t.size,n=t.top,r=t.left,o=t.animate,i=t.color,a=t.collisionIndex;return Object(D.jsx)(ht,{$size:e,$top:n,$left:r,$animate:o,$color:i,$collisionIndex:a})},wt=Object(o.memo)(zt),kt=l.c.div(Z||(Z=Object(s.a)(["\n\twidth: ",";\n\theight: ",";\n\tborder-radius: ",";\n\tbackground-color: ",";\n\tposition: relative;\n\tbox-shadow: 0 10px 20px rgba(0, 0, 0, 0.5), 0 6px 6px rgba(0, 0, 0, 0.6);\n\ttransition: transform 0.5s;\n\n\t","\n"])),(function(t){var e=t.$size;return"calc(".concat(S.game.character.size," * ").concat(e,")")}),(function(t){var e=t.$size;return"calc(".concat(S.game.character.size," * ").concat(e,")")}),S.shape.borderRadius,S.palette.background.secondary,(function(t){var e=t.$is3D,n=t.$isTopView,r="";return e&&(r+="transform-style: preserve-3d;",n||(r+="\ntransform: rotateX(-24deg) rotateY(-24deg) rotateX(90deg);")),r})),Et=function(t){var e=t.size,n=t.gameMap,r=t.is3D,o=t.isTopView,i=t.animationCounter,a=t.children,c=i!==vt(i),s=1;return Object(D.jsxs)(kt,{$size:e,$is3D:r,$isTopView:o,children:[n.map((function(t,e){return t.map((function(t,n){var o=t===h.NonBreaking||t===h.Breaking,i=Object(d.a)({key:"".concat(e,"_").concat(n),size:E.size.tile,top:e*E.size.tile,left:n*E.size.tile,animate:c},o&&{color:S.palette.color[t===h.NonBreaking?"secondary":"primary"],collisionIndex:s++});return r&&(o&&Object(D.jsx)(ft,Object(d.a)({},i))||Object(D.jsx)(wt,Object(d.a)({},i)))||Object(D.jsx)(wt,Object(d.a)({},i))}))})),a]})},$t=l.c.div(K||(K=Object(s.a)(["\n\ttext-align: center;\n\t","\n"])),(function(t){return t.$is3D?"perspective: 1000":""})),St=function(){var t=Object(o.useState)((function(){return Q(E.size.game)})),e=Object(p.a)(t,2),n=e[0],r=e[1],i=Object(o.useState)(0),a=Object(p.a)(i,2),c=a[0],s=a[1],l=Object(o.useState)(!1),u=Object(p.a)(l,2),m=u[0],j=u[1],O=Object(o.useState)(!0),g=Object(p.a)(O,2),x=g[0],v=g[1],y=Object(o.useState)([]),z=Object(p.a)(y,2),w=z[0],k=z[1],$=Object(o.useState)({top:0,left:0}),S=Object(p.a)($,2),T=S[0],N=S[1],C=Object(o.useCallback)((function(t,e){k((function(e){return e.filter((function(e){return e.id!==t}))})),r(function(t,e,n){for(var r=JSON.parse(JSON.stringify(t)),o=tt(e),i=o.xSquare,a=o.ySquare,c=Math.max(0,a-n);c<=a+n;c++)r[c][i]===h.Breaking&&(r[c][i]=h.Empty);for(var s=Math.max(0,i-n);s<=i+n;s++)r[a][s]===h.Breaking&&(r[a][s]=h.Empty);return r}(n,e,E.size.explosion))}),[n]);return Object(D.jsxs)($t,{$is3D:m,children:[Object(D.jsx)("h1",{children:"Bomberman - Work In Progress"}),Object(D.jsx)(P,{variant:"secondary",size:"medium",onClick:I((function(){r(Q(E.size.game)),s((function(t){return t+1}))})),children:"New Collision Coordinates"}),Object(D.jsx)(P,{variant:m?"primary":"secondary",size:"medium",onClick:I((function(){j((function(t){return!t}))})),children:"Toggle 3D (Experimental)"}),Object(D.jsx)(P,{variant:x?"secondary":"primary",size:"medium",onClick:I((function(){v((function(t){return!t}))})),disabled:!m,children:"Toggle Side View"}),Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),Object(D.jsxs)(Et,{size:E.size.game,gameMap:n,is3D:m,isTopView:x,animationCounter:c,children:[Object(D.jsx)(xt,{name:"Bomber",coordinates:T,onMove:function(t){N(t)},gameMap:n,is3D:m,addBomb:function(t){var e=t.top,n=t.left;k((function(t){return[].concat(Object(f.a)(t),[{id:(new Date).toJSON(),top:e,left:n}])}))}}),w.map((function(t){var e=t.id,n=Object(b.a)(t,["id"]);return Object(D.jsx)(bt,Object(d.a)(Object(d.a)({id:e},n),{},{color:"red",explosionSize:E.size.explosion,firingDuration:E.duration.bomb.firing,explodingDuration:E.duration.bomb.exploding,onExplosion:C}),e)}))]})]})},Dt=function(){return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(u,{children:Object(D.jsx)(St,{})}),Object(D.jsx)($,{})]})},Tt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,33)).then((function(e){var n=e.getCLS,r=e.getFID,o=e.getFCP,i=e.getLCP,a=e.getTTFB;n(t),r(t),o(t),i(t),a(t)}))};c.a.render(Object(D.jsx)(i.a.StrictMode,{children:Object(D.jsx)(Dt,{})}),document.getElementById("root")),Tt()}},[[32,1,2]]]);
(this["webpackJsonpbomba-man"]=this["webpackJsonpbomba-man"]||[]).push([[11],{524:function(t,e,n){"use strict";n.r(e);var r=n(64),a=n(8),o=n(592),i=n(4),c=n(2),u=n(11),s=n(27),l=function(t,e,n,r){var a=Object(u.g)().push,o=i.f.Lose;t&&e&&(o=t[e]===i.i.Alive?i.f.Win:i.f.Lose),Object(c.useEffect)((function(){Object.values(t).filter((function(t){return t===i.i.Alive})).length>1||a("".concat(s.a,"/game-end/").concat(n),{endGame:{players:t,currentOnlinePlayerId:e,gameEndCondition:o},gameConfig:r,playerId:e})}),[e,r,o,n,t,a])},d=n(574),p=n(12),f=n(280),b=n(9),v=n(7),m=n.n(v),j=n(14),g=n(48),O=n(66),h=n(101),y=n(279),x=n(547),w=function(t){Object(O.a)(n,t);var e=Object(h.a)(n);function n(t,r){var o;return Object(g.a)(this,n),(o=e.call(this)).state=t,o.updaters=r,o.getPlayerState=function(t){return o.state.players[t].state},o.updateGameState=function(){var t=Object(j.a)(m.a.mark((function t(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.update(e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.updatePlayers=function(){var t=Object(j.a)(m.a.mark((function t(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.update(Object(a.a)({},e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.addPlayer=function(){var t=Object(j.a)(m.a.mark((function t(e,n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.create(e,"/players/".concat(n));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),o.updatePlayer=function(){var t=Object(j.a)(m.a.mark((function t(e,n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.update(Object(b.a)({},n,e),"/players");case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),o.removePlayer=function(){var t=Object(j.a)(m.a.mark((function t(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.remove("/players/".concat(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.updatePlayerId=function(){var t=Object(j.a)(m.a.mark((function t(e,n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.update({id:e},"/players/".concat(n));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),o.updatePlayerDirection=function(t){var e=t.direction,n=t.id;o.updaters.update({direction:e},"/players/".concat(n))},o.updatePlayerIsWalking=function(t){var e=t.isWalking,n=t.id;o.updaters.update({isWalking:e},"/players/".concat(n))},o.updatePlayerCoordinates=function(){var t=Object(j.a)(m.a.mark((function t(e,n,r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.update({coordinates:e,direction:r,isWalking:!0},"/players/".concat(n));case 1:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),o.updatePlayerState=function(){var t=Object(j.a)(m.a.mark((function t(e,n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.update(Object(a.a)({},e),"/players/".concat(n));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),o.incrementPlayerDeathCount=function(){var t=Object(j.a)(m.a.mark((function t(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.update({deathCount:o.getPlayerState(e).deathCount+1},"/players/".concat(e,"/state"));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.incrementPlayerPowerUp=function(){var t=Object(j.a)(m.a.mark((function t(e,n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.update(Object(b.a)({},e,o.getPlayerState(n).powerUps[e]+1),"/players/".concat(n,"/state/powerUps"));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),o.updateGameMap=function(){var t=Object(j.a)(m.a.mark((function t(e){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.gameMap,r=e.animate,o.updaters.update({gameMap:n}),r&&o.incrementAnimationCounter();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.updateGameMapSquare=function(){var t=Object(j.a)(m.a.mark((function t(e,n){var r,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.xSquare,a=e.ySquare,o.updaters.update(Object(b.a)({},r,n),"/gameMap/".concat(a));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),o.addBomb=function(){var t=Object(j.a)(m.a.mark((function t(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.update(Object(b.a)({},e.id,e),"/bombs");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.removeBomb=function(){var t=Object(j.a)(m.a.mark((function t(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.remove("/bombs/".concat(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.addPowerUp=function(){var t=Object(j.a)(m.a.mark((function t(e,n){var r,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.ySquare,a=n.xSquare,o.updaters.update({powerUps:Object(b.a)({},r,Object(b.a)({},a,e))});case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),o.removePowerUp=function(){var t=Object(j.a)(m.a.mark((function t(e){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.ySquare,r=e.xSquare,o.updaters.update({powerUps:Object(b.a)({},n,Object(b.a)({},r,null))});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.toggleIs3D=Object(j.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.update({is3D:!o.state.is3D});case 1:case"end":return t.stop()}}),t)}))),o.toggleIsSideView=Object(j.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.update({isSideView:!o.state.isSideView});case 1:case"end":return t.stop()}}),t)}))),o.incrementAnimationCounter=Object(j.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.update({animationCounter:o.state.animationCounter+1});case 1:case"end":return t.stop()}}),t)}))),o}return n}(y.a),k=function(t,e){var n=Object(x.a)("online/".concat(t,"/gameState")),r=Object(c.useRef)(new w(e,n)),o=Object(c.useRef)(new f.a(e,r.current)),i=Object(c.useRef)(e);Object(c.useEffect)((function(){r.current=new w(e,n),o.current=new f.a(e,r.current)}),[e,n]);var u=Object(c.useCallback)((function(t){r.current.updateGameState(t)}),[]),s=Object(c.useCallback)((function(t){r.current.updateGameMap(t)}),[]),l=Object(c.useCallback)((function(){s({gameMap:Object(p.f)(i.current.config.sizes,i.current.config.tiles.blockTileChance,i.current.players),animate:!0})}),[s]),d=Object(c.useCallback)((function(t,e){o.current.updatePlayerDirection({direction:t,id:e})}),[]),b=Object(c.useCallback)((function(t,e){o.current.updatePlayerIsWalking({isWalking:t,id:e})}),[]),v=Object(c.useCallback)((function(t){o.current.makeMove(t)}),[]),m=Object(c.useCallback)((function(t){o.current.triggerMove(Object(a.a)(Object(a.a)({},t),{},{onComplete:v}))}),[o,v]),j=Object(c.useCallback)((function(t){o.current.dropBomb(t)}),[]),g=Object(c.useCallback)((function(t,e){o.current.triggerExplosion(t,e)}),[]),O=Object(c.useCallback)((function(t){o.current.onExplosionComplete(t)}),[]),h=Object(c.useCallback)((function(){o.current.triggerGameAnimation()}),[]),y=Object(c.useCallback)((function(){o.current.toggleGameDimension()}),[]),k=Object(c.useCallback)((function(){o.current.toggleGamePerspective()}),[]),I=Object(c.useCallback)((function(){o.current.toggleGameTwoPlayer()}),[]),P=Object(c.useCallback)((function(){o.current.toggleGameNpc()}),[]);return{startGame:function(){return null},updateGameSettings:u,generateNewCollisionCoordinates:l,updatePlayerDirection:d,updatePlayerIsWalking:b,makeMove:v,triggerMove:m,dropBomb:j,triggerExplosion:g,onExplosionComplete:O,triggerAnimation:h,toggleDimension:y,togglePerspective:k,toggleTwoPlayer:I,toggleNPC:P}},I=n(560),P=function(t){var e=Object(I.a)(t),n=e.pending,r=e.error,a=e.game;return{provider:k(t,null===a||void 0===a?void 0:a.gameState),pending:n,error:r,state:null===a||void 0===a?void 0:a.gameState,type:i.g.Online,gamePlayers:null===a||void 0===a?void 0:a.gamePlayers}},S=n(6),C=function(t){var e=t.gameId,n=t.currentOnlinePlayerId,r=t.gameProps;return Object(d.a)(e,n),l(r.gamePlayers,n,e,r.state.config),Object(S.jsx)(o.a,Object(a.a)(Object(a.a)({},r),{},{playerId:n,gameId:e}))};e.default=function(t){var e,n=t.location,a=t.match.params.id,o=P(a),i=o.pending,c=o.error,u=Object(r.a)(o,["pending","error"]),s=null===n||void 0===n||null===(e=n.state)||void 0===e?void 0:e.playerId;return i||c||Object(S.jsx)(C,{gameId:a,currentOnlinePlayerId:s,gameProps:u})}},543:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return u}));var r,a,o=n(34),i=n(29),c=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(i.e)(r||(r=Object(o.a)(["\n\t0% { transform: scale(0, 0); }\n\t25% { transform: scale(0.9, 1.1); }\n\t50% { transform: scale(1.1, 0.9); }\n\t75% { transform: scale(0.95, 1.05); }\n\t100% { transform: scale(1, 1); "," }\n"])),t?"opacity: 1;":"")},u=function(t,e){return Object(i.e)(a||(a=Object(o.a)(["\n\t0%, 100% { \n\t\ttransform: translateY(0px); \n\t\tbox-shadow: 0 10px 10px #000000;\n\t}\n\t50% {\n\t\ttransform: translateY(-10px);\n\t\tbox-shadow: 0 20px ","px ",";\n\t}\n"])),Math.ceil(t/6)+10,e)}},545:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i}));var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(e){setTimeout(e,t)}))},a=function(t){return function(e){e.currentTarget.blur(),t(e)}},o=function(t){return null===t||void 0===t},i=function(t,e){return Object.keys(t)[Object.values(t).indexOf(e)]}},546:function(t,e,n){"use strict";var r,a,o=n(34),i=n(543),c=n(29),u=c.d.div(r||(r=Object(o.a)(["\n\tposition: absolute;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\topacity: 0;\n\tsvg {\n\t\theight: 100% !important;\n\t\twidth: 100% !important;\n\t\tmax-width: 70%;\n\t\tmax-height: 80%;\n\t}\n\t","\n"])),(function(t){var e=t.$size,n=t.$animationDelay,r=t.$top,u=t.$left;return Object(c.c)(a||(a=Object(o.a)(["\n\t\ttop: ","px;\n\t\tleft: ","px;\n\t\twidth: ","px;\n\t\theight: ","px;\n\t\tanimation: "," var(--block-animation-duration)\n\t\t\t"," ease-out forwards;\n\t"])),r,u,e,e,Object(i.a)(!0),n||"")}));e.a=u},547:function(t,e,n){"use strict";var r=n(7),a=n.n(r),o=n(8),i=n(14),c=n(202),u=n(548),s=n(99),l=n(6);e.a=function(t){var e=Object(s.useFirebase)();Object(s.useFirebaseConnect)([t]);var n=function(e){return"".concat(t).concat(e||"")};return{create:function(){var t=Object(i.a)(a.a.mark((function t(){var r,i,c,u,s,l,d,p,f,b=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=b.length,i=new Array(r),c=0;c<r;c++)i[c]=b[c];if(u=i[0],s=i[1],l=i[2],d=i[3],t.prev=2,!d){t.next=9;break}return t.next=6,e.uniqueSet(n("".concat(s||"","/").concat(d)),Object(o.a)({},u));case 6:f=t.sent,t.next=12;break;case 9:return t.next=11,e.push(n(s),u);case 11:f=t.sent;case 12:return null===l||void 0===l||null===(p=l.onSuccess)||void 0===p||p.call(l,f),t.abrupt("return",f);case 16:return t.prev=16,t.t0=t.catch(2),(null===l||void 0===l?void 0:l.onError)&&l.onError(t.t0),t.abrupt("return",t.t0);case 20:case"end":return t.stop()}}),t,null,[[2,16]])})));return function(){return t.apply(this,arguments)}}(),read:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],a=!Object(s.isLoaded)(r)&&Object(l.jsx)(c.default,{}),o=Object(s.isEmpty)(r)&&Object(l.jsx)(u.a,{});return{state:r,pending:a,error:o}},update:function(){var t=Object(i.a)(a.a.mark((function t(){var r,o,i,c,u,s,l,d,p=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=p.length,o=new Array(r),i=0;i<r;i++)o[i]=p[i];return c=o[0],u=o[1],s=o[2],t.prev=2,t.next=5,e.update(n(u),c);case 5:return d=t.sent,null===s||void 0===s||null===(l=s.onSuccess)||void 0===l||l.call(s,d),t.abrupt("return",d);case 10:return t.prev=10,t.t0=t.catch(2),(null===s||void 0===s?void 0:s.onError)&&s.onError(t.t0),t.abrupt("return",t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),push:function(){var t=Object(i.a)(a.a.mark((function t(){var r,o,i,c,u,s,l,d,p=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=p.length,o=new Array(r),i=0;i<r;i++)o[i]=p[i];return c=o[0],u=o[1],s=o[2],t.prev=2,t.next=5,e.push(n(u),c);case 5:return d=t.sent,null===s||void 0===s||null===(l=s.onSuccess)||void 0===l||l.call(s,d),t.abrupt("return",d);case 10:return t.prev=10,t.t0=t.catch(2),(null===s||void 0===s?void 0:s.onError)&&s.onError(t.t0),t.abrupt("return",t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),remove:function(){var t=Object(i.a)(a.a.mark((function t(){var r,o,i,c,u,s,l,d=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=d.length,o=new Array(r),i=0;i<r;i++)o[i]=d[i];return c=o[0],u=o[1],t.prev=2,t.next=5,e.remove(n(c));case 5:return l=t.sent,null===u||void 0===u||null===(s=u.onSuccess)||void 0===s||s.call(u,l),t.abrupt("return",l);case 10:return t.prev=10,t.t0=t.catch(2),(null===u||void 0===u?void 0:u.onError)&&u.onError(t.t0),t.abrupt("return",t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}()}}},548:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r,a=n(34),o=n(549),i=n(544),c=n(44),u=n(29),s=n(200),l=n(6),d=Object(u.d)(i.a)(r||(r=Object(a.a)(["\n\tcolor: ",";\n"])),c.b.palette.color.error),p=function(t){var e=t.children,n=t.message,r=void 0===n?"Either the game is not found or you don't have access to it.":n;return Object(l.jsxs)(o.a,{children:[Object(l.jsx)(s.a,{spacing:"5"}),Object(l.jsx)(d,{children:r}),Object(l.jsx)(s.a,{spacing:"10"}),e]})}},552:function(t,e,n){"use strict";var r=n(8),a=n(198),o=n(199),i=n(44),c=n(2),u=n(546),s=n(6),l=function(t){return Object(s.jsx)(a.a,Object(r.a)({icon:o.b},t))};e.a=function(t){var e=t.id,n=t.size,r=t.explodingDuration,a=t.coordinates,o=a.top,d=a.left,p=t.onDeathAnimationComplete;return Object(c.useEffect)((function(){setTimeout((function(){null===p||void 0===p||p(e)}),1e3*r+1e3)}),[]),Object(s.jsx)(u.a,{$top:o,$left:d,$size:n,$animationDelay:"".concat(r,"s"),children:Object(s.jsx)(l,{color:i.b.palette.color.default})})}},553:function(t,e,n){},554:function(t,e,n){"use strict";var r,a=n(9),o=n(8),i=n(198),c=n(199),u=n(4),s=n(44),l=n(6),d=(r={},Object(a.a)(r,u.j.Life,{color:s.b.palette.color.success,icon:function(t){return Object(l.jsx)(i.a,Object(o.a)({icon:c.h},t))}}),Object(a.a)(r,u.j.BombCount,{color:s.b.palette.color.error,icon:function(t){return Object(l.jsx)(i.a,Object(o.a)({icon:c.a},t))}}),Object(a.a)(r,u.j.BombSize,{color:s.b.palette.color.warning,icon:function(t){return Object(l.jsx)(i.a,Object(o.a)({icon:c.k},t))}}),Object(a.a)(r,u.j.MovementSpeed,{color:s.b.palette.color.info,icon:function(t){return Object(l.jsx)(i.a,Object(o.a)({icon:c.m},t))}}),r);e.a=d},555:function(t,e,n){"use strict";var r,a,o=n(8),i=n(65),c=n(64),u=n(34),s=n(4),l=n(2),d=n(12),p=n(29),f=n(44),b=(n(553),n(6)),v=p.d.div(r||(r=Object(u.a)(["\n\t","\n"])),(function(t){var e=t.$size,n=t.$name,r=e/32,o=32*r,i=4*o,c=-1*r*32,s=e/4*-1,l=Math.min(-15,2.5*s),d=Math.min(30,Math.ceil(o/6)),b=Math.floor(o/10),v=Math.floor(20*n.length+o*r/10),m="\n\t\t\twidth: ".concat(o,"px;\n\t\t\theight: ").concat(o,"px;\n\t\t"),j="\n\t\t\twidth: ".concat(i,"px;\n\t\t\theight: ").concat(i,"px;\n\t\t");return Object(p.c)(a||(a=Object(u.a)(["\n\t\t\tposition: absolute;\n\t\t\tz-index: 9999;\n\t\t\t",";\n\t\t\ttransition-duration: 450ms;\n\n\t\t\t&#P1 .name {\n\t\t\t\tbackground-color: ",";\n\t\t\t}\n\t\t\t&#P2 .name {\n\t\t\t\tbackground-color: ",";\n\t\t\t}\n\t\t\t&#P3 .name {\n\t\t\t\tbackground-color: ",";\n\t\t\t}\n\t\t\t&#P4 .name {\n\t\t\t\tbackground-color: ",";\n\t\t\t}\n\n\t\t\t.character {\n\t\t\t\ttop: ","px;\n\t\t\t\ttransform: translate(","px);\n\n\t\t\t\t",";\n\t\t\t\toverflow: hidden;\n\t\t\t\tposition: relative;\n\t\t\t\t/* MOVEMENT TRANSITION */\n\t\t\t\ttransition-duration: 400ms;\n\n\t\t\t\t& .name {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tleft: 0;\n\t\t\t\t\tright: 0;\n\t\t\t\t\ttop: ","px;\n\t\t\t\t\tfont-size: ","px;\n\t\t\t\t\tmax-width: ","px;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\tborder: 1px dashed white;\n\t\t\t\t\tborder-radius: 9999px;\n\t\t\t\t\topacity: 1;\n\t\t\t\t\tmargin: auto;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t}\n\n\t\t\t\t& .shadow {\n\t\t\t\t\t",";\n\t\t\t\t\topacity: 0.75;\n\t\t\t\t}\n\n\t\t\t\t& .spritesheet {\n\t\t\t\t\t",";\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tleft: 0;\n\t\t\t\t}\n\n\t\t\t\t/* DIRECTION */\n\t\t\t\t&[data-facing='Right'] .spritesheet {\n\t\t\t\t\ttop: ","px;\n\t\t\t\t}\n\t\t\t\t&[data-facing='Up'] .spritesheet {\n\t\t\t\t\ttop: ","px;\n\t\t\t\t}\n\t\t\t\t&[data-facing='Left'] .spritesheet {\n\t\t\t\t\ttop: ","px;\n\t\t\t\t}\n\n\t\t\t\t&[data-walking='true'] {\n\t\t\t\t\t/* MOVEMENT ANIMATION */\n\t\t\t\t\t.spritesheet {\n\t\t\t\t\t\tanimation: walkAnimation 0.6s steps(4) infinite;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* SHADOW ANIMATION */\n\t\t\t\t\t.shadow {\n\t\t\t\t\t\tanimation: shadowAnimation 0.3s infinite;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/* HIGHLIGHT/DAMAGE ANIMATION */\n\t\t\t\t&[data-highlight='true'] .spritesheet {\n\t\t\t\t\tanimation: opacityAnimation 0.6s steps(4) infinite;\n\t\t\t\t}\n\t\t\t}\n\t\t"])),m,f.b.palette.color.warning,f.b.palette.color.info,f.b.palette.color.success,f.b.palette.color.error,l,s,m,b,d,v,m,j,1*c,2*c,3*c)})),m=function(t){var e=t.id,n=t.shouldBindEvent,r=t.keyboardConfig,a=t.onPlayerIsWalking,o=t.setDirection,i=t.setIsWalking,c=Object(l.useRef)((new Date).getTime());Object(l.useEffect)((function(){var t=function(t){if(n){var u=function(t){return r?Object(d.j)(t.code,r):null}(t);if(!u)return null===a||void 0===a||a(!1,e),void i(!1);c.current=(new Date).getTime(),i(!0),function(t){o(t)}(u)}},u=function(){n&&setTimeout((function(){var t=(new Date).getTime()-200;c.current>=t||(i(!1),null===a||void 0===a||a(!1,e))}),200)};return n&&(document.addEventListener("keydown",t),document.addEventListener("keyup",u)),function(){document.removeEventListener("keydown",t),document.removeEventListener("keyup",u)}}),[e,r,a,o,i,n])};e.a=function(t){var e=t.id,n=t.currentOnlinePlayerId,r=t.name,a=t.coordinates,u=a.top,d=a.left,p=t.style,f=t.keyboardConfig,j=t.highlight,g=t.size,O=t.onPlayerIsWalking,h=t.isWalking,y=void 0!==h&&h,x=t.direction,w=void 0===x?s.b.DOWN:x,k=t.isNPC,I=void 0!==k&&k,P=Object(c.a)(t,["id","currentOnlinePlayerId","name","coordinates","style","keyboardConfig","highlight","size","onPlayerIsWalking","isWalking","direction","isNPC"]),S=Object(l.useState)(w),C=Object(i.a)(S,2),E=C[0],A=C[1],D=Object(l.useState)(y),z=Object(i.a)(D,2),N=z[0],M=z[1],T=!I&&(!n||e===n);m({id:e,currentOnlinePlayerId:n,keyboardConfig:f,shouldBindEvent:T,onPlayerIsWalking:O,setDirection:A,setIsWalking:M});var B=y,$=w;return T&&(B=N,$=E),Object(b.jsx)(v,Object(o.a)(Object(o.a)({id:e,style:Object(o.a)(Object(o.a)({},p),{},{top:u,left:d}),className:"character-wrapper"},P),{},{$size:2*g,$name:r,children:Object(b.jsxs)("div",{className:"character","data-facing":$,"data-walking":B.toString(),"data-highlight":j,children:[Object(b.jsx)("div",{className:"name",children:r}),Object(b.jsx)("img",{className:"shadow pixel-art",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAWUlEQVRYR+3XsQkAIAxEUe2cRXADx3cDwVksJYX970T41sE7Xqrk9Pjlx/nJAgoooIACCiiggAIKKKDAXwKt9k0uqblGIXMxgwVo+A2mJSyABYKWroHyx58Hv0cUIWfm8TkAAAAASUVORK5CYII=",alt:"sprite skin"}),Object(b.jsx)("img",{className:"spritesheet pixel-art",src:"data:image/png;base64,UklGRuYBAABXRUJQVlA4TNkBAAAvf8AfEDegkI0kaB1Wc63vv4M4DQUByDA6SKk4ex2mqG0bqCCKrfwp7N5em/8A4P9XnTtjLpKQBLi1tbdt/gbqnTCAN/D5RCygH6yhQ4C1GfefQQG/fjA4FhH9Z9i2bZjkAbZdhsAn0N9Qh3Rps6Tr7enSZ9lZ1PV+6bPsLO4q4Fj1ORugiqJzAdemHQCwqMszM8vOoq4wzXNrso4rVOW6YeXnwAFDfg66i/MBl3QOm5+DDrAmX0BjNK5QAfYsOYVzJHCjcr1VjGTyTmZhrj2PUeUKvuZIeWc7iQ6TdK4URIcJSXIQyS75V0Q70f+F9g48tFcs4Nq6A4Vd69w7RGdRF4UBhmRnWZd1wlhZB3tQuabj0JFQXb4+n2pMKlfoeHgRzhW9cK7ZcyKVa2Kehcn3SWRURueqkpdcSWIEE0jv+ne4d0DeKxZw7a5jV/aO4IDByDlGSZe/VvYc1dUpu+RzNrlqa+ZxyrtOPESNyzs+5s9FtbRGUT2mUeUKdapHZe4wkzZ3oH+muYNvAMjO8q5tO7CMS7MHeJRxrSt3gHsgVzBlXYOUG3QYOtK4yLpTq8oVqMX4dFDlEh+OrVHlConjTLpcgrklARpJcDYpKl0xNco1wgRTwLUPTQA=",alt:"sprite skin"})]})}))}},560:function(t,e,n){"use strict";var r=n(8),a=n(9),o=n(99),i=n(203),c=n(565),u=function(t){return t.firebase},s=n(12),l=n(202),d=n(548),p=n(20),f=n(53),b=n(4),v=n(547),m=n(561),j=n(6),g=Object(p.a)((function(){return Promise.all([n.e(4),n.e(18)]).then(n.bind(null,511))}));e.a=function(t){var e,n,p,O="online/".concat(t);Object(o.useFirebaseConnect)({path:O,queryParams:["limitToFirst=1"]});var h=Object(v.a)(O),y=h.update,x=h.remove,w=Object(m.a)().removeOnlineGame,k=Object(i.c)(Object(c.a)(u,(function(t){return t.data.online}))),I=null===k||void 0===k?void 0:k[t],P=!Object(o.isLoaded)(k)&&Object(j.jsx)(l.default,{}),S=Object(o.isEmpty)(k,null===I||void 0===I?void 0:I.gameState)&&Object(j.jsx)(d.a,{children:Object(j.jsx)(g,{noWrapper:!0})});return{game:Object(r.a)(Object(r.a)({},I),{},{gameState:Object(r.a)(Object(r.a)({},(null===I||void 0===I?void 0:I.gameState)||{}),{},{players:(null===I||void 0===I||null===(e=I.gameState)||void 0===e?void 0:e.players)||{},bombs:(null===I||void 0===I||null===(n=I.gameState)||void 0===n?void 0:n.bombs)||{},powerUps:(null===I||void 0===I||null===(p=I.gameState)||void 0===p?void 0:p.powerUps)||{}}),gamePlayers:(null===I||void 0===I?void 0:I.gamePlayers)||{},gameId:(null===I||void 0===I?void 0:I.gameId)||t,started:(null===I||void 0===I?void 0:I.started)||!1}),pending:P,error:S,isReady:!P&&!S,onPlayerJoin:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];y(Object(a.a)({},t,b.i.Alive),"/gamePlayers");var n=Object(s.d)(t,I.gameState.config,!e&&f.a.keyboardConfig||null);y(n,"/gameState/players/".concat(t))},onPlayerExit:function(e){(x("/gamePlayers/".concat(e)),x("/gameState/players/".concat(e)),null===I||void 0===I?void 0:I.gamePlayers)&&(Object.keys(I.gamePlayers).length<=1&&w(t))},onStartGame:function(){y({started:!0})},onEndGame:function(){y({started:!1,gamePlayers:{}})},onPlayerDeath:function(e){t&&y(Object(a.a)({},e,b.i.Dead),"/gamePlayers")}}}},561:function(t,e,n){"use strict";var r=n(7),a=n.n(r),o=n(14),i=n(99),c=n(576),u={dictionaries:[c.b,c.a],separator:"-"},s=function(){return Object(c.c)(u)},l=n(547);e.a=function(){var t="online";Object(i.useFirebaseConnect)(t);var e=Object(l.a)(t),n=e.create,r=e.update,c=e.remove,u=function(){var t=Object(o.a)(a.a.mark((function t(e){var o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=s(),t.next=3,n({gameState:e,started:!1},void 0,void 0,o);case 3:if(!t.sent.key){t.next=8;break}return t.next=7,r({gameId:o},"/".concat(o));case 7:return t.abrupt("return",o);case 8:return t.abrupt("return",null);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Object(o.a)(a.a.mark((function t(e,n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r({gameState:n,gamePlayers:{},started:!1},"/".concat(e));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return{createOnlineGame:u,removeOnlineGame:function(){var t=Object(o.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c("/".concat(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),restartOnlineGame:d}}},565:function(t,e,n){"use strict";function r(t,e){return t===e}function a(t,e,n){if(null===e||null===n||e.length!==n.length)return!1;for(var r=e.length,a=0;a<r;a++)if(!t(e[a],n[a]))return!1;return!0}function o(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every((function(t){return"function"===typeof t}))){var n=e.map((function(t){return typeof t})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return e}n.d(e,"a",(function(){return i}));var i=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];var i=0,c=r.pop(),u=o(r),s=t.apply(void 0,[function(){return i++,c.apply(null,arguments)}].concat(n)),l=t((function(){for(var t=[],e=u.length,n=0;n<e;n++)t.push(u[n].apply(null,arguments));return s.apply(null,t)}));return l.resultFunc=c,l.dependencies=u,l.recomputations=function(){return i},l.resetRecomputations=function(){return i=0},l}}((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=null,o=null;return function(){return a(e,n,arguments)||(o=t.apply(null,arguments)),n=arguments,o}}))},566:function(t,e,n){"use strict";var r=n(2);e.a=function(t,e,n){var a=Object(r.useRef)(),o=Object(r.useRef)();Object(r.useEffect)((function(){a.current=t}),[t]);var i=Object(r.useCallback)((function(){o.current&&clearInterval(o.current)}),[]),c=Object(r.useCallback)((function(){var t;null===(t=a.current)||void 0===t||t.call(a)}),[]);return Object(r.useEffect)((function(){return n||(o.current=setInterval(c,e)),function(){return i()}}),[e,n,i,c]),Object(r.useEffect)((function(){n&&i()}),[n,i]),i}},567:function(t,e,n){"use strict";var r=n(2);e.a=function(t){var e=Object(r.useRef)();return Object(r.useEffect)((function(){e.current=t}),[t]),e.current}},573:function(t,e,n){"use strict";n.d(e,"b",(function(){return D}));var r=n(9),a=n(4),o=n(2),i=n(12),c=n(65),u=n(8),s=n(39),l=n(149);window.NPC_DEBUG=!1;var d,p,f=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";window.NPC_DEBUG&&(e=console).log.apply(e,Object(s.a)([n,t].filter(Boolean)))};!function(t){t[t.IsDanger=-1e4]="IsDanger",t[t.IsNonBreakingTile=-100]="IsNonBreakingTile",t[t.IsNonAdjacentNonBreakingTile=-5]="IsNonAdjacentNonBreakingTile",t[t.IsStuck=0]="IsStuck",t[t.IsEmptyTile=2]="IsEmptyTile",t[t.IsBreakingTile=3]="IsBreakingTile",t[t.IsPlayer=4]="IsPlayer",t[t.IsPossibleFireExit=1]="IsPossibleFireExit",t[t.IsPowerUp=1e3]="IsPowerUp"}(p||(p={}));var b=function(t,e){var n=t.ySquare,r=t.xSquare,a=e.ySquare,o=e.xSquare;return n!==a||r!==o},v=function(t){var e=Object.values(d.bombs);if(!e.length)return!1;var n=[];return e.forEach((function(t){var e,r=t.playerId,o=t.top,c=t.left,u=d.players,s=Object(i.h)(d.gameMap,{top:o,left:c},(null===(e=u[r])||void 0===e?void 0:e.state)?Object(i.k)(u[r].state,a.j.BombSize,d.powerUpConfig):d.powerUpConfig.defaults[a.j.BombSize],d.sizes).coordinatesToSetOnFire;Object.values(s).flat().forEach((function(t){n.push(t)}))})),n.findIndex((function(e){return!b(e,t)}))>=0},m=function(t,e){var n=t.ySquare,r=t.xSquare,a=e.ySquare,o=e.xSquare;return r===o&&(n===a+1||n===a-1)||n===a&&(r===o+1||r===o-1)},j=function(t,e,n,r){if(m(t,e)){var a=(new Date).getTime();return d.lastBombTime<=a-1e3*Object.values(d.bombDuration).reduce((function(t,e){return t+e}),0)&&(d.dropBomb(),d.lastBombTime=a),r}return b(t,e)?n:null},g=function(t,e,n){var r=t.ySquare,o=t.xSquare;if(!Object(i.q)(t,d.sizes.map)){var c,u=d.gameMap[r][o];if(v(t))return v(e)?p.IsPossibleFireExit:p.IsDanger;if(Object.values(a.j).includes(u))return p.IsPowerUp*n;if(!b(t,e))return p.IsStuck;if(u===a.k.Empty)return p.IsEmptyTile;if(c=u,Object.values(a.h).includes(c)){var s=j(t,e,p.IsPlayer);if(null!==s)return s}if(u===a.k.Breaking){if(v(e))return p.IsDanger;var l=j(t,e,p.IsBreakingTile);if(null!==l)return l}return u===a.k.NonBreaking?m(t,e)?p.IsNonBreakingTile:p.IsNonAdjacentNonBreakingTile:p.IsStuck}},O=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=e.ySquare,c=e.xSquare,s={};return Object.values(a.b).forEach((function(e){var l=i,p=c;switch(d.id++,e){case a.b.LEFT:p--;break;case a.b.UP:l--;break;case a.b.RIGHT:p++;break;case a.b.DOWN:l++}var f=g({ySquare:l,xSquare:p},n,r);s[d.id]={score:f,hasChildren:r>0&&void 0!==f,parentId:o,direction:e,level:r},r>0&&f&&(s=Object(u.a)(Object(u.a)({},s),t({ySquare:l,xSquare:p},n,r-1,d.id)))})),s},h=function(t){return t.reduce((function(t,e){var n=e;(void 0===e.score&&(n=t),t.score>e.score&&(n=t),t.score<e.score&&(n=e),t.score===e.score)&&(n=0===Object(l.a)(2)?e:t);return n}))},y=function(t){var e={};return t.forEach((function(t){var n=t.parentId;e[n]?e[n].push(t):e[n]=[t]})),e},x=function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(null!==r){n=void 0===r?Object.values(e).filter((function(t){return!t.hasChildren})):Object.values(e).filter((function(t){return t.parentId===e[r].parentId}));var a=y(n);Object.entries(a).forEach((function(n){var r=Object(c.a)(n,2),a=r[0],o=r[1],i="null"===a?null:Number(a),u=h(o);i?(e[i].score=e[i].score+(u.score?u.score:0),t(e,i)):d.parentNodes.some((function(t){return t.direction===u.direction}))||d.parentNodes.push(u)}))}},w=function(t){d.id=0,d.parentNodes=[];var e=O(t,t,void 0);return f(t,"currentCoordinates"),f(e,"originalMoves"),x(e),f(e,"scoredMoves"),h(d.parentNodes)},k=n(566),I=n(567),P=n(40),S=n(6),C=function(){var t=Object(o.useRef)({P1:document.getElementById("P1"),P2:document.getElementById("P2"),P3:document.getElementById("P3"),P4:document.getElementById("P4")});return{playerRefs:t,recalculate:function(){Object.keys(t.current).forEach((function(e){t.current[e]=document.getElementById(e)}))}}},E=function(){return Object(o.useRef)({P1:(new Date).getTime(),P2:(new Date).getTime(),P3:(new Date).getTime(),P4:(new Date).getTime()})},A=function(t,e){var n=E();return function(r){var o=t[r];if(!o)return!1;var c=o.state,u=(new Date).getTime(),s=Object(i.k)(c,a.j.MovementSpeed,e);return u-n.current[r]>s&&(n.current[r]=u,!0)}},D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onKeyDown,n=t.onKeyUp,r=Object(o.useRef)({});return Object(o.useEffect)((function(){var t=function(t){if(r.current){var a="keydown"===t.type;t.code===P.h&&t.preventDefault(),function(t,e){r.current[t.code]=e}(t,a),a?null===e||void 0===e||e(t.code):null===n||void 0===n||n(t.code)}};return window.addEventListener("keyup",t),window.addEventListener("keydown",t),function(){window.removeEventListener("keyup",t),window.removeEventListener("keydown",t)}}),[e,n]),r},z=function(t,e,n){var r=t[e];return!!r&&!Object(i.n)(r.state,n)},N=function(t,e,n,r){var c=function(t,e,n){return Object(o.useMemo)((function(){var r,o=null===(r=t[e])||void 0===r?void 0:r.state;return o?Object(i.k)(o,a.j.MovementSpeed,n):null}),[e,t,n])}(t,e,n);Object(k.a)((function(){z(t,e,n)&&r(e)}),c||Number.MAX_SAFE_INTEGER,!c)},M=function(t,e,n){return function(r){Object.keys(t).forEach((function(a){if(z(t,a,n)){var o=t[a].keyboardConfig;if(o)Object(i.r)(o,"DropBomb").includes(r)&&e(a)}}))}},T=function(t){var e=t.playerId,n=t.players,r=t.powerUpConfig,a=t.cb;return N(n,e,r,a),null};e.a=function(t){var e=t.state,n=t.provider,c=t.type,u=t.playerId,s=n.dropBomb,l=n.triggerMove,p=e.gameMap,b=e.bombs,v=e.players,m=e.is3D,j=e.config,g=j.powerUps,O=j.sizes,h=j.duration.bomb,y=C().playerRefs,x=Object(o.useMemo)((function(){return c===a.g.Local?v:Object(r.a)({},u,v[u])}),[v]),k=D({onKeyDown:M(x,s,g)}),P=E(),z=function(t){var e=t.triggerMove,n=t.players,r=t.timeOutRef,a=t.keyMap,c=t.is3D,u=t.powerUpConfig,s=C(),l=s.playerRefs,d=s.recalculate,p=Object(I.a)(c);Object(o.useEffect)((function(){p!==c&&d()}),[c,p,d]);var f=A(n,u),b=function(t,n){var r=Object(i.i)(a,n);r.length&&r.forEach((function(n){e({playerId:t,direction:n,ref:l.current[t]})}))};return{move:b,handleActions:function(t){if(a.current&&r.current&&Object.values(a.current).filter(Boolean).length){var e=n[t].keyboardConfig;if(e&&Object.keys(e).length){var o=l.current[t];o||(l.current[t]=document.getElementById(t)),o&&f(t)&&b(t,e)}}}}}({triggerMove:l,players:x,timeOutRef:P,keyMap:k,is3D:m,powerUpConfig:g}).handleActions,N=A(v,g),B=function(t){y.current[t]||(y.current[t]=document.getElementById(t)),function(t){var e=t.playerId,n=t.players,r=t.gameMap,a=t.bombs,o=t.triggerMove,c=t.dropBomb,u=t.ref,s=t.powerUpConfig,l=t.sizes,p=t.bombDuration,b=n[e];if(d={id:0,parentNodes:[],lastBombTime:0,dropBomb:function(){return c(e)},gameMap:r,bombs:a,players:n,powerUpConfig:s,sizes:l,bombDuration:p},b){var v=Object(i.l)(b.coordinates,l.movement),m=w(v);f(m,"bestMovementNode"),((null===m||void 0===m?void 0:m.score)||0)>0&&o({playerId:e,direction:m.direction,ref:u})}}({playerId:t,dropBomb:s,gameMap:p,bombs:b,players:x,triggerMove:function(e){N(t)&&l(e)},ref:y.current[t],powerUpConfig:g,sizes:O,bombDuration:h})};return Object.keys(x).map((function(t){var e=x[t].isNPC;return Object(S.jsx)(T,{playerId:t,players:x,powerUpConfig:g,cb:e?B:z},t)}))}},574:function(t,e,n){"use strict";var r=n(2),a=n(11),o=n(27),i=n(560),c=function(){return null},u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;Object(r.useEffect)((function(){return window.addEventListener("beforeunload",t),window.addEventListener("unload",e),function(){window.removeEventListener("beforeunload",t),window.removeEventListener("unload",e)}}))},s=["online","waiting-room","game-end"];e.a=function(t,e){var n=Object(i.a)(t).onPlayerExit,c=Object(a.g)().listen;u((function(){e&&t&&n(e)})),Object(r.useEffect)((function(){return c((function(r){var a=r.pathname;e&&(s.some((function(e){return a.startsWith("".concat(o.a,"/").concat(e,"/").concat(t))}))||n(e))}))}),[t,c,n,e])}},575:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r,a=n(8),o=n(64),i=n(34),c=n(2),u=n(29),s=n(44),l=n(6),d=u.d.button(r||(r=Object(i.a)(["\n\tbackground-color: ",";\n\t/* IGNORE SIZE FOR NOW */\n\tborder-radius: ",";\n\tpadding: ",";\n\tcursor: pointer;\n\ttransition: background-color ",";\n\n\t&:hover {\n\t\tbackground-color: ",";\n\t}\n"])),(function(t){var e=t.$variant;return s.b.palette.color[e]}),s.b.shape.borderRadius,s.b.shape.padding,s.b.transition.hover,(function(t){var e=t.$variant;return s.b.palette.color["".concat(e,"-lighter")]})),p=Object(c.forwardRef)((function(t,e){var n=t.variant,r=void 0===n?"default":n,i=t.size,c=void 0===i?"medium":i,u=t.children,s=Object(o.a)(t,["variant","size","children"]);return Object(l.jsx)(d,Object(a.a)(Object(a.a)({$variant:r,$size:c,ref:e},s),{},{children:u}))})),f=Object(c.memo)(p)},588:function(t,e,n){},592:function(t,e,n){"use strict";n.d(e,"a",(function(){return dt}));var r,a,o,i,c,u,s,l,d,p,f,b,v,m,j=n(8),g=n(573),O=n(34),h=n(29),y=n(200),x=n(6),w=h.d.div(r||(r=Object(O.a)(["\n\tdisplay: flex;\n\tjustify-content: center;\n\tflex-wrap: wrap;\n\n\t& > :first-child {\n\t\tmargin-right: 50px;\n\t\twidth: 15%;\n\t\t@media only screen and (max-width: 600px) {\n\t\t\twidth: 100%;\n\t\t\tmargin: 50px auto;\n\t\t\torder: 2;\n\t\t\t& button {\n\t\t\t\twidth: 80% !important;\n\t\t\t}\n\t\t}\n\t}\n"]))),k=h.d.div(a||(a=Object(O.a)(["\n\ttext-align: center;\n\t","\n"])),(function(t){return t.$is3D?"perspective: 1000":""})),I=function(t){var e=t.children,n=t.is3D;return Object(x.jsxs)(k,{$is3D:n,children:[Object(x.jsx)(y.a,{spacing:"2"}),Object(x.jsx)(w,{children:e})]})},P=n(64),S=n(2),C=n(575),E=n(545),A=function(t){var e=t.active,n=void 0!==e&&e,r=t.onClick,a=t.children,o=Object(P.a)(t,["active","onClick","children"]);return Object(x.jsx)(C.a,Object(j.a)(Object(j.a)({style:{width:"100%",wordWrap:"break-word",marginBottom:10},variant:n?"success":"warning",onClick:Object(E.d)(r)},o),{},{children:a}))},D=function(t){var e=t.state,n=t.provider,r=n.generateNewCollisionCoordinates,a=n.togglePerspective,o=n.toggleDimension,i=e.is3D,c=e.isSideView,u=Object(S.useMemo)((function(){return[{label:"Generate New Map",onClick:r},{label:"Toggle 3D (Experimental)",onClick:o,active:i},{label:"Toggle Side View",onClick:a,active:c,disabled:!i}].map((function(t){var e=t.label,n=Object(P.a)(t,["label"]);return Object(x.jsx)(A,Object(j.a)(Object(j.a)({},n),{},{children:e}),e)}))}),[r,i,c,o,a]);return Object(x.jsx)("div",{children:u})},z=Object(S.memo)(D),N=n(65),M=n(44),T=n(4),B=n(12),$=n(560),R=n(7),U=n.n(R),q=n(14),G=function(){var t=Object(S.useRef)(!0);return Object(S.useEffect)((function(){return function(){t.current=!1}}),[]),t},V=(n(588),h.d.div(o||(o=Object(O.a)([""])))),W=h.d.div(i||(i=Object(O.a)(["\n\t","\n\theight: calc(var(--tile-size) * 1px);\n\twidth: calc(var(--tile-size) * 1px);\n\ttransform-style: preserve-3d;\n\tposition: absolute;\n\ttransform-origin: center center;\n\ttransition: 300ms;\n\n\ttransform: scale(1, 1) translateZ(calc(var(--tile-size) / 2 * -1px));\n\n\t& > "," {\n\t\tborder: 1px solid var(--primary-background);\n\n\t\theight: calc(var(--tile-size) * 1px);\n\t\twidth: calc(var(--tile-size) * 1px);\n\t\t/* transform-origin: 50% 50%; */\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\tposition: absolute;\n\n\t\t/** @see https://codepen.io/jh3y/pen/BaKqQLJ */\n\t\t&:nth-of-type(1) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(2) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg) rotateY(180deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(3) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg) rotateY(90deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(4) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg) rotateY(-90deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(5) {\n\t\t\tbackground-color: var(--secondary-background);\n\t\t\ttransform: translate(-50%, -50%)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(6) {\n\t\t\ttransform: translate(-50%, -50%)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * -1px)) rotateX(180deg);\n\t\t}\n\t}\n\n\t&.bouncy-block- {\n\t\t&no-animation {\n\t\t\ttransform: translateZ(calc(var(--tile-size) / 2 * 1px));\n\t\t\t& > "," {\n\t\t\t\tbackground-color: var(--secondary-color);\n\t\t\t}\n\t\t}\n\n\t\t&0 {\n\t\t\ttransform: translateZ(calc(var(--tile-size) / 2 * 1px))\n\t\t\t\trotateX(0deg) rotateY(0deg) rotateZ(0deg);\n\t\t}\n\t}\n"])),(function(t){var e=t.$size;return"\n\t\t--tile-size: ".concat(e,";\n\t")}),V,V),F=function(t){var e=t.size,n=t.top,r=t.left,a=t.animate,o=void 0!==a&&a,i=t.variant,c=t.color,u=t.collisionIndex,s=t.style,l=t.className,d=Object(P.a)(t,["size","top","left","animate","variant","color","collisionIndex","style","className"]),p="cuboid bouncy-block-".concat((o?u:"no-animation")||0," ").concat(i).concat(l&&" ".concat(l)||"");return Object(x.jsx)(W,Object(j.a)(Object(j.a)({className:p,style:Object(j.a)(Object(j.a)({},s),{},{top:n,left:r,width:e,height:e}),$size:e},d),{},{children:Array(6).fill(0).map((function(t,n){return Object(x.jsx)(V,{style:Object(j.a)(Object(j.a)({},c&&{backgroundColor:c}),{},{width:e,height:e})},n)}))}))},L=function(t,e,n){return"".concat(n?"transform: translateZ(".concat(t/2*2,"px) rotateX(").concat(e,"deg) rotateY(").concat(e,"deg)"):"transform: rotate(".concat(e,"deg)"),";")},Z=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(h.e)(c||(c=Object(O.a)(["\n\t0% { "," }\n\t\n\t/* 40% -> 100% */\n\t","\n"])),L(t,0,e),Array(7).fill(0).map((function(n,r){return"".concat(10*(r+4),"% { ").concat(L(t,(r+1)*(e&&(r<6?90:100)||r<4&&90||r<6&&270||360),e)," }")})).join("\n"))},K=h.d.div(u||(u=Object(O.a)(["\n\t","\n"])),(function(t){var e=t.$tileSize;return Object(h.c)(s||(s=Object(O.a)(["\n\t\tanimation: "," linear\n\t\t\tforwards;\n\t"])),Z(e))})),X=Object(h.d)(F)(l||(l=Object(O.a)(["\n\t","\n"])),(function(t){var e=t.$tileSize;return Object(h.c)(d||(d=Object(O.a)(["\n\t\tanimation: "," linear\n\t\t\tforwards;\n\t"])),Z(e,!0))})),Y=function(t){var e=t.color,n=t.firingDuration,r=t.explodingDuration,a=t.playerId,o=t.currentOnlinePlayerId,i=t.tileSize,c=t.id,u=t.top,s=t.left,l=t.triggerExplosion,d=t.onExplosionComplete,p=t.is3D,f=Object(S.useState)(T.c.Firing),b=Object(N.a)(f,2),v=b[0],m=b[1],j=G(),g=!o||a===o;Object(S.useEffect)((function(){g&&function(){var t=Object(q.a)(U.a.mark((function t(){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(E.c)(1e3*n);case 2:if(j.current){t.next=4;break}return t.abrupt("return");case 4:l(c,function(){var t=Object(q.a)(U.a.mark((function t(e){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(j.current){t.next=2;break}return t.abrupt("return");case 2:return m(T.c.Exploding),t.next=5,Object(E.c)(1e3*r);case 5:if(j.current){t.next=7;break}return t.abrupt("return");case 7:d(c),e.forEach((function(t){d(t)}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[]);var O=i/2,h=O/2,y={position:"absolute",backgroundColor:e,width:O,height:O,top:u+h,left:s+h,animationDuration:"".concat(n,"s")};return v===T.c.Firing&&(!p&&Object(x.jsx)(K,{style:y,$tileSize:i})||Object(x.jsx)(X,{size:O,top:Number(y.top),left:Number(y.left),animate:!1,variant:T.d.Bomb,color:M.b.palette.color.error,collisionIndex:1,style:y,$tileSize:i}))||null},Q=n(555),H=function(t){var e=t.id,n=t.currentOnlinePlayerId,r=(t.name,t.size),a=t.tileSize,o=t.coordinates,i=o.top,c=o.left,u=t.keyboardConfig,s=t.is3D,l=t.highlight,d=void 0!==l&&l,p=Object(P.a)(t,["id","currentOnlinePlayerId","name","size","tileSize","coordinates","keyboardConfig","is3D","highlight"]),f=(a-r)/2,b=f+i,v=f+c;return s&&Object(x.jsx)(F,Object(j.a)({id:e,size:r,top:b,left:v,animate:!0,color:M.b.palette.color.success,style:{transform:Object(B.g)(a)},variant:T.h[e]},p))||Object(x.jsx)(Q.a,Object(j.a)({id:e,currentOnlinePlayerId:n,name:e,coordinates:{top:b,left:v},keyboardConfig:u,highlight:d,size:r},p))},J=n(552),_=function(t){var e=t.state,n=t.provider,r=t.playerId,a=t.gameId,o=n.triggerExplosion,i=n.onExplosionComplete,c=n.updatePlayerIsWalking,u=e.gameMap,s=e.players,l=e.bombs,d=e.is3D,p=e.config,f=Object($.a)(a||"").onPlayerDeath;return Object(x.jsxs)(x.Fragment,{children:[Object.entries(s).map((function(t){var e=Object(N.a)(t,2),n=e[0],a=e[1],o=a.coordinates,i=a.state,s=Object(P.a)(a,["coordinates","state"]),l=!Object(B.n)(i,p.powerUps),b=Object(B.o)(u,o,p.sizes.movement);return l&&Object(x.jsx)(H,Object(j.a)({currentOnlinePlayerId:r,name:"Bomber",size:p.sizes.character,tileSize:p.sizes.tile,coordinates:o,is3D:d,highlight:b,onPlayerIsWalking:c},s),n)||Object(x.jsx)(J.a,{id:n,name:n,coordinates:o,size:p.sizes.character,explodingDuration:p.duration.bomb.exploding,onDeathAnimationComplete:f},n)})),Object.values(l).map((function(t){var e,n=t.id,a=t.playerId,c=Object(P.a)(t,["id","playerId"]),u=null===(e=s[a])||void 0===e?void 0:e.state;if(!u)return null;var l=Object(B.k)(u,T.j.BombSize,p.powerUps);return Object(x.jsx)(Y,Object(j.a)(Object(j.a)({id:n,playerId:a,currentOnlinePlayerId:r},c),{},{color:M.b.palette.color.error,tileSize:p.sizes.tile,explosionSize:l,firingDuration:p.duration.bomb.firing,explodingDuration:p.duration.bomb.exploding,triggerExplosion:o,onExplosionComplete:i,is3D:d}),n)}))]})},tt=n(567),et=n(543),nt=h.d.div.attrs((function(t){var e=t.$size,n=t.$top,r=t.$left,a=t.$color;return{style:Object(j.a)({width:e,height:e,top:n,left:r},a&&{backgroundColor:a})}}))(f||(f=Object(O.a)(["\n\tposition: absolute;\n\t/* background-color: ","; */\n\tborder: 1px solid ",";\n\t","\n"])),M.b.palette.background.secondary,M.b.palette.background.primary,(function(t){var e=t.$color,n=t.$collisionIndex,r=t.$animate,a=t.$fireSquare,o=t.$firingDuration;return a&&Object(h.c)(b||(b=Object(O.a)(["\n\t\t\t\t\tborder: none;\n\t\t\t\t\tanimation: ","\n\t\t\t\t\t\t","s var(--ease-in-out-quint)\n\t\t\t\t\t\tforwards;\n\t\t\t\t"])),function(t){var e=0,n=0,r="",a="",o="",i="";return t===T.d.FireHorizontal?e=1:t===T.d.FireVertical?n=1:(e=.5,n=.5,r=" rotate(90deg)",a=" rotate(360deg)",o="border-radius: 50%;",i="border-radius: 0%;"),Object(h.e)(p||(p=Object(O.a)(["\n\t\t// cool effect\n\t\t/* 0% { border: 16px solid ","; transform: scale(",", ",")","; "," } */\n\t\t0% { background-color: ","; transform: scale(",", ",")","; "," }\n\t\t20% { background-color: ","; }\n\t\t40% { background-color: ","; }\n\t\t50% { "," }\n\t\t60% { background-color: ","; }\n\t\t80% { background-color: ","; }\n\t\t100% { background-color: ","; transform: scale(1)",";  }\n\t"])),M.b.palette.background.primary,e,n,r,o,M.b.palette.background.primary,e,n,r,o,M.b.palette.color.error,M.b.palette.color.info,i,M.b.palette.color.error,M.b.palette.color.info,M.b.palette.color.error,a)}(a),(o||1)/2)||r&&e&&Object(h.c)(v||(v=Object(O.a)(["\n\t\t\t\t\ttransform: scale(0, 0);\n\t\t\t\t\tz-index: 9999;\n\t\t\t\t\tanimation: ","\n\t\t\t\t\t\tvar(--block-animation-duration) ease\n\t\t\t\t\t\tcalc(\n\t\t\t\t\t\t\t"," *\n\t\t\t\t\t\t\t\tvar(--incremental-animation-delay)\n\t\t\t\t\t\t)\n\t\t\t\t\t\tforwards;\n\t\t\t\t"])),Object(et.a)(),n)||""})),rt=function(t){var e=t.size,n=t.top,r=t.left,a=t.color,o=t.collisionIndex,i=t.animate,c=void 0!==i&&i,u=t.fireSquare,s=t.firingDuration;return Object(x.jsx)(nt,{$size:e,$top:n,$left:r,$color:a,$collisionIndex:o,$animate:c,$fireSquare:u,$firingDuration:s})},at=Object(S.memo)(rt),ot=n(546),it=n(554),ct=function(t){var e=t.variant,n=t.top,r=t.left,a=t.size,o=it.a[e],i=o.icon,c=o.color;return Object(x.jsx)(ot.a,{$top:n,$left:r,$size:a,children:Object(x.jsx)(i,{color:c})})},ut=h.d.div(m||(m=Object(O.a)(["\n\t","\n\tborder-radius: ",";\n\tbackground-color: ",";\n\tposition: relative;\n\tbox-shadow: 0 10px 20px rgba(0, 0, 0, 0.5), 0 6px 6px rgba(0, 0, 0, 0.6);\n\ttransition: transform var(--block-animation-duration);\n\n\t","\n"])),(function(t){var e=t.$mapSize,n=t.$tileSize;return"\n\t\twidth: calc(".concat(n,"px * ").concat(e,");\n\t\theight: calc(").concat(n,"px * ").concat(e,");\n\t")}),M.b.shape.borderRadius,M.b.palette.background.secondary,(function(t){var e=t.$is3D,n=t.$isTopView,r="";return e&&(r+="transform-style: preserve-3d;",n||(r+="\ntransform: rotateX(-24deg) rotateY(-24deg) rotateX(90deg);")),r})),st=function(t){var e=t.sizes,n=e.map,r=e.tile,a=t.firingDuration,o=t.gameMap,i=t.is3D,c=t.isTopView,u=t.animationCounter,s=t.children,l=u!==Object(tt.a)(u);Object(S.useEffect)((function(){l=!0}),[]);var d=1;return Object(x.jsxs)(ut,{$mapSize:n,$tileSize:r,$is3D:i,$isTopView:c,children:[Object.keys(o).map((function(t,e){return Object.values(o[t]).map((function(t,n){var o,c=t===T.k.NonBreaking||t===T.k.Breaking,u="".concat(e,"_").concat(n),s=r,p=e*r,f=n*r;if(Object(B.p)(t))return Object(x.jsx)(ct,{size:s,variant:t,top:p,left:f},u);t!==T.d.FireCore&&t!==T.d.FireHorizontal&&t!==T.d.FireVertical||(o=t);var b=Object(j.a)({key:u,size:s,top:p,left:f,animate:l,variant:t,fireSquare:o,firingDuration:a},c&&{color:M.b.palette.color[t===T.k.NonBreaking?"secondary":"primary"],collisionIndex:d++});return i&&(c&&Object(x.jsx)(F,Object(j.a)({},b))||Object(x.jsx)(at,Object(j.a)({},b)))||Object(x.jsx)(at,Object(j.a)({},b))}))})),s]})},lt=function(t){var e=t.children,n=t.isSideView,r=Object(P.a)(t,["children","isSideView"]);return Object(x.jsx)(st,Object(j.a)(Object(j.a)({isTopView:!n},r),{},{children:e}))},dt=function(t){var e=Object(g.a)(t),n=function(t){var e=t.state,n=e.is3D,r=e.gameMap,a=e.isSideView,o=e.animationCounter,i=e.config,c=t.gameId,u=t.type;return{gameContainerProps:{is3D:n},gameSettingProps:Object(j.a)(Object(j.a)({},t),{},{type:u}),gameMapProps:{sizes:i.sizes,gameMap:r,is3D:n,isSideView:a,animationCounter:o,firingDuration:i.duration.bomb.firing},gameContentProps:Object(j.a)(Object(j.a)({},t),{},{gameId:c})}}(t),r=n.gameContainerProps,a=n.gameSettingProps,o=n.gameMapProps,i=n.gameContentProps;return Object(x.jsxs)(I,Object(j.a)(Object(j.a)({},r),{},{children:[Object(x.jsx)(z,Object(j.a)({},a)),Object(x.jsx)(lt,Object(j.a)(Object(j.a)({},o),{},{children:Object(x.jsx)(_,Object(j.a)({},i))})),e]}))}}}]);
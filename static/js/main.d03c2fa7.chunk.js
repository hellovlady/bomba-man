(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{35:function(t,e,n){},45:function(t,e,n){},46:function(t,e,n){},47:function(t,e,n){"use strict";n.r(e);var r,a=n(0),o=n.n(a),i=n(16),c=n.n(i),s=(n(35),n(3)),l=n(4),u=l.c.div(r||(r=Object(s.a)(["\n\twidth: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n"]))),b=n(8),d={title:"Bomberman - Work In Progress",game:{blockDensity:6},size:{game:15,character:32,tile:32,movement:32,collisionMin:1,collisionMax:1,bomb:16,explosion:1},duration:{movement:200,bomb:{firing:2,exploding:2}},keyboardConfig:{player:{P1:{MoveUp:b.j,MoveRight:b.b,MoveDown:b.f,MoveLeft:b.a,DropBomb:b.h},P2:{MoveUp:b.i,MoveRight:b.e,MoveDown:b.c,MoveLeft:b.d,DropBomb:b.g}}}};d.size.collisionMin=Math.floor(d.size.game*d.size.game/3),d.size.collisionMax=Math.floor(d.size.game*d.size.game/2);var f,p,m,g,j,v,O,y,x,h=d,k=n(5),w=n(11),z=n(21),E=n(7),P=n(22);function C(t,e){var n=e||t,r=void 0!==e&&t||0;return Math.floor(Math.random()*(n-r))+r}!function(t){t.UP="Up",t.RIGHT="Right",t.DOWN="Down",t.LEFT="Left"}(f||(f={})),function(t){t.X="X",t.Y="Y"}(p||(p={})),function(t){t.Firing="Firing",t.Exploding="Exploding",t.Exploded="Exploded"}(m||(m={})),function(t){t.P1="P1",t.P2="P2",t.P3="P3",t.P4="P4"}(g||(g={})),(v=j||(j={})).Empty="T1",v.Breaking="T2",v.NonBreaking="T3",function(t){t.BombSize="PU1",t.Speed="PU2",t.Invincibility="PU3"}(O||(O={})),(y||(y={})).Basic="B1";var M,D,T,I,S,R,N,B,$,A,L,G,_,F,X,Y,U,Z,V,W=h.size.game-1,q=[[0,0],[0,1],[1,0],[0,W],[0,W-1],[1,W],[W,W],[W,W-1],[W-1,W],[W,0],[W,1],[W-1,0]],H=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q,n=[].concat(Object(P.a)(Object.keys(j)),Object(P.a)(Array(11-h.game.blockDensity).fill("Empty"))),r=Array(t).fill(0).map((function(){return Array(t).fill(0).map((function(){return j[n[C(n.length)]]}))}));return e.forEach((function(t){var e=Object(E.a)(t,2),n=e[0],a=e[1];r[n][a]!==j.Empty&&(r[n][a]=j.Empty)})),r},J=function(t){var e=t.top,n=t.left;return{ySquare:e/h.size.movement,xSquare:n/h.size.movement}},K=h.size.movement*(h.size.game-1),Q="translateZ(calc(var(--tile-size) / 2 * 1px)) rotateX(0deg) rotateY(0deg) scale(1, 1)",tt=(x={},Object(w.a)(x,p.X,{REPLACE:/rotateX\(-?\d+deg\)/g,FIND:Object(z.a)(/rotateX\((\x2D?[0-9]+)deg\)/,{degree:1})}),Object(w.a)(x,p.Y,{REPLACE:/rotateY\(-?\d+deg\)/g,FIND:Object(z.a)(/rotateY\((\x2D?[0-9]+)deg\)/,{degree:1})}),x),et=function(t,e){t.style.transition="".concat(h.duration.movement,"ms"),t.style.transform=function(t,e){var n=90,r=p.Y;return e!==f.DOWN&&e!==f.LEFT||(n*=-1),e!==f.UP&&e!==f.DOWN||(r=p.X),t.replace(tt[r].REPLACE,"rotate".concat(r,"(").concat(n,"deg)"))}(t.style.transform,e)},nt=function(t,e){var n,r=t.playerConfig,a=r.id,o=r.coordinates,i=o.top,c=o.left,s=r.ref,l=t.direction,u=t.is3D,b=t.gameMap,d=i,p=c;switch(l){case f.UP:d=i-h.size.movement;break;case f.RIGHT:p=c+h.size.movement;break;case f.DOWN:d=i+h.size.movement;break;case f.LEFT:p=c-h.size.movement}(function(t,e,n){var r,a=J({top:t,left:e}),o=a.xSquare,i=null===(r=n[a.ySquare])||void 0===r?void 0:r[o];return!(i===j.Breaking||i===j.NonBreaking)&&!(e<0||e>K)&&!(t<0||t>K)})(d,p,b)&&(u&&((n=s).style.transition="0ms",n.style.transform=Q),setTimeout((function(){u&&et(s,l),e({playerId:a,newCoordinates:{top:d,left:p}})}),0))},rt=function(t){return 2*(2*(t+1)-1)},at=function(t){var e=t.explosionAxis,n=t.explosionSize,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=.5,o=2,i=rt(n);r&&(a=0,o=1,i/=2);var c=o,s=o;return e===p.X?c=i:s=i,{x:c-=a,y:s-=a}},ot=function(t,e,n){for(var r=JSON.parse(JSON.stringify(t)),a=J(e),o=a.xSquare,i=a.ySquare,c=Math.max(0,i-n);c<=Math.min(h.size.game-1,i+n);c++)r[c][o]===j.Breaking&&(r[c][o]=j.Empty);for(var s=Math.max(0,o-n);s<=Math.min(h.size.game-1,o+n);s++)r[i][s]===j.Breaking&&(r[i][s]=j.Empty);return r},it=function(t,e,n){return{id:t,coordinates:{top:32*e,left:32*n},ref:null}},ct=n(2),st=function(t,e,n,r){if(!(t>W||e>W||t<0||e<0)){var a=r[t][e];if(t===n.top&&e===n.left)return 0;if(a===j.Empty)return 1;if(a===j.Breaking)return-1;if(a!==j.NonBreaking)return 0}},lt=function t(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c={},s=o?e:i.top,l=o?n:i.left;return Object.values(f).forEach((function(o){var i=e,u=n;switch(o){case f.LEFT:u-=1;break;case f.UP:i-=1;break;case f.RIGHT:u+=1;break;case f.DOWN:i+=1}var b=st(i,u,{top:s,left:l},r);c[o]={topCoordinate:i,leftCoordinate:u,score:b},a>0&&b&&(c[o]=Object(ct.a)(Object(ct.a)({},c[o]),{child:t(i,u,r,a-1,!1,{top:s,left:l})}))})),c},ut=function(t,e,n){var r=lt(t,e,n);console.log(r);var a,o=null,i=null;return Object.entries(r).forEach((function(t){var e=Object(E.a)(t,2),n=e[0],r=e[1],c=function(t,e){var n=null;return void 0===e.score?n:n=e.score}(0,r);(!i||c&&i<c)&&(i=c,o=r,a=n)})),o?a:null},bt=function(t,e){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=t}),[t]),Object(a.useEffect)((function(){var t=setInterval((function(){var t;null===(t=n.current)||void 0===t||t.call(n)}),e);return function(){return clearInterval(t)}}),[e])},dt=n(9),ft=h.size.game-1,pt=it("P1",0,0),mt=it("P2",0,ft),gt=it("P3",ft,ft),jt=it("P4",ft,0),vt="Game",Ot={players:{P1:pt},bombs:[],gameMap:H(h.size.game),is3D:!1,isSideView:!1,size:h.size.game,animationCounter:0},yt={P1:pt,P2:mt,P3:gt,P4:jt},xt="".concat(vt,"/SET_GAME_STATE"),ht="".concat(vt,"/START_GAME"),kt="".concat(vt,"/SET_GAME_MAP"),wt="".concat(vt,"/SET_PLAYER_REF"),zt="".concat(vt,"/MAKE_MOVE"),Et="".concat(vt,"/TRIGGER_MOVE"),Pt="".concat(vt,"/DROP_BOMB"),Ct="".concat(vt,"/REMOVE_BOMB"),Mt="".concat(vt,"/ON_EXPLOSION_COMPLETE"),Dt="".concat(vt,"/TRIGGER_ANIMATION"),Tt="".concat(vt,"/TOGGLE_GAME_DIMENSION"),It="".concat(vt,"/TOGGLE_GAME_PERSPECTIVE"),St="".concat(vt,"/TOGGLE_GAME_TWO_PLAYER"),Rt="".concat(vt,"/TOGGLE_GAME_NPC"),Nt=function(t){return t.Game||Ot},Bt=function(){return Object(dt.a)(Nt,(function(t){return t.players}))},$t=function(){return Object(dt.a)(Nt,(function(t){return t.is3D}))},At=function(){return Object(dt.a)(Nt,(function(t){return t.isSideView}))},Lt=function(){return Object(dt.a)(Nt,(function(t){return t.gameMap}))},Gt=function(t){return{type:kt,payload:t}},_t=function(){var t=Object(k.b)(),e=Object(k.c)(Object(dt.a)(Nt,(function(t){return t.size}))),n=Object(a.useCallback)((function(e){return t(function(t){return{type:xt,payload:t}}(e))}),[t]),r=Object(a.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t(Gt({gameMap:e,animate:n}))}),[t]),o=Object(a.useCallback)((function(){return r(H(e),!0)}),[e,r]),i=Object(a.useCallback)((function(e){return t({type:wt,payload:e})}),[t]),c=Object(a.useCallback)((function(e){return t({type:zt,payload:e})}),[t]),s=Object(a.useCallback)((function(e){return t((n=Object(ct.a)(Object(ct.a)({},e),{},{onComplete:c}),{type:Et,payload:n}));var n}),[t,c]),l=Object(a.useCallback)((function(e){return t({type:Pt,payload:e})}),[t]),u=Object(a.useCallback)((function(e){return t({type:Ct,payload:e})}),[t]),b=Object(a.useCallback)((function(e){t({type:Mt,payload:e})}),[t]),d=Object(a.useCallback)((function(){return t({type:Dt})}),[t]),f=Object(a.useCallback)((function(){return t({type:Tt})}),[t]),p=Object(a.useCallback)((function(){return t({type:It})}),[t]),m=Object(a.useCallback)((function(){return t({type:St})}),[t]),g=Object(a.useCallback)((function(){return t({type:Rt})}),[t]);return{updateGameSettings:n,generateNewCollisionCoordinates:o,setPlayerRef:i,makeMove:c,triggerMove:s,dropBomb:l,removeBomb:u,onExplosion:b,triggerAnimation:d,toggleDimension:f,togglePerspective:p,toggleTwoPlayer:m,toggleNPC:g}},Ft=function(){var t=_t(),e=t.dropBomb,n=t.triggerMove,r=Object(k.c)(Lt()),o=Object(k.c)($t()),i=Object(k.c)(Bt()),c=Object(a.useRef)({P1:(new Date).getTime(),P2:(new Date).getTime(),P3:(new Date).getTime(),P4:(new Date).getTime()}),s=Object(a.useRef)({});return bt((function(){i.P4&&function(t){var e=t.players,n=t.gameMap,r=t.triggerMove,a=g.P4,o=e[a];if(o){var i=o.coordinates.top/h.size.character,c=o.coordinates.left/h.size.character,s=ut(i,c,n);console.log(s),s&&r({playerId:a,direction:s})}}({players:i,gameMap:r,triggerMove:n,dropBomb:e})}),h.duration.movement),Object(a.useEffect)((function(){var t=function(t,e){var r=function(t,e){var n=e.MoveUp,r=e.MoveRight,a=e.MoveDown,o=e.MoveLeft;return[t.current[n]&&f.UP,t.current[r]&&f.RIGHT,t.current[a]&&f.DOWN,t.current[o]&&f.LEFT].filter(Boolean)}(s,t);r.length&&r.forEach((function(t){n({playerId:e,direction:t})}))},r=function(){s.current&&Object.keys(i).forEach((function(n){var r=h.keyboardConfig.player[n];if(r){var a=i[n].coordinates;if(i[n].ref){var o=(new Date).getTime();o-c.current[n]>h.duration.movement&&(c.current[n]=o,t(r,n))}!function(t,n){var r=t.top,a=t.left,o=n.DropBomb;s.current[o]&&e({top:r,left:a})}(a,r)}}))},a=function(t){if(s.current&&c.current){var e="keydown"===t.type;!function(t,e){s.current[t.code]=e}(t,e),e&&r()}};return window.addEventListener("keyup",a),window.addEventListener("keydown",a),function(){window.removeEventListener("keyup",a),window.removeEventListener("keydown",a)}}),[e,r,o,i,n]),{}},Xt=n(1),Yt=l.c.div(M||(M=Object(s.a)(["\n\tdisplay: flex;\n\tjustify-content: center;\n\tflex-wrap: wrap;\n\n\t& > :first-child {\n\t\tmargin-right: 50px;\n\t\twidth: 15%;\n\t\t@media only screen and (max-width: 600px) {\n\t\t\twidth: 100%;\n\t\t\tmargin: 50px auto;\n\t\t\torder: 2;\n\t\t\t& button {\n\t\t\t\twidth: 80% !important;\n\t\t\t}\n\t\t}\n\t}\n"]))),Ut=l.c.div(D||(D=Object(s.a)(["\n\ttext-align: center;\n\t","\n"])),(function(t){return t.$is3D?"perspective: 1000":""})),Zt=function(t){var e=t.children,n=Object(k.c)($t());return Object(Xt.jsxs)(Ut,{$is3D:n,children:[Object(Xt.jsx)("h1",{children:h.title}),Object(Xt.jsx)(Yt,{children:e})]})},Vt=n(6),Wt={palette:{background:{primary:"var(--primary-background)",secondary:"var(--secondary-background)"},color:{primary:"var(--primary-color)",secondary:"var(--secondary-color)",error:"var(--error-color)",warning:"var(--warning-color)",success:"var(--success-color)",info:"var(--info-color)",default:"var(--default-color)"}},shape:{borderRadius:"var(--border-radius)",padding:"var(--padding)"},game:{character:{size:"var(--character-size)"},tile:{size:"var(--tile-size)"}}},qt=Object(l.a)(T||(T=Object(s.a)(["\n\t:root {\n\t\t/* #region COLORS */\n\t\t--primary-background: #13141b;\n\t\t--secondary-background: #1a1d28;\n\n\t\t--primary-color: #ec7ebd;\n\t\t--secondary-color: #763ee6;\n\n\t\t/* --error-color: rgb(255, 122, 105);\n\t\t--warning-color: rgb(241, 168, 23);\n\t\t--success-color: rgb(49, 162, 76);\n\t\t--info-color: rgb(134, 218, 255);\n\t\t--default-color: rgb(228, 230, 235); */\n\t\t--error-color: #f44336;\n\t\t--warning-color: #ff9800;\n\t\t--success-color: #2196f3;\n\t\t--info-color: #4caf50;\n\t\t--default-color: #E4E6EB;\n\t\t/* #endregion */\n\n\t\t/* #region UTILITIES */\n\t\t--border-radius: 4px;\n\t\t--padding: 10px;\n\t\t/* #endregion */\n\n\t\t/* #region GAME */\n\t\t--character-size: ","px;\n\t\t--tile-size: ","px;\n\t\t--game-size: ","px;\n\t\t/* #endregion */\n\t\t\n\t\t/* #region ANIMATIONS */\n\t\t/* @see https://easings.net/#easeInOutBack */\n\t\t--ease-in-out-back: cubic-bezier(0.68, -0.6, 0.32, 1.6);\n\t\t--incremental-animation-delay: 0.03s;\n\t\t--block-animation-duration: 0.5s;\n\t\t/* #endregion */\n\n\t\t/* #region GENERICS */\n\t\t*, ::before, ::after {\n\t\t\tbox-sizing: border-box;\n\t\t}\n\n\t\thtml,\n\t\tbody,\n\t\t#root {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tmargin: 0;\n\t\t\tpadding: 0;\n\t\t}\n\n\t\thtml {\n\t\t\tbackground-color: ",";\n\t\t\t/* color: #fff; */\n\t\t}\n\n\t\t#root {\n\t\t\tposition: relative;\n\t\t}\n\n\t\tpre {\n\t\t\twhite-space: pre-wrap;\n\t\t\tword-wrap: break-word;\n\t\t}\n\t\t/* #endregion */\n\n\t\t/* #region SCROLLBARS */\n\t\t*, ::before, ::after {\n\t\t\tscroll-behavior: smooth;\n\t\t\tscrollbar-color: black transparent;\n\t\t\tscrollbar-width: thin;\n\t\t}\n\n\t\t/* width */\n\t\t::-webkit-scrollbar {\n\t\t\twidth: 5px;\n\t\t\theight: 6px;\n\t\t}\n\n\t\t/* Track */\n\t\t::-webkit-scrollbar-track {\n\t\t\tbackground: #bfbfbf;\n\t\t}\n\n\t\t/* Handle */\n\t\t::-webkit-scrollbar-thumb {\n\t\t\tbackground: black;\n\t\t\tborder-radius: 10px;\n\t\t}\n\n\t\t/* Handle on hover */\n\t\t::-webkit-scrollbar-thumb:hover {\n\t\t\tbackground: rgba(0, 0, 0, 0.7);\n\t\t}\n\t\t/* #endregion */\n\t}\n"])),h.size.character,h.size.tile,h.size.game,Wt.palette.background.primary),Ht=Wt,Jt=l.c.button(I||(I=Object(s.a)(["\n\tbackground-color: ",";\n\t/* IGNORE SIZE FOR NOW */\n\tborder-radius: ",";\n\tpadding: ",";\n"])),(function(t){var e=t.$variant;return Ht.palette.color[e]}),Ht.shape.borderRadius,Ht.shape.padding),Kt=function(t){var e=t.variant,n=t.size,r=t.children,a=Object(Vt.a)(t,["variant","size","children"]);return Object(Xt.jsx)(Jt,Object(ct.a)(Object(ct.a)({$variant:e,$size:n},a),{},{children:r}))},Qt=Object(a.memo)(Kt),te=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(e){setTimeout(e,t)}))},ee=function(t){var e,n=t.active,r=void 0!==n&&n,a=t.onClick,o=t.children,i=Object(Vt.a)(t,["active","onClick","children"]);return Object(Xt.jsx)(Qt,Object(ct.a)(Object(ct.a)({style:{width:"100%",wordWrap:"break-word",marginBottom:10},variant:r?"success":"warning",size:"medium",onClick:(e=a,function(t){t.currentTarget.blur(),e(t)})},i),{},{children:o}))},ne=function(){var t=_t(),e=t.generateNewCollisionCoordinates,n=t.togglePerspective,r=t.toggleDimension,a=t.toggleTwoPlayer,o=t.toggleNPC,i=Object(k.c)($t()),c=Object(k.c)(At()),s=Object(k.c)(Bt()),l=[{label:"New Collision Coordinates",onClick:e},{label:"Toggle 3D (Experimental)",onClick:r,active:i},{label:"Toggle Side View",onClick:n,active:c,disabled:!i},{label:"Toggle Two-Player Mode",onClick:a,active:!!s.P2},{label:"Toggle NPC",onClick:o,active:!!s.P4}];return Object(Xt.jsx)("div",{children:l.map((function(t){var e=t.label,n=Object(Vt.a)(t,["label"]);return Object(Xt.jsx)(ee,Object(ct.a)(Object(ct.a)({},n),{},{children:e}),e)}))})},re=n(20),ae=n.n(re),oe=n(28),ie=(n(45),l.c.div(S||(S=Object(s.a)([""])))),ce=l.c.div(R||(R=Object(s.a)(["\n\t","\n\theight: calc(var(--tile-size) * 1px);\n\twidth: calc(var(--tile-size) * 1px);\n\ttransform-style: preserve-3d;\n\tposition: absolute;\n\ttransform-origin: center center;\n\ttransition: 300ms;\n\n\ttransform: scale(1, 1) translateZ(calc(var(--tile-size) / 2 * -1px));\n\n\t& > "," {\n\t\tborder: 1px solid var(--primary-background);\n\n\t\theight: calc(var(--tile-size) * 1px);\n\t\twidth: calc(var(--tile-size) * 1px);\n\t\t/* transform-origin: 50% 50%; */\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\tposition: absolute;\n\n\t\t/** @see https://codepen.io/jh3y/pen/BaKqQLJ */\n\t\t&:nth-of-type(1) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(2) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg) rotateY(180deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(3) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg) rotateY(90deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(4) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg) rotateY(-90deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(5) {\n\t\t\tbackground-color: var(--secondary-background);\n\t\t\ttransform: translate(-50%, -50%)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(6) {\n\t\t\ttransform: translate(-50%, -50%)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * -1px)) rotateX(180deg);\n\t\t}\n\t}\n\n\t&.bouncy-block- {\n\t\t&no-animation {\n\t\t\ttransform: translateZ(calc(var(--tile-size) / 2 * 1px));\n\t\t\t& > "," {\n\t\t\t\tbackground-color: var(--secondary-color);\n\t\t\t}\n\t\t}\n\n\t\t&0 {\n\t\t\ttransform: translateZ(calc(var(--tile-size) / 2 * 1px))\n\t\t\t\trotateX(0deg) rotateY(0deg) rotateZ(0deg);\n\t\t}\n\t}\n"])),(function(t){var e=t.$size;return"\n\t\t--tile-size: ".concat(e,";\n\t")}),ie,ie),se=Object(a.forwardRef)((function(t,e){var n=t.size,r=t.top,a=t.left,o=t.animate,i=void 0!==o&&o,c=t.variant,s=t.color,l=t.collisionIndex,u=t.style,b=t.className,d=Object(Vt.a)(t,["size","top","left","animate","variant","color","collisionIndex","style","className"]),f="cuboid bouncy-block-".concat((i?l:"no-animation")||0," ").concat(c).concat(b&&" ".concat(b)||"");return Object(Xt.jsx)(ce,Object(ct.a)(Object(ct.a)({className:f,style:Object(ct.a)(Object(ct.a)({},u),{},{top:r,left:a,width:n,height:n}),ref:e,$size:n},d),{},{children:Array(6).fill(0).map((function(t,e){return Object(Xt.jsx)(ie,{style:Object(ct.a)(Object(ct.a)({},s&&{backgroundColor:s}),{},{width:n,height:n})},e)}))}))})),le=function(t,e){return"".concat(e?"transform: translateZ(calc(var(--tile-size) / 2 * 2px)) rotateX(".concat(t,"deg) rotateY(").concat(t,"deg)"):"transform: rotate(".concat(t,"deg)"),";")},ue=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(l.d)(N||(N=Object(s.a)(["\n\t0% { "," }\n\t\n\t/* 40% -> 100% */\n\t","\n"])),le(0,t),Array(7).fill(0).map((function(e,n){return"".concat(10*(n+4),"% { ").concat(le((n+1)*(t&&(n<6?90:100)||n<4&&90||n<6&&270||360),t)," }")})).join("\n"))},be=l.c.div(B||(B=Object(s.a)(["\n\tanimation: "," linear forwards;\n"])),ue()),de=Object(l.c)(se)($||($=Object(s.a)(["\n\t/* "," */\n\tanimation: "," linear forwards;\n"])),(function(t){var e=t.size;return"\n\t\t--tile-size: ".concat(e,";\n\t")}),ue(!0)),fe=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=at(t,e),r=n.x,a=n.y,o=e?"translateZ(calc((var(--tile-size) / 2) * 1px)) ":"";return Object(l.d)(A||(A=Object(s.a)(["\n\t  \t0% {\n\t\t\ttransform: ","scale(1, 1);\n\t\t\t/* transform:"," scale(",", ","); */\n\t\t\t","\n\t\t}\n\t\t65% {\n\t\t\ttransform: ","scale(",", ",");\n\t\t}\n\t\t100% {\n\t\t\t","\n\t\t}\n\t"])),o,o,r,a,e?"":"opacity: 1;",o,r,a,e?"":"opacity: 0;")},pe=l.c.div(G||(G=Object(s.a)(["\n\t","\n"])),(function(t){var e=t.$explosionAxis,n=t.$explosionSize;return Object(l.b)(_||(_=Object(s.a)(["\n\t\tanimation: ","\n\t\t\tvar(--ease-in-out-back) forwards;\n\t"])),fe({explosionAxis:e,explosionSize:n}))})),me=Object(l.c)(se)(F||(F=Object(s.a)(["\n\t","\n"])),(function(t){var e=t.$explosionAxis,n=t.$explosionSize,r=t.$firingDuration;return Object(l.b)(X||(X=Object(s.a)(["\n\t\tanimation: ","\n\t\t\t","s var(--ease-in-out-back) forwards;\n\t\t& {\n\t\t\tborder: none;\n\t\t}\n\t\t& * {\n\t\t\tanimation: "," ","s ease-out\n\t\t\t\tforwards;\n\t\t}\n\t"])),fe({explosionAxis:e,explosionSize:n},!0),r,Object(l.d)(L||(L=Object(s.a)(["\n\t25% {\n\t\tborder-width: ","px\n\t}\n\t70% {\n\t\tbackground-color: black;\n\t}\n"])),.5*h.size.tile),.75*r)})),ge=function(t){var e=t.color,n=t.firingDuration,r=t.explodingDuration,o=t.explosionSize,i=t.id,c=t.top,s=t.left,l=t.onExplosion,u=t.is3D,b=Object(a.useState)(m.Firing),d=Object(E.a)(b,2),f=d[0],g=d[1];Object(a.useEffect)((function(){(function(){var t=Object(oe.a)(ae.a.mark((function t(){return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te(1e3*n);case 2:return g(m.Exploding),t.next=5,te(r/2*1e3);case 5:l({bombId:i,bombCoordinates:{top:c,left:s}});case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[r,o,n,l,c,s,i]);var j=h.size.bomb,v=j/2,O=null,x={position:"absolute",backgroundColor:e,width:j,height:j,top:c+v,left:s+v,animationDuration:"".concat(r,"s")};if(f===m.Exploding){var k={$explosionSize:o,$firingDuration:n};O=!u&&Object(Xt.jsxs)(Xt.Fragment,{children:[Object(Xt.jsx)(pe,Object(ct.a)({style:x,$explosionAxis:p.X},k)),Object(Xt.jsx)(pe,Object(ct.a)({style:x,$explosionAxis:p.Y},k))]})||Object(Xt.jsxs)(Xt.Fragment,{children:[Object(Xt.jsx)(me,Object(ct.a)({size:h.size.tile,top:c,left:s,variant:y.Basic,color:Ht.palette.color.error,collisionIndex:1,style:x,$explosionAxis:p.X},k)),Object(Xt.jsx)(me,Object(ct.a)({size:h.size.tile,top:c,left:s,variant:y.Basic,color:Ht.palette.color.error,collisionIndex:1,style:x,$explosionAxis:p.Y},k))]})}if(f===m.Firing){var w=Object(ct.a)(Object(ct.a)({},x),{},{animationDuration:"".concat(n,"s")});O=!u&&Object(Xt.jsx)(be,{style:w})||Object(Xt.jsx)(de,{size:j,top:Number(x.top),left:Number(x.left),animate:!1,variant:y.Basic,color:Ht.palette.color.error,collisionIndex:1,style:w})}return O},je=(n(46),Object(a.forwardRef)((function(t,e){t.id,t.name;var n=t.coordinates,r=n.top,o=n.left,i=t.style,c=t.keyboardConfig,s=Object(Vt.a)(t,["id","name","coordinates","style","keyboardConfig"]),l=Object(a.useState)(f.DOWN),u=Object(E.a)(l,2),b=u[0],d=u[1],p=Object(a.useState)(""),m=Object(E.a)(p,2),g=m[0],j=m[1],v=Object(a.useRef)((new Date).getTime()),O=!!g;return Object(a.useEffect)((function(){var t=function(t){return function(t,e){var n=e.MoveUp,r=e.MoveRight,a=e.MoveDown,o=e.MoveLeft;switch(!0){case t===n:return f.UP;case t===r:return f.RIGHT;case t===a:return f.DOWN;case t===o:return f.LEFT;default:return null}}(t.code,c)},e=function(){g&&j("")},n=function(n){var r=t(n);r?(v.current=(new Date).getTime(),j(r),function(t){d(t)}(r)):e()},r=function(){setTimeout((function(){var t=(new Date).getTime()-200;v.current>=t||e()}),200)};return document.addEventListener("keydown",n),document.addEventListener("keyup",r),function(){document.removeEventListener("keydown",n),document.removeEventListener("keyup",r)}}),[g,c]),Object(Xt.jsxs)("div",Object(ct.a)(Object(ct.a)({className:"character","data-facing":b,"data-walking":O.toString(),ref:e,style:Object(ct.a)(Object(ct.a)({},i),{},{top:r,left:o})},s),{},{children:[Object(Xt.jsx)("div",{className:"shadow pixel-art"}),Object(Xt.jsx)("div",{className:"spritesheet-wrapper",children:Object(Xt.jsx)("div",{className:"spritesheet pixel-art"})})]}))}))),ve=Object(a.forwardRef)((function(t,e){var n=t.id,r=t.name,a=t.coordinates,o=a.top,i=a.left,c=t.keyboardConfig,s=t.is3D,l=Object(Vt.a)(t,["id","name","coordinates","keyboardConfig","is3D"]),u=h.size,b=(u.tile-u.character)/2,d=b+o,f=b+i,p=Object(ct.a)({id:n,name:"".concat(r," ").concat(n),coordinates:{top:d,left:f},keyboardConfig:c,ref:e},l);return s&&Object(Xt.jsx)(se,Object(ct.a)({size:h.size.character,top:d,left:f,animate:!0,color:Ht.palette.color.success,style:{transform:Q},variant:g[n],ref:e},l))||Object(Xt.jsx)(je,Object(ct.a)({},p))})),Oe=function(){var t=_t().setPlayerRef,e=Object(k.c)(Bt()),n=Object(k.c)(Object(dt.a)(Nt,(function(t){return t.bombs}))),r=Object(k.c)($t()),a=_t().onExplosion,o=function(e){var n=e.id;return function(e){t({playerId:n,newRef:e})}};return Object(Xt.jsxs)(Xt.Fragment,{children:[Object.entries(e).map((function(t){var e=Object(E.a)(t,2),n=e[0],a=e[1],i=h.keyboardConfig.player[n];return Object(Xt.jsx)(ve,{id:n,name:"Bomber",coordinates:a.coordinates,keyboardConfig:i,is3D:r,ref:o(a)},n)})),n.map((function(t){var e=t.id,n=Object(Vt.a)(t,["id"]);return Object(Xt.jsx)(ge,Object(ct.a)(Object(ct.a)({id:e},n),{},{color:Ht.palette.color.error,explosionSize:h.size.explosion,firingDuration:h.duration.bomb.firing,explodingDuration:h.duration.bomb.exploding,onExplosion:a,is3D:r}),e)}))]})},ye=function(t){var e=Object(a.useRef)();return Object(a.useEffect)((function(){e.current=t}),[t]),e.current},xe=Object(l.d)(Y||(Y=Object(s.a)(["\n\t0% { transform: scale(0, 0); }\n\t25% { transform: scale(0.9, 1.1); }\n\t50% { transform: scale(1.1, 0.9); }\n\t75% { transform: scale(0.95, 1.05); }\n\t100% { transform: scale(1, 1); }\n"]))),he=l.c.div.attrs((function(t){var e=t.$size,n=t.$top,r=t.$left,a=t.$color;return{style:Object(ct.a)({width:e,height:e,top:n,left:r},a&&{backgroundColor:a})}}))(U||(U=Object(s.a)(["\n\tposition: absolute;\n\t/* background-color: ","; */\n\tborder: 1px solid ",";\n\t","\n"])),Ht.palette.background.secondary,Ht.palette.background.primary,(function(t){var e=t.$color,n=t.$collisionIndex;return t.$animate&&e&&Object(l.b)(Z||(Z=Object(s.a)(["\n\t\t\t\t\ttransform: scale(0, 0);\n\t\t\t\t\tz-index: 9999;\n\t\t\t\t\tanimation: ","\n\t\t\t\t\t\tvar(--block-animation-duration) ease\n\t\t\t\t\t\tcalc(\n\t\t\t\t\t\t\t"," *\n\t\t\t\t\t\t\t\tvar(--incremental-animation-delay)\n\t\t\t\t\t\t)\n\t\t\t\t\t\tforwards;\n\t\t\t\t"])),xe,n)||""})),ke=function(t){var e=t.size,n=t.top,r=t.left,a=t.animate,o=void 0!==a&&a,i=t.color,c=t.collisionIndex;return Object(Xt.jsx)(he,{$size:e,$top:n,$left:r,$animate:o,$color:i,$collisionIndex:c})},we=Object(a.memo)(ke),ze=l.c.div(V||(V=Object(s.a)(["\n\twidth: ",";\n\theight: ",";\n\tborder-radius: ",";\n\tbackground-color: ",";\n\tposition: relative;\n\tbox-shadow: 0 10px 20px rgba(0, 0, 0, 0.5), 0 6px 6px rgba(0, 0, 0, 0.6);\n\ttransition: transform var(--block-animation-duration);\n\n\t","\n"])),(function(t){var e=t.$size;return"calc(".concat(Ht.game.tile.size," * ").concat(e,")")}),(function(t){var e=t.$size;return"calc(".concat(Ht.game.tile.size," * ").concat(e,")")}),Ht.shape.borderRadius,Ht.palette.background.secondary,(function(t){var e=t.$is3D,n=t.$isTopView,r="";return e&&(r+="transform-style: preserve-3d;",n||(r+="\ntransform: rotateX(-24deg) rotateY(-24deg) rotateX(90deg);")),r})),Ee=function(t){var e=t.size,n=t.gameMap,r=t.is3D,a=t.isTopView,o=t.animationCounter,i=t.children,c=o!==ye(o),s=1;return Object(Xt.jsxs)(ze,{$size:e,$is3D:r,$isTopView:a,children:[n.map((function(t,e){return t.map((function(t,n){var a=t===j.NonBreaking||t===j.Breaking,o=Object(ct.a)({key:"".concat(e,"_").concat(n),size:h.size.tile,top:e*h.size.tile,left:n*h.size.tile,animate:c,variant:t},a&&{color:Ht.palette.color[t===j.NonBreaking?"secondary":"primary"],collisionIndex:s++});return r&&(a&&Object(Xt.jsx)(se,Object(ct.a)({},o))||Object(Xt.jsx)(we,Object(ct.a)({},o)))||Object(Xt.jsx)(we,Object(ct.a)({},o))}))})),i]})},Pe=function(t){var e=t.children,n=Object(k.c)(Lt()),r=Object(k.c)($t()),a=!Object(k.c)(At()),o=Object(k.c)(Object(dt.a)(Nt,(function(t){return t.animationCounter})));return Object(Xt.jsx)(Ee,{size:h.size.game,gameMap:n,is3D:r,isTopView:a,animationCounter:o,children:e})},Ce=function(){return Ft(),Object(Xt.jsxs)(Zt,{children:[Object(Xt.jsx)(ne,{}),Object(Xt.jsx)(Pe,{children:Object(Xt.jsx)(Oe,{})})]})},Me=n(10),De=n(29),Te=n(30),Ie=n(14),Se=function(t,e){Object.keys(e).forEach((function(n){t[n]=e[n]}))},Re=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot,e=arguments.length>1?arguments[1]:void 0;return Object(Ie.b)(t,(function(n){switch(e.type){case xt:Se(n,e.payload);break;case ht:n.players.P1=Object(Ie.a)(yt.P1);break;case kt:var r=e.payload,a=r.animate,o=r.gameMap;n.gameMap=o,a&&n.animationCounter++;break;case wt:var i=e.payload,c=i.playerId,s=i.newRef;if(!s)break;n.players[c].ref=Object(Ie.a)(s);break;case Et:var l=e.payload,u=l.playerId,b=l.direction,d=l.onComplete,f=t.is3D,p=t.players,m=t.gameMap,g=p[u];nt({playerConfig:g,direction:b,is3D:f,gameMap:m},d);break;case zt:var j=e.payload,v=j.playerId,O=j.newCoordinates;n.players[v].coordinates=O;break;case Pt:var y=e.payload,x=Object(ct.a)(Object(ct.a)({},y),{},{id:(new Date).toJSON()});n.bombs.push(x);break;case Ct:var k=e.payload;n.bombs=n.bombs.filter((function(t){return t.id!==k}));break;case Mt:var w=e.payload,z=w.bombId,E=w.bombCoordinates;n.bombs=n.bombs.filter((function(t){return t.id!==z}));var P=ot(t.gameMap,E,h.size.explosion);n.gameMap=P;break;case Dt:n.animationCounter++;break;case Tt:n.is3D=!n.is3D;break;case It:n.isSideView=!n.isSideView;break;case St:if(n.players.P2){delete n.players.P2;break}n.players.P2=Object(Ie.a)(yt.P2);break;case Rt:if(n.players.P4){delete n.players.P4;break}n.players.P4=Object(Ie.a)(yt.P4)}}))},Ne=Object(Me.combineReducers)(Object(w.a)({},vt,Re)),Be=function(t){var e=[De.a],n=Me.applyMiddleware.apply(void 0,e);return Object(Me.createStore)(Ne,t,Object(Te.composeWithDevTools)(n))}({});var $e=function(){return Object(Xt.jsxs)(k.a,{store:Be,children:[Object(Xt.jsx)(u,{children:Object(Xt.jsx)(Ce,{})}),Object(Xt.jsx)("div",{id:"created-by-numan"}),Object(Xt.jsx)(qt,{})]})},Ae=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,o=e.getLCP,i=e.getTTFB;n(t),r(t),a(t),o(t),i(t)}))};c.a.render(Object(Xt.jsx)(o.a.StrictMode,{children:Object(Xt.jsx)($e,{})}),document.getElementById("root")),Ae()}},[[47,1,2]]]);
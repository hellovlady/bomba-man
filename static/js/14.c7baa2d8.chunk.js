(this["webpackJsonpbomba-man"]=this["webpackJsonpbomba-man"]||[]).push([[14],{522:function(t,e,n){"use strict";n.r(e);var r=n(8),a=n(65),o=n(584),c=n(4),i=n(2),u=n(12),s=n(28),l=n(582),p=function(t,e,n){var r=Object(u.g)().push,a=Object(l.a)().removeOnlineGame,o=c.f.Lose;t&&e&&(o=t[e]===c.i.Alive?c.f.Win:c.f.Lose),Object(i.useEffect)((function(){Object.values(t).filter((function(t){return t===c.i.Alive})).length>1||(r("".concat(s.a,"/game-end"),{endGame:{players:t,currentOnlinePlayerId:e,gameEndCondition:o}}),n&&setTimeout((function(){a(n)}),1e3))}),[e,o,n,t,r,a])},d=n(587),b=n(558),f=n(11),v=n(282),j=n(9),m=n(7),g=n.n(m),O=n(16),h=n(49),y=n(66),x=n(102),w=n(281),k=n(556),C=function(t){Object(y.a)(n,t);var e=Object(x.a)(n);function n(t,a){var o;return Object(h.a)(this,n),(o=e.call(this)).state=t,o.updaters=a,o.getPlayerState=function(t){return o.state.players[t].state},o.updateGameState=function(){var t=Object(O.a)(g.a.mark((function t(e){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.update(e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.updatePlayers=function(){var t=Object(O.a)(g.a.mark((function t(e){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.update(Object(r.a)({},e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.addPlayer=function(){var t=Object(O.a)(g.a.mark((function t(e,n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.create(e,"/players/".concat(n));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),o.updatePlayer=function(){var t=Object(O.a)(g.a.mark((function t(e,n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.update(Object(j.a)({},n,e),"/players");case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),o.removePlayer=function(){var t=Object(O.a)(g.a.mark((function t(e){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.remove("/players/".concat(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.updatePlayerId=function(){var t=Object(O.a)(g.a.mark((function t(e,n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.update({id:e},"/players/".concat(n));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),o.updatePlayerDirection=function(t){var e=t.direction,n=t.id;o.updaters.update({direction:e},"/players/".concat(n))},o.updatePlayerIsWalking=function(t){var e=t.isWalking,n=t.id;o.updaters.update({isWalking:e},"/players/".concat(n))},o.updatePlayerCoordinates=function(){var t=Object(O.a)(g.a.mark((function t(e,n,r){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.update({coordinates:e,direction:r,isWalking:!0},"/players/".concat(n));case 1:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),o.updatePlayerState=function(){var t=Object(O.a)(g.a.mark((function t(e,n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.update(Object(r.a)({},e),"/players/".concat(n));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),o.incrementPlayerDeathCount=function(){var t=Object(O.a)(g.a.mark((function t(e){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.update({deathCount:o.getPlayerState(e).deathCount+1},"/players/".concat(e,"/state"));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.incrementPlayerPowerUp=function(){var t=Object(O.a)(g.a.mark((function t(e,n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.update(Object(j.a)({},e,o.getPlayerState(n).powerUps[e]+1),"/players/".concat(n,"/state/powerUps"));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),o.updateGameMap=function(){var t=Object(O.a)(g.a.mark((function t(e){var n,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.gameMap,r=e.animate,o.updaters.update({gameMap:n}),r&&o.incrementAnimationCounter();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.updateGameMapSquare=function(){var t=Object(O.a)(g.a.mark((function t(e,n){var r,a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.xSquare,a=e.ySquare,o.updaters.update(Object(j.a)({},r,n),"/gameMap/".concat(a));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),o.addBomb=function(){var t=Object(O.a)(g.a.mark((function t(e){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.update(Object(j.a)({},e.id,e),"/bombs");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.removeBomb=function(){var t=Object(O.a)(g.a.mark((function t(e){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.remove("/bombs/".concat(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.addPowerUp=function(){var t=Object(O.a)(g.a.mark((function t(e,n){var r,a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.ySquare,a=n.xSquare,o.updaters.update({powerUps:Object(j.a)({},r,Object(j.a)({},a,e))});case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),o.removePowerUp=function(){var t=Object(O.a)(g.a.mark((function t(e){var n,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.ySquare,r=e.xSquare,o.updaters.update({powerUps:Object(j.a)({},n,Object(j.a)({},r,null))});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.toggleIs3D=Object(O.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.update({is3D:!o.state.is3D});case 1:case"end":return t.stop()}}),t)}))),o.toggleIsSideView=Object(O.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.update({isSideView:!o.state.isSideView});case 1:case"end":return t.stop()}}),t)}))),o.incrementAnimationCounter=Object(O.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.updaters.update({animationCounter:o.state.animationCounter+1});case 1:case"end":return t.stop()}}),t)}))),o}return n}(w.a),S=function(t,e){var n=Object(k.a)("online/".concat(t,"/gameState")),a=Object(i.useRef)(new C(e,n)),o=Object(i.useRef)(new v.a(e,a.current)),c=Object(i.useRef)(e);Object(i.useEffect)((function(){a.current=new C(e,n),o.current=new v.a(e,a.current)}),[e,n]);var u=Object(i.useCallback)((function(t){a.current.updateGameState(t)}),[]),s=Object(i.useCallback)((function(t){a.current.updateGameMap(t)}),[]),l=Object(i.useCallback)((function(){s({gameMap:Object(f.g)(c.current.config.sizes,c.current.config.tiles.blockTileChance,c.current.players),animate:!0})}),[s]),p=Object(i.useCallback)((function(t,e){o.current.updatePlayerDirection({direction:t,id:e})}),[]),d=Object(i.useCallback)((function(t,e){o.current.updatePlayerIsWalking({isWalking:t,id:e})}),[]),b=Object(i.useCallback)((function(t){o.current.makeMove(t)}),[]),j=Object(i.useCallback)((function(t){o.current.triggerMove(Object(r.a)(Object(r.a)({},t),{},{onComplete:b}))}),[o,b]),m=Object(i.useCallback)((function(t){o.current.dropBomb(t)}),[]),g=Object(i.useCallback)((function(t,e){o.current.triggerExplosion(t,e)}),[]),O=Object(i.useCallback)((function(t){o.current.onExplosionComplete(t)}),[]),h=Object(i.useCallback)((function(){o.current.triggerGameAnimation()}),[]),y=Object(i.useCallback)((function(){o.current.toggleGameDimension()}),[]),x=Object(i.useCallback)((function(){o.current.toggleGamePerspective()}),[]),w=Object(i.useCallback)((function(){o.current.toggleGameTwoPlayer()}),[]),S=Object(i.useCallback)((function(){o.current.toggleGameNpc()}),[]);return{startGame:function(){return null},updateGameSettings:u,generateNewCollisionCoordinates:l,updatePlayerDirection:p,updatePlayerIsWalking:d,makeMove:b,triggerMove:j,dropBomb:m,triggerExplosion:g,onExplosionComplete:O,triggerAnimation:h,toggleDimension:y,togglePerspective:x,toggleTwoPlayer:w,toggleNPC:S}},z=function(t){var e=Object(b.a)(t),n=e.pending,r=e.error,a=e.game,o=a.gameState,i=a.gamePlayers;return{provider:S(t,o),pending:n,error:r,state:o,type:c.g.Online,gamePlayers:i}},P=n(6);e.default=function(t){var e,n=t.location,c=t.match.params.id,i=z(c),u=i.pending,s=i.error,l=Object(a.a)(i,["pending","error"]),f=Object(b.a)(c).game,v=null===n||void 0===n||null===(e=n.state)||void 0===e?void 0:e.playerId,j=(null===f||void 0===f?void 0:f.gamePlayers)||{};return Object(d.a)(c,v),p(j,v,c),u||s||Object(P.jsx)(o.a,Object(r.a)(Object(r.a)({},l),{},{playerId:v,gameId:c}))}},547:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r,a=n(34),o=n(546),c=n(543),i=n(44),u=n(29),s=n(202),l=n(6),p=Object(u.d)(c.a)(r||(r=Object(a.a)(["\n\tcolor: ",";\n"])),i.b.palette.color.error),d=function(t){var e=t.children,n=t.message,r=void 0===n?"Either the game is not found or you don't have access to it.":n;return Object(l.jsxs)(o.a,{fullHeight:!0,children:[Object(l.jsx)(s.a,{spacing:"5"}),Object(l.jsx)(p,{children:r}),Object(l.jsx)(s.a,{spacing:"10"}),e]})}},556:function(t,e,n){"use strict";var r=n(7),a=n.n(r),o=n(16),c=n(204),i=n(547),u=n(101),s=n(6);e.a=function(t){var e=Object(u.useFirebase)();Object(u.useFirebaseConnect)([t]);var n=function(e){return"".concat(t).concat(e||"")};return{create:function(){var t=Object(o.a)(a.a.mark((function t(){var r,o,c,i,u,s,l,p,d=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=d.length,o=new Array(r),c=0;c<r;c++)o[c]=d[c];return i=o[0],u=o[1],s=o[2],t.prev=2,t.next=5,e.push(n(u),i);case 5:return p=t.sent,null===s||void 0===s||null===(l=s.onSuccess)||void 0===l||l.call(s,p),t.abrupt("return",p);case 10:return t.prev=10,t.t0=t.catch(2),(null===s||void 0===s?void 0:s.onError)&&s.onError(t.t0),t.abrupt("return",t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),read:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],a=!Object(u.isLoaded)(r)&&Object(s.jsx)(c.default,{}),o=Object(u.isEmpty)(r)&&Object(s.jsx)(i.a,{});return{state:r,pending:a,error:o}},update:function(){var t=Object(o.a)(a.a.mark((function t(){var r,o,c,i,u,s,l,p,d=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=d.length,o=new Array(r),c=0;c<r;c++)o[c]=d[c];return i=o[0],u=o[1],s=o[2],t.prev=2,t.next=5,e.update(n(u),i);case 5:return p=t.sent,null===s||void 0===s||null===(l=s.onSuccess)||void 0===l||l.call(s,p),t.abrupt("return",p);case 10:return t.prev=10,t.t0=t.catch(2),(null===s||void 0===s?void 0:s.onError)&&s.onError(t.t0),t.abrupt("return",t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),push:function(){var t=Object(o.a)(a.a.mark((function t(){var r,o,c,i,u,s,l,p,d=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=d.length,o=new Array(r),c=0;c<r;c++)o[c]=d[c];return i=o[0],u=o[1],s=o[2],t.prev=2,t.next=5,e.push(n(u),i);case 5:return p=t.sent,null===s||void 0===s||null===(l=s.onSuccess)||void 0===l||l.call(s,p),t.abrupt("return",p);case 10:return t.prev=10,t.t0=t.catch(2),(null===s||void 0===s?void 0:s.onError)&&s.onError(t.t0),t.abrupt("return",t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),remove:function(){var t=Object(o.a)(a.a.mark((function t(){var r,o,c,i,u,s,l,p=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=p.length,o=new Array(r),c=0;c<r;c++)o[c]=p[c];return i=o[0],u=o[1],t.prev=2,t.next=5,e.remove(n(i));case 5:return l=t.sent,null===u||void 0===u||null===(s=u.onSuccess)||void 0===s||s.call(u,l),t.abrupt("return",l);case 10:return t.prev=10,t.t0=t.catch(2),(null===u||void 0===u?void 0:u.onError)&&u.onError(t.t0),t.abrupt("return",t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}()}}},558:function(t,e,n){"use strict";var r=n(9),a=n(101),o=n(104),c=n(48),i=function(t){return t.firebase},u=n(11),s=n(204),l=n(547),p=n(22),d=n(60),b=n(4),f=n(556),v=n(6),j=Object(p.a)((function(){return Promise.all([n.e(3),n.e(18)]).then(n.bind(null,509))})),m=Object(u.d)();e.a=function(t){var e,n,p,g,O,h,y,x,w="online/".concat(t);Object(a.useFirebaseConnect)(w);var k=Object(f.a)(w),C=k.update,S=k.remove,z=Object(o.c)(function(t){return Object(c.a)(i,(function(e){var n=e.data.online;return null===n||void 0===n?void 0:n[t]}))}(t)),P=!Object(a.isLoaded)(z)&&Object(v.jsx)(s.default,{}),D=Object(a.isEmpty)(z)&&Object(v.jsx)(l.a,{children:Object(v.jsx)(j,{noWrapper:!0})}),E=z;return{game:{gameId:t,gameState:{players:(null===E||void 0===E||null===(e=E.gameState)||void 0===e?void 0:e.players)||m.players,gameMap:(null===E||void 0===E||null===(n=E.gameState)||void 0===n?void 0:n.gameMap)||m.gameMap,bombs:(null===E||void 0===E||null===(p=E.gameState)||void 0===p?void 0:p.bombs)||m.bombs,powerUps:(null===E||void 0===E||null===(g=E.gameState)||void 0===g?void 0:g.powerUps)||m.powerUps,is3D:(null===E||void 0===E||null===(O=E.gameState)||void 0===O?void 0:O.is3D)||m.is3D,isSideView:(null===E||void 0===E||null===(h=E.gameState)||void 0===h?void 0:h.isSideView)||m.isSideView,animationCounter:(null===E||void 0===E||null===(y=E.gameState)||void 0===y?void 0:y.animationCounter)||m.animationCounter,config:(null===E||void 0===E||null===(x=E.gameState)||void 0===x?void 0:x.config)||m.config},gamePlayers:(null===E||void 0===E?void 0:E.gamePlayers)||{},started:(null===E||void 0===E?void 0:E.started)||!1},pending:P,error:D,isReady:!P&&!D,onPlayerJoin:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];C(Object(r.a)({},t,b.i.Alive),"/gamePlayers");var n=Object(u.e)(t,E.gameState.config,!e&&d.a.keyboardConfig||null);C(n,"/gameState/players/".concat(t))},onPlayerExit:function(t){S("/gamePlayers/".concat(t)),S("/gameState/players/".concat(t)),E.gamePlayers&&Object.keys(E.gamePlayers).length<=2&&C({started:!1})},onStartGame:function(){C({started:!0})},onPlayerDeath:function(t){C(Object(r.a)({},t,b.i.Dead),"/gamePlayers")}}}},566:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var r,a=n(8),o=n(65),c=n(34),i=n(2),u=n(29),s=n(44),l=n(6),p=u.d.button(r||(r=Object(c.a)(["\n\tbackground-color: ",";\n\t/* IGNORE SIZE FOR NOW */\n\tborder-radius: ",";\n\tpadding: ",";\n\tcursor: pointer;\n\ttransition: background-color ",";\n\n\t&:hover {\n\t\tbackground-color: ",";\n\t}\n"])),(function(t){var e=t.$variant;return s.b.palette.color[e]}),s.b.shape.borderRadius,s.b.shape.padding,s.b.transition.hover,(function(t){var e=t.$variant;return s.b.palette.color["".concat(e,"-lighter")]})),d=Object(i.forwardRef)((function(t,e){var n=t.variant,r=void 0===n?"default":n,c=t.size,i=void 0===c?"medium":c,u=t.children,s=Object(o.a)(t,["variant","size","children"]);return Object(l.jsx)(p,Object(a.a)(Object(a.a)({$variant:r,$size:i,ref:e},s),{},{children:u}))})),b=Object(i.memo)(d)},580:function(t,e,n){},582:function(t,e,n){"use strict";var r=n(7),a=n.n(r),o=n(16),c=n(101),i=n(556);e.a=function(){var t="online";Object(c.useFirebaseConnect)(t);var e=Object(i.a)(t),n=e.create,r=e.update,u=e.remove;return{createOnlineGame:function(){var t=Object(o.a)(a.a.mark((function t(e){var o,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n({gameState:e,started:!1});case 2:return o=t.sent,c=o.key,t.next=6,r({gameId:c},"/".concat(c));case 6:return t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),removeOnlineGame:function(){var t=Object(o.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:u("/".concat(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}},584:function(t,e,n){"use strict";n.d(e,"a",(function(){return st}));var r,a,o,c,i,u,s,l,p,d,b,f,v=n(8),j=n(586),m=n(34),g=n(29),O=n(202),h=n(6),y=g.d.div(r||(r=Object(m.a)(["\n\tdisplay: flex;\n\tjustify-content: center;\n\tflex-wrap: wrap;\n\n\t& > :first-child {\n\t\tmargin-right: 50px;\n\t\twidth: 15%;\n\t\t@media only screen and (max-width: 600px) {\n\t\t\twidth: 100%;\n\t\t\tmargin: 50px auto;\n\t\t\torder: 2;\n\t\t\t& button {\n\t\t\t\twidth: 80% !important;\n\t\t\t}\n\t\t}\n\t}\n"]))),x=g.d.div(a||(a=Object(m.a)(["\n\ttext-align: center;\n\t","\n"])),(function(t){return t.$is3D?"perspective: 1000":""})),w=function(t){var e=t.children,n=t.is3D;return Object(h.jsxs)(x,{$is3D:n,children:[Object(h.jsx)(O.a,{spacing:"2"}),Object(h.jsx)(y,{children:e})]})},k=n(65),C=n(2),S=n(566),z=n(542),P=function(t){var e=t.active,n=void 0!==e&&e,r=t.onClick,a=t.children,o=Object(k.a)(t,["active","onClick","children"]);return Object(h.jsx)(S.a,Object(v.a)(Object(v.a)({style:{width:"100%",wordWrap:"break-word",marginBottom:10},variant:n?"success":"warning",onClick:Object(z.d)(r)},o),{},{children:a}))},D=function(t){var e=t.state,n=t.provider,r=n.generateNewCollisionCoordinates,a=n.togglePerspective,o=n.toggleDimension,c=e.is3D,i=e.isSideView,u=Object(C.useMemo)((function(){return[{label:"New Collision Coordinates",onClick:r},{label:"Toggle 3D (Experimental)",onClick:o,active:c},{label:"Toggle Side View",onClick:a,active:i,disabled:!c}].map((function(t){var e=t.label,n=Object(k.a)(t,["label"]);return Object(h.jsx)(P,Object(v.a)(Object(v.a)({},n),{},{children:e}),e)}))}),[r,c,i,o,a]);return Object(h.jsx)("div",{children:u})},E=Object(C.memo)(D),I=n(80),$=n(44),M=n(4),G=n(11),V=n(558),A=n(7),N=n.n(A),q=n(16),F=function(){var t=Object(C.useRef)(!0);return Object(C.useEffect)((function(){return function(){t.current=!1}}),[]),t},W=(n(580),g.d.div(o||(o=Object(m.a)([""])))),B=g.d.div(c||(c=Object(m.a)(["\n\t","\n\theight: calc(var(--tile-size) * 1px);\n\twidth: calc(var(--tile-size) * 1px);\n\ttransform-style: preserve-3d;\n\tposition: absolute;\n\ttransform-origin: center center;\n\ttransition: 300ms;\n\n\ttransform: scale(1, 1) translateZ(calc(var(--tile-size) / 2 * -1px));\n\n\t& > "," {\n\t\tborder: 1px solid var(--primary-background);\n\n\t\theight: calc(var(--tile-size) * 1px);\n\t\twidth: calc(var(--tile-size) * 1px);\n\t\t/* transform-origin: 50% 50%; */\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\tposition: absolute;\n\n\t\t/** @see https://codepen.io/jh3y/pen/BaKqQLJ */\n\t\t&:nth-of-type(1) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(2) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg) rotateY(180deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(3) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg) rotateY(90deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(4) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg) rotateY(-90deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(5) {\n\t\t\tbackground-color: var(--secondary-background);\n\t\t\ttransform: translate(-50%, -50%)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(6) {\n\t\t\ttransform: translate(-50%, -50%)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * -1px)) rotateX(180deg);\n\t\t}\n\t}\n\n\t&.bouncy-block- {\n\t\t&no-animation {\n\t\t\ttransform: translateZ(calc(var(--tile-size) / 2 * 1px));\n\t\t\t& > "," {\n\t\t\t\tbackground-color: var(--secondary-color);\n\t\t\t}\n\t\t}\n\n\t\t&0 {\n\t\t\ttransform: translateZ(calc(var(--tile-size) / 2 * 1px))\n\t\t\t\trotateX(0deg) rotateY(0deg) rotateZ(0deg);\n\t\t}\n\t}\n"])),(function(t){var e=t.$size;return"\n\t\t--tile-size: ".concat(e,";\n\t")}),W,W),U=function(t){var e=t.size,n=t.top,r=t.left,a=t.animate,o=void 0!==a&&a,c=t.variant,i=t.color,u=t.collisionIndex,s=t.style,l=t.className,p=Object(k.a)(t,["size","top","left","animate","variant","color","collisionIndex","style","className"]),d="cuboid bouncy-block-".concat((o?u:"no-animation")||0," ").concat(c).concat(l&&" ".concat(l)||"");return Object(h.jsx)(B,Object(v.a)(Object(v.a)({className:d,style:Object(v.a)(Object(v.a)({},s),{},{top:n,left:r,width:e,height:e}),$size:e},p),{},{children:Array(6).fill(0).map((function(t,n){return Object(h.jsx)(W,{style:Object(v.a)(Object(v.a)({},i&&{backgroundColor:i}),{},{width:e,height:e})},n)}))}))},Z=function(t,e){return"".concat(e?"transform: translateZ(calc(var(--tile-size) / 2 * 2px)) rotateX(".concat(t,"deg) rotateY(").concat(t,"deg)"):"transform: rotate(".concat(t,"deg)"),";")},R=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(g.e)(i||(i=Object(m.a)(["\n\t0% { "," }\n\t\n\t/* 40% -> 100% */\n\t","\n"])),Z(0,t),Array(7).fill(0).map((function(e,n){return"".concat(10*(n+4),"% { ").concat(Z((n+1)*(t&&(n<6?90:100)||n<4&&90||n<6&&270||360),t)," }")})).join("\n"))},T=g.d.div(u||(u=Object(m.a)(["\n\tanimation: "," linear forwards;\n"])),R()),L=Object(g.d)(U)(s||(s=Object(m.a)(["\n\t/* "," */\n\tanimation: "," linear forwards;\n"])),(function(t){var e=t.size;return"\n\t\t--tile-size: ".concat(e,";\n\t")}),R(!0)),X=function(t){var e=t.color,n=t.firingDuration,r=t.explodingDuration,a=t.playerId,o=t.currentOnlinePlayerId,c=t.tileSize,i=t.id,u=t.top,s=t.left,l=t.triggerExplosion,p=t.onExplosionComplete,d=t.is3D,b=Object(C.useState)(M.c.Firing),f=Object(I.a)(b,2),v=f[0],j=f[1],m=F(),g=!o||a===o;Object(C.useEffect)((function(){g&&function(){var t=Object(q.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(z.c)(1e3*n);case 2:if(m.current){t.next=4;break}return t.abrupt("return");case 4:l(i,function(){var t=Object(q.a)(N.a.mark((function t(e){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(m.current){t.next=2;break}return t.abrupt("return");case 2:return j(M.c.Exploding),t.next=5,Object(z.c)(1e3*r);case 5:if(m.current){t.next=7;break}return t.abrupt("return");case 7:p(i),e.forEach((function(t){p(t)}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[]);var O=c/2,y=O/2,x={position:"absolute",backgroundColor:e,width:O,height:O,top:u+y,left:s+y,animationDuration:"".concat(n,"s")};return v===M.c.Firing&&(!d&&Object(h.jsx)(T,{style:x})||Object(h.jsx)(L,{size:O,top:Number(x.top),left:Number(x.left),animate:!1,variant:M.d.Bomb,color:$.b.palette.color.error,collisionIndex:1,style:x}))||null},Y=n(552),J=function(t){var e=t.id,n=t.currentOnlinePlayerId,r=(t.name,t.size),a=t.tileSize,o=t.coordinates,c=o.top,i=o.left,u=t.keyboardConfig,s=t.is3D,l=t.highlight,p=void 0!==l&&l,d=Object(k.a)(t,["id","currentOnlinePlayerId","name","size","tileSize","coordinates","keyboardConfig","is3D","highlight"]),b=(a-r)/2,f=b+c,j=b+i;return s&&Object(h.jsx)(U,Object(v.a)({id:e,size:r,top:f,left:j,animate:!0,color:$.b.palette.color.success,style:{transform:G.a},variant:M.h[e]},d))||Object(h.jsx)(Y.a,Object(v.a)({id:e,currentOnlinePlayerId:n,name:e,coordinates:{top:f,left:j},keyboardConfig:u,highlight:p,size:r},d))},H=n(549),K=function(t){var e=t.state,n=t.provider,r=t.playerId,a=t.gameId,o=n.triggerExplosion,c=n.onExplosionComplete,i=n.updatePlayerIsWalking,u=e.gameMap,s=e.players,l=e.bombs,p=e.is3D,d=e.config,b=Object(V.a)(a||"").onPlayerDeath;return Object(h.jsxs)(h.Fragment,{children:[Object.entries(s).map((function(t){var e=Object(I.a)(t,2),n=e[0],a=e[1],o=a.coordinates,c=a.state,s=Object(k.a)(a,["coordinates","state"]),l=!Object(G.n)(c,d.powerUps),f=Object(G.o)(u,o,d.sizes.movement);return l&&Object(h.jsx)(J,Object(v.a)({currentOnlinePlayerId:r,name:"Bomber",size:d.sizes.character,tileSize:d.sizes.tile,coordinates:o,is3D:p,highlight:f,onPlayerIsWalking:i},s),n)||Object(h.jsx)(H.a,{id:n,name:n,coordinates:o,size:d.sizes.character,explodingDuration:d.duration.bomb.exploding,onDeathAnimationComplete:b},n)})),Object.values(l).map((function(t){var e,n=t.id,a=t.playerId,i=Object(k.a)(t,["id","playerId"]),u=null===(e=s[a])||void 0===e?void 0:e.state;if(!u)return null;var l=Object(G.k)(u,M.j.BombSize,d.powerUps);return Object(h.jsx)(X,Object(v.a)(Object(v.a)({id:n,playerId:a,currentOnlinePlayerId:r},i),{},{color:$.b.palette.color.error,tileSize:d.sizes.tile,explosionSize:l,firingDuration:d.duration.bomb.firing,explodingDuration:d.duration.bomb.exploding,triggerExplosion:o,onExplosionComplete:c,is3D:p}),n)}))]})},Q=n(579),_=n(545),tt=g.d.div.attrs((function(t){var e=t.$size,n=t.$top,r=t.$left,a=t.$color;return{style:Object(v.a)({width:e,height:e,top:n,left:r},a&&{backgroundColor:a})}}))(p||(p=Object(m.a)(["\n\tposition: absolute;\n\t/* background-color: ","; */\n\tborder: 1px solid ",";\n\t","\n"])),$.b.palette.background.secondary,$.b.palette.background.primary,(function(t){var e=t.$color,n=t.$collisionIndex,r=t.$animate,a=t.$fireSquare;return a&&Object(g.c)(d||(d=Object(m.a)(["\n\t\t\t\t\tborder: none;\n\t\t\t\t\tanimation: ","\n\t\t\t\t\t\tcalc(var(--firing-duration) / 2)\n\t\t\t\t\t\tvar(--ease-in-out-quint) forwards;\n\t\t\t\t"])),function(t){var e=0,n=0,r="",a="",o="",c="";return t===M.d.FireHorizontal?e=1:t===M.d.FireVertical?n=1:(e=.5,n=.5,r=" rotate(90deg)",a=" rotate(360deg)",o="border-radius: 50%;",c="border-radius: 0%;"),Object(g.e)(l||(l=Object(m.a)(["\n\t\t// cool effect\n\t\t/* 0% { border: 16px solid ","; transform: scale(",", ",")","; "," } */\n\t\t0% { background-color: ","; transform: scale(",", ",")","; "," }\n\t\t20% { background-color: ","; }\n\t\t40% { background-color: ","; }\n\t\t50% { "," }\n\t\t60% { background-color: ","; }\n\t\t80% { background-color: ","; }\n\t\t100% { background-color: ","; transform: scale(1)",";  }\n\t"])),$.b.palette.background.primary,e,n,r,o,$.b.palette.background.primary,e,n,r,o,$.b.palette.color.error,$.b.palette.color.info,c,$.b.palette.color.error,$.b.palette.color.info,$.b.palette.color.error,a)}(a))||r&&e&&Object(g.c)(b||(b=Object(m.a)(["\n\t\t\t\t\ttransform: scale(0, 0);\n\t\t\t\t\tz-index: 9999;\n\t\t\t\t\tanimation: ","\n\t\t\t\t\t\tvar(--block-animation-duration) ease\n\t\t\t\t\t\tcalc(\n\t\t\t\t\t\t\t"," *\n\t\t\t\t\t\t\t\tvar(--incremental-animation-delay)\n\t\t\t\t\t\t)\n\t\t\t\t\t\tforwards;\n\t\t\t\t"])),Object(_.a)(),n)||""})),et=function(t){var e=t.size,n=t.top,r=t.left,a=t.color,o=t.collisionIndex,c=t.animate,i=void 0!==c&&c,u=t.fireSquare;return Object(h.jsx)(tt,{$size:e,$top:n,$left:r,$animate:i,$color:a,$collisionIndex:o,$fireSquare:u})},nt=Object(C.memo)(et),rt=n(550),at=n(551),ot=function(t){var e=t.variant,n=t.top,r=t.left,a=t.size,o=at.a[e],c=o.icon,i=o.color;return Object(h.jsx)(rt.a,{$top:n,$left:r,$size:a,children:Object(h.jsx)(c,{color:i})})},ct=g.d.div(f||(f=Object(m.a)(["\n\t","\n\tborder-radius: ",";\n\tbackground-color: ",";\n\tposition: relative;\n\tbox-shadow: 0 10px 20px rgba(0, 0, 0, 0.5), 0 6px 6px rgba(0, 0, 0, 0.6);\n\ttransition: transform var(--block-animation-duration);\n\n\t","\n"])),(function(t){var e=t.$mapSize,n=t.$tileSize;return"\n\t\twidth: calc(".concat(n,"px * ").concat(e,");\n\t\theight: calc(").concat(n,"px * ").concat(e,");\n\t")}),$.b.shape.borderRadius,$.b.palette.background.secondary,(function(t){var e=t.$is3D,n=t.$isTopView,r="";return e&&(r+="transform-style: preserve-3d;",n||(r+="\ntransform: rotateX(-24deg) rotateY(-24deg) rotateX(90deg);")),r})),it=function(t){var e=t.sizes,n=e.map,r=e.tile,a=t.gameMap,o=t.is3D,c=t.isTopView,i=t.animationCounter,u=t.children,s=i!==Object(Q.a)(i);Object(C.useEffect)((function(){s=!0}),[]);var l=1;return Object(h.jsxs)(ct,{$mapSize:n,$tileSize:r,$is3D:o,$isTopView:c,children:[Object.keys(a).map((function(t,e){return Object.values(a[t]).map((function(t,n){var a,c=t===M.k.NonBreaking||t===M.k.Breaking,i="".concat(e,"_").concat(n),u=r,p=e*r,d=n*r;if(Object(G.p)(t))return Object(h.jsx)(ot,{size:u,variant:t,top:p,left:d},i);t!==M.d.FireCore&&t!==M.d.FireHorizontal&&t!==M.d.FireVertical||(a=t);var b=Object(v.a)({key:i,size:u,top:p,left:d,animate:s,variant:t,fireSquare:a},c&&{color:$.b.palette.color[t===M.k.NonBreaking?"secondary":"primary"],collisionIndex:l++});return o&&(c&&Object(h.jsx)(U,Object(v.a)({},b))||Object(h.jsx)(nt,Object(v.a)({},b)))||Object(h.jsx)(nt,Object(v.a)({},b))}))})),u]})},ut=function(t){var e=t.sizes,n=t.children,r=t.gameMap,a=t.is3D,o=t.isSideView,c=t.animationCounter;return Object(h.jsx)(it,{sizes:e,gameMap:r,is3D:a,isTopView:!o,animationCounter:c,children:n})},st=function(t){var e=Object(j.a)(t),n=function(t){var e=t.state,n=e.is3D,r=e.gameMap,a=e.isSideView,o=e.animationCounter,c=e.config,i=t.gameId,u=t.type;return{gameContainerProps:{is3D:n},gameSettingProps:Object(v.a)(Object(v.a)({},t),{},{type:u}),gameMapProps:{sizes:c.sizes,gameMap:r,is3D:n,isSideView:a,animationCounter:o},gameContentProps:Object(v.a)(Object(v.a)({},t),{},{gameId:i})}}(t),r=n.gameContainerProps,a=n.gameSettingProps,o=n.gameMapProps,c=n.gameContentProps;return Object(h.jsxs)(w,Object(v.a)(Object(v.a)({},r),{},{children:[Object(h.jsx)(E,Object(v.a)({},a)),Object(h.jsx)(ut,Object(v.a)(Object(v.a)({},o),{},{children:Object(h.jsx)(K,Object(v.a)({},c))})),e]}))}},587:function(t,e,n){"use strict";var r=n(2),a=n(12),o=n(28),c=n(558),i=function(){return null},u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;Object(r.useEffect)((function(){return window.addEventListener("beforeunload",t),window.addEventListener("unload",e),function(){window.removeEventListener("beforeunload",t),window.removeEventListener("unload",e)}}))};e.a=function(t,e){var n=Object(c.a)(t).onPlayerExit,i=Object(a.g)().listen;u((function(){e&&n(e)})),Object(r.useEffect)((function(){return i((function(r){var a=r.pathname;e&&a!=="".concat(o.a,"/online/").concat(t)&&a!=="".concat(o.a,"/game-end")&&n(e)}))}),[t,i,n,e])}}}]);
//# sourceMappingURL=14.c7baa2d8.chunk.js.map
(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[15],{509:function(t,e,n){"use strict";n.r(e);var r,i=n(9),a=n(98),o=n(40),c=n(8),u=n(59),s=n(543),l=n(535),d=n(534),f=n(539),b=n(652),j=n(657),p=n(584),O=n(33),v=n(542),m=n(536),g=n(50),h=n(39),y=n(566),x=n(2),k=n(5),w=function(t){return Object(k.jsx)(d.a,Object(c.a)({icon:l.h},t))},I=Object(O.d)(p.a)(r||(r=Object(o.a)(["\n\tborder: 2px solid;\n\tborder-radius: 4px;\n\tpadding: 10px;\n\tfont-weight: bold;\n\theight: 45px;\n\ttransition: 0.3s;\n\n\t","\n"])),(function(t){var e=t.$length,n=t.$size,r=t.$isPressed;return"\n\t\t\theight: ".concat(n,"px;\n\t\t\twidth: ").concat(n*e,"px;\n\t\t\t").concat(r?"\n\t\t\t\t\t\tbackground: white;\n\t\t\t\t\t\tcolor: ".concat(g.b.palette.background.primary,";\n\t\t\t\t\t\tborder: 2px dashed ").concat(g.b.palette.background.primary,";\n\t\t\t\t"):"","\n\t\t")})),A=function(t){var e=t.children,n=t.size,r=void 0===n?45:n,i=t.length,a=void 0===i?1:i,o=t.isPressed;return Object(k.jsx)(I,{$length:a,$size:r,$isPressed:o,children:e})},C=function(t){var e=t.keyboardConfig,n=e.DropBomb,r=e.MoveDown,o=e.MoveLeft,u=e.MoveRight,s=e.MoveUp,l=n.label.length>1?3:1,d=Object(x.useState)({}),f=Object(a.a)(d,2),j=f[0],p=f[1];return Object(y.b)({onKeyDown:function(t){p((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(i.a)({},t,!0))}))},onKeyUp:function(t){p((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(i.a)({},t,!1))}))}}),Object(k.jsxs)(b.a,{container:!0,children:[Object(k.jsxs)(b.a,{container:!0,style:{width:135},children:[Object(k.jsx)(b.a,{container:!0,item:!0,xs:12,justify:"center",children:Object(k.jsx)(A,{isPressed:j[s.keyCode],children:s.label})}),Object(k.jsx)(b.a,{container:!0,item:!0,xs:12,children:[o,r,u].map((function(t){var e=t.label,n=t.keyCode;return Object(k.jsx)(A,{isPressed:j[n],children:e},e)}))})]}),Object(k.jsx)(b.a,{style:{width:10}}),Object(k.jsx)(b.a,{container:!0,style:{width:135},justify:"center",alignItems:"flex-end",children:Object(k.jsx)(A,{isPressed:j[n.keyCode],length:l,children:n.label})})]})},E=function(t){var e=t.keyboardConfig,n=t.playerId,r=t.side,i=void 0===r?"left":r,a=Object(j.a)((function(t){return t.breakpoints.down("sm")})),o="left"===i,s=Number(n.replace("P",""))-1;return Object(k.jsx)(b.a,Object(c.a)(Object(c.a)({container:!0},!o&&{justify:"flex-end"}),{},{children:Object(k.jsxs)(b.a,{container:!0,item:!0,xs:12,md:6,justify:a?"center":"flex-".concat(o?"start":"end"),children:[Object(k.jsx)(b.a,Object(c.a)(Object(c.a)({item:!0},!o&&{style:{order:3}}),{},{children:Object(k.jsx)(v.a,{size:80,name:n,id:n,showId:!0,isWalking:!0,keyboardConfig:{0:u.a.keyboardConfig[s]}})})),Object(k.jsx)(b.a,{item:!0,children:Object(k.jsx)(C,{keyboardConfig:e})})]})}))};e.default=function(){return Object(k.jsxs)(s.a,{style:{overflow:"hidden"},children:[Object(k.jsxs)(b.a,{container:!0,justify:"center",alignItems:"center",children:[Object(k.jsx)(w,{size:"3x"})," \xa0\xa0",Object(k.jsx)(f.a,{children:" Instructions "}),Object(k.jsx)(f.b,{style:{width:"100%"},children:"NOTE: In an online game, you can use both setup"}),Object(k.jsx)(f.b,{style:{width:"100%"},children:"NOTE2: You can test the keys on this screen :)"})]}),Object(k.jsx)(m.a,{spacing:"10"}),Object(k.jsx)(E,{playerId:"P1",keyboardConfig:{MoveUp:{label:"W",keyCode:h.j},MoveRight:{label:"D",keyCode:h.b},MoveDown:{label:"S",keyCode:h.f},MoveLeft:{label:"A",keyCode:h.a},DropBomb:{label:"Space",keyCode:h.h}}}),Object(k.jsx)(m.a,{spacing:"10"}),Object(k.jsx)(E,{playerId:"P2",keyboardConfig:{MoveUp:{label:"\u2191",keyCode:h.i},MoveRight:{label:"\u2192",keyCode:h.e},MoveDown:{label:" \u2193",keyCode:h.c},MoveLeft:{label:"\u2190",keyCode:h.d},DropBomb:{label:";",keyCode:h.g}},side:"right"})]})}},537:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return u}));var r,i,a=n(40),o=n(33),c=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(o.e)(r||(r=Object(a.a)(["\n\t0% { transform: scale(0, 0); }\n\t25% { transform: scale(0.9, 1.1); }\n\t50% { transform: scale(1.1, 0.9); }\n\t75% { transform: scale(0.95, 1.05); }\n\t100% { transform: scale(1, 1); "," }\n"])),t?"opacity: 1;":"")},u=function(t,e){return Object(o.e)(i||(i=Object(a.a)(["\n\t0%, 100% { \n\t\ttransform: translateY(0px); \n\t\tbox-shadow: 0 10px 10px #000000;\n\t}\n\t50% {\n\t\ttransform: translateY(-10px);\n\t\tbox-shadow: 0 20px ","px ",";\n\t}\n"])),Math.ceil(t/6)+10,e)}},538:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return i})),n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o}));var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(e){setTimeout(e,t)}))},i=function(t){return function(e){e.currentTarget.blur(),t(e)}},a=function(t){return null===t||void 0===t},o=function(t,e){return Object.keys(t)[Object.values(t).indexOf(e)]}},541:function(t,e,n){"use strict";var r,i,a=n(40),o=n(537),c=n(33),u=c.d.div(r||(r=Object(a.a)(["\n\tposition: absolute;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\topacity: 0;\n\tsvg {\n\t\theight: 100% !important;\n\t\twidth: 100% !important;\n\t\tmax-width: 70%;\n\t\tmax-height: 80%;\n\t}\n\t","\n"])),(function(t){var e=t.$size,n=t.$animationDelay,r=t.$top,u=t.$left;return Object(c.c)(i||(i=Object(a.a)(["\n\t\ttop: ","px;\n\t\tleft: ","px;\n\t\twidth: ","px;\n\t\theight: ","px;\n\t\tanimation: "," var(--block-animation-duration)\n\t\t\t"," ease-out forwards;\n\t"])),r,u,e,e,Object(o.a)(!0),n||"")}));e.a=u},542:function(t,e,n){"use strict";n.d(e,"g",(function(){return b})),n.d(e,"b",(function(){return j})),n.d(e,"f",(function(){return p})),n.d(e,"c",(function(){return O})),n.d(e,"i",(function(){return v})),n.d(e,"j",(function(){return m})),n.d(e,"h",(function(){return g})),n.d(e,"d",(function(){return h})),n.d(e,"a",(function(){return x})),n.d(e,"k",(function(){return w})),n.d(e,"e",(function(){return k}));var r,i=n(64),a=n(40),o=n(8),c=n(535),u=n(534),s=(n(545),n(548)),l=n(33),d=n(554),f=n(5),b=function(t){return Object(f.jsx)(u.a,Object(o.a)({icon:c.e},t))},j=function(t){return Object(f.jsx)(u.a,Object(o.a)({icon:c.c},t))},p=function(t){return Object(f.jsx)(u.a,Object(o.a)({icon:c.m},t))},O=function(t){return Object(f.jsx)(u.a,Object(o.a)({icon:c.d},t))},v=function(t){return Object(f.jsx)(u.a,Object(o.a)({icon:c.l},t))},m=function(t){return Object(f.jsx)(u.a,Object(o.a)({icon:c.n},t))},g=function(t){return Object(f.jsx)(u.a,Object(o.a)({icon:c.j},t))},h=function(t){return Object(f.jsx)(u.a,Object(o.a)({icon:c.f},t))},y=l.d.div(r||(r=Object(a.a)(["\n\tposition: relative;\n\tpointer-events: none;\n\tmin-width: 50px;\n\n\t","\n\n\t","\n"])),(function(t){return t.$showId?"":"\n\t\t\t.name {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t"}),(function(t){var e=t.$size;return"\n\t\t\twidth: ".concat(e,"px;\n\t\t\theight: ").concat(e,"px;\n\n\t\t\t> div {\n\t\t\t\t/* Gotta override as char is taking coordinates by default */\n\t\t\t\ttop: ").concat(e/2,"px !important;\n\t\t\t\tleft: calc(50% - ").concat(e,"px / 2) !important;\n\t\t\t}\n\t\t")})),x=function(t){var e=t.size,n=t.showId,r=void 0!==n&&n,a=Object(i.a)(t,["size","showId"]);return Object(f.jsx)(y,{$size:e,$showId:r,children:Object(f.jsx)(s.a,Object(o.a)({coordinates:{top:0,left:0},id:"P1",name:"Bomba-man",size:e},a))})},k={fontSize:40,width:50},w=Object(d.a)(k)},545:function(t,e,n){"use strict";var r=n(8),i=n(534),a=n(535),o=n(50),c=n(2),u=n(541),s=n(5),l=function(t){return Object(s.jsx)(i.a,Object(r.a)({icon:a.b},t))};e.a=function(t){var e=t.id,n=t.size,r=t.explodingDuration,i=t.coordinates,a=i.top,d=i.left,f=t.onDeathAnimationComplete;return Object(c.useEffect)((function(){setTimeout((function(){null===f||void 0===f||f(e)}),1e3*r+1e3)}),[]),Object(s.jsx)(u.a,{$top:a,$left:d,$size:n,$animationDelay:"".concat(r,"s"),children:Object(s.jsx)(l,{color:o.b.palette.color.default})})}},546:function(t,e,n){},547:function(t,e,n){"use strict";var r,i=n(9),a=n(8),o=n(534),c=n(535),u=n(4),s=n(50),l=n(5),d=(r={},Object(i.a)(r,u.j.Life,{color:s.b.palette.color.success,icon:function(t){return Object(l.jsx)(o.a,Object(a.a)({icon:c.g},t))}}),Object(i.a)(r,u.j.BombCount,{color:s.b.palette.color.error,icon:function(t){return Object(l.jsx)(o.a,Object(a.a)({icon:c.a},t))}}),Object(i.a)(r,u.j.BombSize,{color:s.b.palette.color.warning,icon:function(t){return Object(l.jsx)(o.a,Object(a.a)({icon:c.i},t))}}),Object(i.a)(r,u.j.MovementSpeed,{color:s.b.palette.color.info,icon:function(t){return Object(l.jsx)(o.a,Object(a.a)({icon:c.k},t))}}),r);e.a=d},548:function(t,e,n){"use strict";var r,i,a=n(8),o=n(98),c=n(64),u=n(40),s=n(4),l=n(2),d=n(11),f=n(33),b=n(50),j=(n(546),n(5)),p=f.d.div(r||(r=Object(u.a)(["\n\t","\n"])),(function(t){var e=t.$size,n=e/32,r=32*n,a=4*r,o=-1*n*32,c=e/4*-1,s=Math.min(-15,2.5*c),l=Math.ceil(r/6),d=Math.ceil(.8*r),j="\n\t\t\twidth: ".concat(r,"px;\n\t\t\theight: ").concat(r,"px;\n\t\t"),p="\n\t\t\twidth: ".concat(a,"px;\n\t\t\theight: ").concat(a,"px;\n\t\t");return Object(f.c)(i||(i=Object(u.a)(["\n\t\t\tposition: absolute;\n\t\t\tz-index: 9999;\n\t\t\t",";\n\t\t\ttransition-duration: 450ms;\n\n\t\t\t&#P1 .name {\n\t\t\t\tbackground-color: ",";\n\t\t\t}\n\t\t\t&#P2 .name {\n\t\t\t\tbackground-color: ",";\n\t\t\t}\n\t\t\t&#P3 .name {\n\t\t\t\tbackground-color: ",";\n\t\t\t}\n\t\t\t&#P4 .name {\n\t\t\t\tbackground-color: ",";\n\t\t\t}\n\n\t\t\t.character {\n\t\t\t\ttop: ","px;\n\t\t\t\ttransform: translate(","px);\n\n\t\t\t\t",";\n\t\t\t\toverflow: hidden;\n\t\t\t\tposition: relative;\n\t\t\t\t/* MOVEMENT TRANSITION */\n\t\t\t\ttransition-duration: 400ms;\n\n\t\t\t\t& .name {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tleft: 15px;\n\t\t\t\t\tright: 15px;\n\t\t\t\t\tfont-size: ","px;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\tborder: 1px dashed white;\n\t\t\t\t\tborder-radius: 9999px;\n\t\t\t\t\topacity: 1;\n\t\t\t\t\tmax-width: ","px;\n\t\t\t\t\tmargin: auto;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t}\n\n\t\t\t\t& .shadow {\n\t\t\t\t\t",";\n\t\t\t\t\topacity: 0.75;\n\t\t\t\t}\n\n\t\t\t\t& .spritesheet {\n\t\t\t\t\t",";\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tleft: 0;\n\t\t\t\t}\n\n\t\t\t\t/* DIRECTION */\n\t\t\t\t&[data-facing='Right'] .spritesheet {\n\t\t\t\t\ttop: ","px;\n\t\t\t\t}\n\t\t\t\t&[data-facing='Up'] .spritesheet {\n\t\t\t\t\ttop: ","px;\n\t\t\t\t}\n\t\t\t\t&[data-facing='Left'] .spritesheet {\n\t\t\t\t\ttop: ","px;\n\t\t\t\t}\n\n\t\t\t\t&[data-walking='true'] {\n\t\t\t\t\t/* MOVEMENT ANIMATION */\n\t\t\t\t\t.spritesheet {\n\t\t\t\t\t\tanimation: walkAnimation 0.6s steps(4) infinite;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* SHADOW ANIMATION */\n\t\t\t\t\t.shadow {\n\t\t\t\t\t\tanimation: shadowAnimation 0.3s infinite;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/* HIGHLIGHT/DAMAGE ANIMATION */\n\t\t\t\t&[data-highlight='true'] .spritesheet {\n\t\t\t\t\tanimation: opacityAnimation 0.6s steps(4) infinite;\n\t\t\t\t}\n\t\t\t}\n\t\t"])),j,b.b.palette.color.warning,b.b.palette.color.info,b.b.palette.color.success,b.b.palette.color.error,s,c,j,l,d,j,p,1*o,2*o,3*o)})),O=function(t){var e=t.id,n=t.shouldBindEvent,r=t.keyboardConfig,i=t.onPlayerIsWalking,a=t.setDirection,o=t.setIsWalking,c=Object(l.useRef)((new Date).getTime());Object(l.useEffect)((function(){var t=function(t){if(n){var u=function(t){return r?Object(d.j)(t.code,r):null}(t);if(!u)return null===i||void 0===i||i(!1,e),void o(!1);c.current=(new Date).getTime(),o(!0),function(t){a(t)}(u)}},u=function(){n&&setTimeout((function(){var t=(new Date).getTime()-200;c.current>=t||(o(!1),null===i||void 0===i||i(!1,e))}),200)};return n&&(document.addEventListener("keydown",t),document.addEventListener("keyup",u)),function(){document.removeEventListener("keydown",t),document.removeEventListener("keyup",u)}}),[e,r,i,a,o,n])};e.a=function(t){var e=t.id,n=t.currentOnlinePlayerId,r=t.name,i=t.coordinates,u=i.top,d=i.left,f=t.style,b=t.keyboardConfig,v=t.highlight,m=t.size,g=t.onPlayerIsWalking,h=t.isWalking,y=void 0!==h&&h,x=t.direction,k=void 0===x?s.b.DOWN:x,w=t.isNPC,I=void 0!==w&&w,A=Object(c.a)(t,["id","currentOnlinePlayerId","name","coordinates","style","keyboardConfig","highlight","size","onPlayerIsWalking","isWalking","direction","isNPC"]),C=Object(l.useState)(k),E=Object(o.a)(C,2),M=E[0],D=E[1],T=Object(l.useState)(y),N=Object(o.a)(T,2),B=N[0],S=N[1],P=!I&&(!n||e===n);O({id:e,currentOnlinePlayerId:n,keyboardConfig:b,shouldBindEvent:P,onPlayerIsWalking:g,setDirection:D,setIsWalking:S});var R=y,U=k;return P&&(R=B,U=M),Object(j.jsx)(p,Object(a.a)(Object(a.a)({id:e,style:Object(a.a)(Object(a.a)({},f),{},{top:u,left:d}),className:"character-wrapper"},A),{},{$size:2*m,children:Object(j.jsxs)("div",{className:"character","data-facing":U,"data-walking":R.toString(),"data-highlight":v,children:[Object(j.jsx)("div",{className:"name",children:r}),Object(j.jsx)("img",{className:"shadow pixel-art",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAWUlEQVRYR+3XsQkAIAxEUe2cRXADx3cDwVksJYX970T41sE7Xqrk9Pjlx/nJAgoooIACCiiggAIKKKDAXwKt9k0uqblGIXMxgwVo+A2mJSyABYKWroHyx58Hv0cUIWfm8TkAAAAASUVORK5CYII=",alt:"sprite skin"}),Object(j.jsx)("img",{className:"spritesheet pixel-art",src:"data:image/png;base64,UklGRuYBAABXRUJQVlA4TNkBAAAvf8AfEDegkI0kaB1Wc63vv4M4DQUByDA6SKk4ex2mqG0bqCCKrfwp7N5em/8A4P9XnTtjLpKQBLi1tbdt/gbqnTCAN/D5RCygH6yhQ4C1GfefQQG/fjA4FhH9Z9i2bZjkAbZdhsAn0N9Qh3Rps6Tr7enSZ9lZ1PV+6bPsLO4q4Fj1ORugiqJzAdemHQCwqMszM8vOoq4wzXNrso4rVOW6YeXnwAFDfg66i/MBl3QOm5+DDrAmX0BjNK5QAfYsOYVzJHCjcr1VjGTyTmZhrj2PUeUKvuZIeWc7iQ6TdK4URIcJSXIQyS75V0Q70f+F9g48tFcs4Nq6A4Vd69w7RGdRF4UBhmRnWZd1wlhZB3tQuabj0JFQXb4+n2pMKlfoeHgRzhW9cK7ZcyKVa2Kehcn3SWRURueqkpdcSWIEE0jv+ne4d0DeKxZw7a5jV/aO4IDByDlGSZe/VvYc1dUpu+RzNrlqa+ZxyrtOPESNyzs+5s9FtbRGUT2mUeUKdapHZe4wkzZ3oH+muYNvAMjO8q5tO7CMS7MHeJRxrSt3gHsgVzBlXYOUG3QYOtK4yLpTq8oVqMX4dFDlEh+OrVHlConjTLpcgrklARpJcDYpKl0xNco1wgRTwLUPTQA=",alt:"sprite skin"})]})}))}},554:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return b}));var r=n(38),i=n(8),a=n(4),o=n(547),c=n(538),u=n(549),s=n(555),l=n(542),d=n(5),f=function(t){return Object.values(a.j).reduce((function(e,n){var r=o.a[n],i=r.icon,a=r.color;return e[n]={icon:Object(d.jsx)(i,{style:t}),color:a},e}),{})},b=function(t,e,n){return Object.values(a.j).map((function(o){var d="".concat(Object(c.b)(a.j,o));return Object(i.a)(Object(i.a)({type:u.a.Rating,label:"".concat(d," (number)"),name:"".concat(t,".").concat(o),max:e},l.k[o]),n&&o===a.j.MovementSpeed&&{label:"".concat(d," (action interval, milliseconds)"),type:u.a.Slider,step:null,min:Math.min.apply(Math,Object(r.a)(n)),max:Math.max.apply(Math,Object(r.a)(n)),marks:Object(s.a)(n)})}))}},555:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(8);function i(t,e){if(Array.isArray(t))return t.map((function(t){return{value:t,label:t}}));var n=e-t;return Array(n+1).fill(0).map((function(e,i){var a=t+i;return Object(r.a)({value:a},(0===i||i===n)&&{label:a})}))}},559:function(t,e,n){"use strict";var r=n(2);e.a=function(t,e,n){var i=Object(r.useRef)(),a=Object(r.useRef)();Object(r.useEffect)((function(){i.current=t}),[t]);var o=Object(r.useCallback)((function(){a.current&&clearInterval(a.current)}),[]),c=Object(r.useCallback)((function(){var t;null===(t=i.current)||void 0===t||t.call(i)}),[]);return Object(r.useEffect)((function(){return n||(a.current=setInterval(c,e)),function(){return o()}}),[e,n,o,c]),Object(r.useEffect)((function(){n&&o()}),[n,o]),o}},560:function(t,e,n){"use strict";var r=n(2);e.a=function(t){var e=Object(r.useRef)();return Object(r.useEffect)((function(){e.current=t}),[t]),e.current}},566:function(t,e,n){"use strict";n.d(e,"b",(function(){return E}));var r,i,a=n(9),o=n(4),c=n(2),u=n(11),s=n(98),l=n(8),d=n(149);!function(t){t[t.IsDanger=-1e4]="IsDanger",t[t.IsNonBreakingTile=-100]="IsNonBreakingTile",t[t.IsNonAdjacentNonBreakingTile=-5]="IsNonAdjacentNonBreakingTile",t[t.IsStuck=0]="IsStuck",t[t.IsEmptyTile=2]="IsEmptyTile",t[t.IsBreakingTile=3]="IsBreakingTile",t[t.IsPlayer=4]="IsPlayer",t[t.IsPowerUp=1e3]="IsPowerUp"}(i||(i={}));var f=function(t,e){var n=t.ySquare,r=t.xSquare,i=e.ySquare,a=e.xSquare;return n!==i||r!==a},b=function(t,e){var n=t.ySquare,r=t.xSquare,i=e.ySquare,a=e.xSquare;return r===a&&(n===i+1||n===i-1)||n===i&&(r===a+1||r===a-1)},j=function(t,e,n,i){if(b(t,e)){var a=(new Date).getTime();return r.lastBombTime<=a-1e3*Object.values(r.bombDuration).reduce((function(t,e){return t+e}),0)&&(r.dropBomb(),r.lastBombTime=a),i}return f(t,e)?n:null},p=function(t,e,n){var a=t.ySquare,c=t.xSquare;if(!Object(u.q)(t,r.sizes.map)){var s,l=r.gameMap[a][c];if(function(t){var e=Object.values(r.bombs);if(!e.length)return!1;var n=[];return e.forEach((function(t){var e,i=t.playerId,a=t.top,c=t.left,s=r.players,l=Object(u.h)(r.gameMap,{top:a,left:c},(null===(e=s[i])||void 0===e?void 0:e.state)?Object(u.k)(s[i].state,o.j.BombSize,r.powerUpConfig):r.powerUpConfig.defaults[o.j.BombSize],r.sizes).coordinatesToSetOnFire;Object.values(l).flat().forEach((function(t){n.push(t)}))})),n.findIndex((function(e){return!f(e,t)}))>=0}(t))return i.IsDanger;if(Object.values(o.j).includes(l))return i.IsPowerUp*n;if(!f(t,e))return i.IsStuck;if(l===o.k.Empty)return i.IsEmptyTile;if(s=l,Object.values(o.h).includes(s)){var d=j(t,e,i.IsPlayer);if(null!==d)return d}if(l===o.k.Breaking){var p=j(t,e,i.IsBreakingTile);if(null!==p)return p}return l===o.k.NonBreaking?b(t,e)?i.IsNonBreakingTile:i.IsNonAdjacentNonBreakingTile:i.IsStuck}},O=function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=e.ySquare,u=e.xSquare,s={};return Object.values(o.b).forEach((function(e){var d=c,f=u;switch(r.id++,e){case o.b.LEFT:f--;break;case o.b.UP:d--;break;case o.b.RIGHT:f++;break;case o.b.DOWN:d++}var b=p({ySquare:d,xSquare:f},n,i);s[r.id]={score:b,hasChildren:i>0&&void 0!==b,parentId:a,direction:e,level:i},i>0&&b&&(s=Object(l.a)(Object(l.a)({},s),t({ySquare:d,xSquare:f},n,i-1,r.id)))})),s},v=function(t){return t.reduce((function(t,e){var n=e;(void 0===e.score&&(n=t),t.score>e.score&&(n=t),t.score<e.score&&(n=e),t.score===e.score)&&(n=0===Object(d.a)(2)?e:t);return n}))},m=function(t){var e={};return t.forEach((function(t){var n=t.parentId;e[n]?e[n].push(t):e[n]=[t]})),e},g=function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(null!==i){n=void 0===i?Object.values(e).filter((function(t){return!t.hasChildren})):Object.values(e).filter((function(t){return t.parentId===e[i].parentId}));var a=m(n);Object.entries(a).forEach((function(n){var i=Object(s.a)(n,2),a=i[0],o=i[1],c="null"===a?null:Number(a),u=v(o);c?(e[c].score=e[c].score+(u.score?u.score:0),t(e,c)):r.parentNodes.some((function(t){return t.direction===u.direction}))||r.parentNodes.push(u)}))}},h=function(t){r.id=0,r.parentNodes=[];var e=O(t,t,void 0);return g(e),v(r.parentNodes)},y=n(559),x=n(560),k=n(39),w=n(5),I=function(){var t=Object(c.useRef)({P1:document.getElementById("P1"),P2:document.getElementById("P2"),P3:document.getElementById("P3"),P4:document.getElementById("P4")});return{playerRefs:t,recalculate:function(){Object.keys(t.current).forEach((function(e){t.current[e]=document.getElementById(e)}))}}},A=function(){return Object(c.useRef)({P1:(new Date).getTime(),P2:(new Date).getTime(),P3:(new Date).getTime(),P4:(new Date).getTime()})},C=function(t,e){var n=A();return function(r){var i=t[r];if(!i)return!1;var a=i.state,c=(new Date).getTime(),s=Object(u.k)(a,o.j.MovementSpeed,e);return c-n.current[r]>s&&(n.current[r]=c,!0)}},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onKeyDown,n=t.onKeyUp,r=Object(c.useRef)({});return Object(c.useEffect)((function(){var t=function(t){if(r.current){var i="keydown"===t.type;t.code===k.h&&t.preventDefault(),function(t,e){r.current[t.code]=e}(t,i),i?null===e||void 0===e||e(t.code):null===n||void 0===n||n(t.code)}};return window.addEventListener("keyup",t),window.addEventListener("keydown",t),function(){window.removeEventListener("keyup",t),window.removeEventListener("keydown",t)}}),[e,n]),r},M=function(t,e,n){var r=t[e];return!!r&&!Object(u.n)(r.state,n)},D=function(t,e,n,r){var i=function(t,e,n){return Object(c.useMemo)((function(){var r,i=null===(r=t[e])||void 0===r?void 0:r.state;return i?Object(u.k)(i,o.j.MovementSpeed,n):null}),[e,t,n])}(t,e,n);Object(y.a)((function(){M(t,e,n)&&r(e)}),i||Number.MAX_SAFE_INTEGER,!i)},T=function(t,e,n){return function(r){Object.keys(t).forEach((function(i){if(M(t,i,n)){var a=t[i].keyboardConfig;if(a)Object(u.r)(a,"DropBomb").includes(r)&&e(i)}}))}},N=function(t){var e=t.playerId,n=t.players,r=t.powerUpConfig,i=t.cb;return D(n,e,r,i),null};e.a=function(t){var e=t.state,n=t.provider,i=t.type,s=t.playerId,l=n.dropBomb,d=n.triggerMove,f=e.gameMap,b=e.bombs,j=e.players,p=e.is3D,O=e.config,v=O.powerUps,m=O.sizes,g=O.duration.bomb,y=I().playerRefs,k=Object(c.useMemo)((function(){return i===o.g.Local?j:Object(a.a)({},s,j[s])}),[j]),M=E({onKeyDown:T(k,l,v)}),D=A(),B=function(t){var e=t.triggerMove,n=t.players,r=t.timeOutRef,i=t.keyMap,a=t.is3D,o=t.powerUpConfig,s=I(),l=s.playerRefs,d=s.recalculate,f=Object(x.a)(a);Object(c.useEffect)((function(){f!==a&&d()}),[a,f,d]);var b=C(n,o),j=function(t,n){var r=Object(u.i)(i,n);r.length&&r.forEach((function(n){e({playerId:t,direction:n,ref:l.current[t]})}))};return{move:j,handleActions:function(t){if(i.current&&r.current&&Object.values(i.current).filter(Boolean).length){var e=n[t].keyboardConfig;if(e&&Object.keys(e).length){var a=l.current[t];a||(l.current[t]=document.getElementById(t)),a&&b(t)&&j(t,e)}}}}}({triggerMove:d,players:k,timeOutRef:D,keyMap:M,is3D:p,powerUpConfig:v}).handleActions,S=C(j,v),P=function(t){y.current[t]||(y.current[t]=document.getElementById(t)),function(t){var e=t.playerId,n=t.players,i=t.gameMap,a=t.bombs,o=t.triggerMove,c=t.dropBomb,s=t.ref,l=t.powerUpConfig,d=t.sizes,f=t.bombDuration,b=n[e];if(r={id:0,parentNodes:[],lastBombTime:0,dropBomb:function(){return c(e)},gameMap:i,bombs:a,players:n,powerUpConfig:l,sizes:d,bombDuration:f},b){var j=Object(u.l)(b.coordinates,d.movement),p=h(j);((null===p||void 0===p?void 0:p.score)||0)>0&&o({playerId:e,direction:p.direction,ref:s})}}({playerId:t,dropBomb:l,gameMap:f,bombs:b,players:k,triggerMove:function(e){S(t)&&d(e)},ref:y.current[t],powerUpConfig:v,sizes:m,bombDuration:g})};return Object.keys(k).map((function(t){var e=k[t].isNPC;return Object(w.jsx)(N,{playerId:t,players:k,powerUpConfig:v,cb:e?P:B},t)}))}},584:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r,i=n(40),a=n(33).d.div(r||(r=Object(i.a)(["\n\twidth: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tflex-wrap: wrap;\n"])))}}]);
//# sourceMappingURL=15.c4e0524e.chunk.js.map
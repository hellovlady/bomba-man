(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{35:function(t,e,n){},45:function(t,e,n){},46:function(t,e,n){},47:function(t,e,n){"use strict";n.r(e);var r,a=n(0),o=n.n(a),i=n(16),c=n.n(i),s=(n(35),n(3)),l=n(4),u=l.c.div(r||(r=Object(s.a)(["\n\twidth: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n"]))),b=n(7),d={title:"Bomberman - Work In Progress",size:{game:15,character:32,tile:32,movement:32,collisionMin:1,collisionMax:1,bomb:16,explosion:1},duration:{movement:300,bomb:{firing:2,exploding:2}},keyboardConfig:{player:{P1:{MoveUp:b.j,MoveRight:b.b,MoveDown:b.f,MoveLeft:b.a,DropBomb:b.h},P2:{MoveUp:b.i,MoveRight:b.e,MoveDown:b.c,MoveLeft:b.d,DropBomb:b.g}}}};d.size.collisionMin=Math.floor(d.size.game*d.size.game/3),d.size.collisionMax=Math.floor(d.size.game*d.size.game/2);var f,p,m,j,g,O,v,y,x,h=d,k=n(11),w=n(21),z=n(8),E=n(22);function C(t,e){var n=e||t,r=void 0!==e&&t||0;return Math.floor(Math.random()*(n-r))+r}!function(t){t.UP="Up",t.RIGHT="Right",t.DOWN="Down",t.LEFT="Left"}(f||(f={})),function(t){t.X="X",t.Y="Y"}(p||(p={})),function(t){t.Firing="Firing",t.Exploding="Exploding",t.Exploded="Exploded"}(m||(m={})),function(t){t.P1="P1",t.P2="P2",t.P3="P3",t.P4="P4"}(j||(j={})),(O=g||(g={})).Empty="T1",O.Breaking="T2",O.NonBreaking="T3",function(t){t.BombSize="PU1",t.Speed="PU2",t.Invincibility="PU3"}(v||(v={})),(y||(y={})).Basic="B1";var P,M,D,T,S,I,R,N,$,A,L,B,G,_,F,X,Y,U,Z,V=h.size.game-1,W=[[0,0],[0,1],[1,0],[0,V],[0,V-1],[1,V],[V,V],[V,V-1],[V-1,V],[V,0],[V,1],[V-1,0]],q=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W,n=[].concat(Object(E.a)(Object.keys(g)),Object(E.a)(Array(10).fill("Empty"))),r=Array(t).fill(0).map((function(){return Array(t).fill(0).map((function(){return g[n[C(n.length)]]}))}));return e.forEach((function(t){var e=Object(z.a)(t,2),n=e[0],a=e[1];r[n][a]!==g.Empty&&(r[n][a]=g.Empty)})),r},H=function(t){var e=t.top,n=t.left;return{ySquare:e/h.size.movement,xSquare:n/h.size.movement}},J=h.size.movement*(h.size.game-1),K="translateZ(calc(var(--tile-size) / 2 * 1px)) rotateX(0deg) rotateY(0deg) scale(1, 1)",Q=(x={},Object(k.a)(x,p.X,{REPLACE:/rotateX\(-?\d+deg\)/g,FIND:Object(w.a)(/rotateX\((\x2D?[0-9]+)deg\)/,{degree:1})}),Object(k.a)(x,p.Y,{REPLACE:/rotateY\(-?\d+deg\)/g,FIND:Object(w.a)(/rotateY\((\x2D?[0-9]+)deg\)/,{degree:1})}),x),tt=function(t,e){t.style.transition="".concat(h.duration.movement,"ms"),t.style.transform=function(t,e){var n=90,r=p.Y;return e!==f.DOWN&&e!==f.LEFT||(n*=-1),e!==f.UP&&e!==f.DOWN||(r=p.X),t.replace(Q[r].REPLACE,"rotate".concat(r,"(").concat(n,"deg)"))}(t.style.transform,e)},et=function(t,e){var n,r=t.playerConfig,a=r.id,o=r.coordinates,i=o.top,c=o.left,s=r.ref,l=t.direction,u=t.is3D,b=t.gameMap,d=i,p=c;switch(l){case f.UP:d=i-h.size.movement;break;case f.RIGHT:p=c+h.size.movement;break;case f.DOWN:d=i+h.size.movement;break;case f.LEFT:p=c-h.size.movement}(function(t,e,n){var r,a=H({top:t,left:e}),o=a.xSquare,i=null===(r=n[a.ySquare])||void 0===r?void 0:r[o];return!(i===g.Breaking||i===g.NonBreaking)&&!(e<0||e>J)&&!(t<0||t>J)})(d,p,b)&&(u&&((n=s).style.transition="0ms",n.style.transform=K),setTimeout((function(){u&&tt(s,l),e({playerId:a,newCoordinates:{top:d,left:p}})}),0))},nt=function(t){return 2*(2*(t+1)-1)},rt=function(t){var e=t.explosionAxis,n=t.explosionSize,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=.5,o=2,i=nt(n);r&&(a=0,o=1,i/=2);var c=o,s=o;return e===p.X?c=i:s=i,{x:c-=a,y:s-=a}},at=function(t,e,n){for(var r=JSON.parse(JSON.stringify(t)),a=H(e),o=a.xSquare,i=a.ySquare,c=Math.max(0,i-n);c<=Math.min(h.size.game-1,i+n);c++)r[c][o]===g.Breaking&&(r[c][o]=g.Empty);for(var s=Math.max(0,o-n);s<=Math.min(h.size.game-1,o+n);s++)r[i][s]===g.Breaking&&(r[i][s]=g.Empty);return r},ot=function(t,e,n){return{id:t,coordinates:{top:32*e,left:32*n},ref:null}},it=n(5),ct=function(t,e){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=t}),[t]),Object(a.useEffect)((function(){var t=setInterval((function(){var t;null===(t=n.current)||void 0===t||t.call(n)}),e);return function(){return clearInterval(t)}}),[e])},st=n(2),lt=h.size.game-1,ut=ot("P1",0,0),bt=ot("P2",0,lt),dt=ot("P3",lt,lt),ft=ot("P4",lt,0),pt="Game",mt={players:{P1:ut},bombs:[],gameMap:q(h.size.game),is3D:!1,isSideView:!1,size:h.size.game,animationCounter:0},jt={P1:ut,P2:bt,P3:dt,P4:ft},gt="".concat(pt,"/SET_GAME_STATE"),Ot="".concat(pt,"/START_GAME"),vt="".concat(pt,"/SET_GAME_MAP"),yt="".concat(pt,"/SET_PLAYER_REF"),xt="".concat(pt,"/MAKE_MOVE"),ht="".concat(pt,"/TRIGGER_MOVE"),kt="".concat(pt,"/DROP_BOMB"),wt="".concat(pt,"/REMOVE_BOMB"),zt="".concat(pt,"/ON_EXPLOSION_COMPLETE"),Et="".concat(pt,"/TRIGGER_ANIMATION"),Ct="".concat(pt,"/TOGGLE_GAME_DIMENSION"),Pt="".concat(pt,"/TOGGLE_GAME_PERSPECTIVE"),Mt="".concat(pt,"/TOGGLE_GAME_TWO_PLAYER"),Dt="".concat(pt,"/TOGGLE_GAME_NPC"),Tt=function(t){return{type:vt,payload:t}},St=n(9),It=function(t){return t.Game||mt},Rt=function(){return Object(St.a)(It,(function(t){return t.players}))},Nt=function(){return Object(St.a)(It,(function(t){return t.is3D}))},$t=function(){return Object(St.a)(It,(function(t){return t.isSideView}))},At=function(){return Object(St.a)(It,(function(t){return t.gameMap}))},Lt=function(){var t=Object(it.b)(),e=Object(it.c)(Object(St.a)(It,(function(t){return t.size}))),n=Object(a.useCallback)((function(e){return t(function(t){return{type:gt,payload:t}}(e))}),[t]),r=Object(a.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t(Tt({gameMap:e,animate:n}))}),[t]),o=Object(a.useCallback)((function(){return r(q(e),!0)}),[e,r]),i=Object(a.useCallback)((function(e){return t({type:yt,payload:e})}),[t]),c=Object(a.useCallback)((function(e){return t({type:xt,payload:e})}),[t]),s=Object(a.useCallback)((function(e){return t((n=Object(st.a)(Object(st.a)({},e),{},{onComplete:c}),{type:ht,payload:n}));var n}),[t,c]),l=Object(a.useCallback)((function(e){return t({type:kt,payload:e})}),[t]),u=Object(a.useCallback)((function(e){return t({type:wt,payload:e})}),[t]),b=Object(a.useCallback)((function(e){t({type:zt,payload:e})}),[t]),d=Object(a.useCallback)((function(){return t({type:Et})}),[t]),f=Object(a.useCallback)((function(){return t({type:Ct})}),[t]),p=Object(a.useCallback)((function(){return t({type:Pt})}),[t]),m=Object(a.useCallback)((function(){return t({type:Mt})}),[t]),j=Object(a.useCallback)((function(){return t({type:Dt})}),[t]);return{updateGameSettings:n,generateNewCollisionCoordinates:o,setPlayerRef:i,makeMove:c,triggerMove:s,dropBomb:l,removeBomb:u,onExplosion:b,triggerAnimation:d,toggleDimension:f,togglePerspective:p,toggleTwoPlayer:m,toggleNPC:j}},Bt=function(){var t=Lt(),e=t.dropBomb,n=t.triggerMove,r=Object(it.c)(At()),o=Object(it.c)(Nt()),i=Object(it.c)(Rt()),c=Object(a.useRef)({P1:(new Date).getTime(),P2:(new Date).getTime(),P3:(new Date).getTime(),P4:(new Date).getTime()}),s=Object(a.useRef)({});return ct((function(){i.P4&&function(t,e){console.log("players",t),console.log("gameMap",e)}(i,r)}),h.duration.movement),Object(a.useEffect)((function(){var t=function(t,e){var r=function(t,e){var n=e.MoveUp,r=e.MoveRight,a=e.MoveDown,o=e.MoveLeft;switch(!0){case t.current[n]:return f.UP;case t.current[r]:return f.RIGHT;case t.current[a]:return f.DOWN;case t.current[o]:return f.LEFT;default:return null}}(s,t);r&&n({playerId:e,direction:r})},r=function(){s.current&&Object.keys(i).forEach((function(n){var r=h.keyboardConfig.player[n];if(r){var a=i[n].coordinates;if(i[n].ref){var o=(new Date).getTime();o-c.current[n]>h.duration.movement&&(c.current[n]=o,t(r,n))}!function(t,n){var r=t.top,a=t.left,o=n.DropBomb;s.current[o]&&e({top:r,left:a})}(a,r)}}))},a=function(t){if(s.current&&c.current){var e="keydown"===t.type;!function(t,e){s.current[t.code]=e}(t,e),e&&r()}};return window.addEventListener("keyup",a),window.addEventListener("keydown",a),function(){window.removeEventListener("keyup",a),window.removeEventListener("keydown",a)}}),[e,r,o,i,n]),{}},Gt=n(1),_t=l.c.div(P||(P=Object(s.a)(["\n\tdisplay: flex;\n\tjustify-content: center;\n\tflex-wrap: wrap;\n\n\t& > :first-child {\n\t\tmargin-right: 50px;\n\t\twidth: 15%;\n\t\t@media only screen and (max-width: 600px) {\n\t\t\twidth: 100%;\n\t\t\tmargin: 50px auto;\n\t\t\torder: 2;\n\t\t\t& button {\n\t\t\t\twidth: 80% !important;\n\t\t\t}\n\t\t}\n\t}\n"]))),Ft=l.c.div(M||(M=Object(s.a)(["\n\ttext-align: center;\n\t","\n"])),(function(t){return t.$is3D?"perspective: 1000":""})),Xt=function(t){var e=t.children,n=Object(it.c)(Nt());return Object(Gt.jsxs)(Ft,{$is3D:n,children:[Object(Gt.jsx)("h1",{children:h.title}),Object(Gt.jsx)(_t,{children:e})]})},Yt=n(6),Ut={palette:{background:{primary:"var(--primary-background)",secondary:"var(--secondary-background)"},color:{primary:"var(--primary-color)",secondary:"var(--secondary-color)",error:"var(--error-color)",warning:"var(--warning-color)",success:"var(--success-color)",info:"var(--info-color)",default:"var(--default-color)"}},shape:{borderRadius:"var(--border-radius)",padding:"var(--padding)"},game:{character:{size:"var(--character-size)"},tile:{size:"var(--tile-size)"}}},Zt=Object(l.a)(D||(D=Object(s.a)(["\n\t:root {\n\t\t/* #region COLORS */\n\t\t--primary-background: #13141b;\n\t\t--secondary-background: #1a1d28;\n\n\t\t--primary-color: #ec7ebd;\n\t\t--secondary-color: #763ee6;\n\n\t\t/* --error-color: rgb(255, 122, 105);\n\t\t--warning-color: rgb(241, 168, 23);\n\t\t--success-color: rgb(49, 162, 76);\n\t\t--info-color: rgb(134, 218, 255);\n\t\t--default-color: rgb(228, 230, 235); */\n\t\t--error-color: #f44336;\n\t\t--warning-color: #ff9800;\n\t\t--success-color: #2196f3;\n\t\t--info-color: #4caf50;\n\t\t--default-color: #E4E6EB;\n\t\t/* #endregion */\n\n\t\t/* #region UTILITIES */\n\t\t--border-radius: 4px;\n\t\t--padding: 10px;\n\t\t/* #endregion */\n\n\t\t/* #region GAME */\n\t\t--character-size: ","px;\n\t\t--tile-size: ","px;\n\t\t--game-size: ","px;\n\t\t/* #endregion */\n\t\t\n\t\t/* #region ANIMATIONS */\n\t\t/* @see https://easings.net/#easeInOutBack */\n\t\t--ease-in-out-back: cubic-bezier(0.68, -0.6, 0.32, 1.6);\n\t\t--incremental-animation-delay: 0.03s;\n\t\t--block-animation-duration: 0.5s;\n\t\t/* #endregion */\n\n\t\t/* #region GENERICS */\n\t\t*, ::before, ::after {\n\t\t\tbox-sizing: border-box;\n\t\t}\n\n\t\thtml,\n\t\tbody,\n\t\t#root {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tmargin: 0;\n\t\t\tpadding: 0;\n\t\t}\n\n\t\thtml {\n\t\t\tbackground-color: ",";\n\t\t\t/* color: #fff; */\n\t\t}\n\n\t\t#root {\n\t\t\tposition: relative;\n\t\t}\n\n\t\tpre {\n\t\t\twhite-space: pre-wrap;\n\t\t\tword-wrap: break-word;\n\t\t}\n\t\t/* #endregion */\n\n\t\t/* #region SCROLLBARS */\n\t\t*, ::before, ::after {\n\t\t\tscroll-behavior: smooth;\n\t\t\tscrollbar-color: black transparent;\n\t\t\tscrollbar-width: thin;\n\t\t}\n\n\t\t/* width */\n\t\t::-webkit-scrollbar {\n\t\t\twidth: 5px;\n\t\t\theight: 6px;\n\t\t}\n\n\t\t/* Track */\n\t\t::-webkit-scrollbar-track {\n\t\t\tbackground: #bfbfbf;\n\t\t}\n\n\t\t/* Handle */\n\t\t::-webkit-scrollbar-thumb {\n\t\t\tbackground: black;\n\t\t\tborder-radius: 10px;\n\t\t}\n\n\t\t/* Handle on hover */\n\t\t::-webkit-scrollbar-thumb:hover {\n\t\t\tbackground: rgba(0, 0, 0, 0.7);\n\t\t}\n\t\t/* #endregion */\n\t}\n"])),h.size.character,h.size.tile,h.size.game,Ut.palette.background.primary),Vt=Ut,Wt=l.c.button(T||(T=Object(s.a)(["\n\tbackground-color: ",";\n\t/* IGNORE SIZE FOR NOW */\n\tborder-radius: ",";\n\tpadding: ",";\n"])),(function(t){var e=t.$variant;return Vt.palette.color[e]}),Vt.shape.borderRadius,Vt.shape.padding),qt=function(t){var e=t.variant,n=t.size,r=t.children,a=Object(Yt.a)(t,["variant","size","children"]);return Object(Gt.jsx)(Wt,Object(st.a)(Object(st.a)({$variant:e,$size:n},a),{},{children:r}))},Ht=Object(a.memo)(qt),Jt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(e){setTimeout(e,t)}))},Kt=function(t){var e,n=t.active,r=void 0!==n&&n,a=t.onClick,o=t.children,i=Object(Yt.a)(t,["active","onClick","children"]);return Object(Gt.jsx)(Ht,Object(st.a)(Object(st.a)({style:{width:"100%",wordWrap:"break-word",marginBottom:10},variant:r?"success":"warning",size:"medium",onClick:(e=a,function(t){t.currentTarget.blur(),e(t)})},i),{},{children:o}))},Qt=function(){var t=Lt(),e=t.generateNewCollisionCoordinates,n=t.togglePerspective,r=t.toggleDimension,a=t.toggleTwoPlayer,o=t.toggleNPC,i=Object(it.c)(Nt()),c=Object(it.c)($t()),s=Object(it.c)(Rt()),l=[{label:"New Collision Coordinates",onClick:e},{label:"Toggle 3D (Experimental)",onClick:r,active:i},{label:"Toggle Side View",onClick:n,active:c,disabled:!i},{label:"Toggle Two-Player Mode",onClick:a,active:!!s.P2},{label:"Toggle NPC",onClick:o,active:!!s.P4}];return Object(Gt.jsx)("div",{children:l.map((function(t){var e=t.label,n=Object(Yt.a)(t,["label"]);return Object(Gt.jsx)(Kt,Object(st.a)(Object(st.a)({},n),{},{children:e}),e)}))})},te=n(20),ee=n.n(te),ne=n(28),re=(n(45),l.c.div(S||(S=Object(s.a)([""])))),ae=l.c.div(I||(I=Object(s.a)(["\n\t","\n\theight: calc(var(--tile-size) * 1px);\n\twidth: calc(var(--tile-size) * 1px);\n\ttransform-style: preserve-3d;\n\tposition: absolute;\n\ttransform-origin: center center;\n\ttransition: 300ms;\n\n\ttransform: scale(1, 1) translateZ(calc(var(--tile-size) / 2 * -1px));\n\n\t& > "," {\n\t\tborder: 1px solid var(--primary-background);\n\n\t\theight: calc(var(--tile-size) * 1px);\n\t\twidth: calc(var(--tile-size) * 1px);\n\t\t/* transform-origin: 50% 50%; */\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\tposition: absolute;\n\n\t\t/** @see https://codepen.io/jh3y/pen/BaKqQLJ */\n\t\t&:nth-of-type(1) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(2) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg) rotateY(180deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(3) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg) rotateY(90deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(4) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg) rotateY(-90deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(5) {\n\t\t\tbackground-color: var(--secondary-background);\n\t\t\ttransform: translate(-50%, -50%)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(6) {\n\t\t\ttransform: translate(-50%, -50%)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * -1px)) rotateX(180deg);\n\t\t}\n\t}\n\n\t&.bouncy-block- {\n\t\t&no-animation {\n\t\t\ttransform: translateZ(calc(var(--tile-size) / 2 * 1px));\n\t\t\t& > "," {\n\t\t\t\tbackground-color: var(--secondary-color);\n\t\t\t}\n\t\t}\n\n\t\t&0 {\n\t\t\ttransform: translateZ(calc(var(--tile-size) / 2 * 1px))\n\t\t\t\trotateX(0deg) rotateY(0deg) rotateZ(0deg);\n\t\t}\n\t}\n"])),(function(t){var e=t.$size;return"\n\t\t--tile-size: ".concat(e,";\n\t")}),re,re),oe=Object(a.forwardRef)((function(t,e){var n=t.size,r=t.top,a=t.left,o=t.animate,i=void 0!==o&&o,c=t.variant,s=t.color,l=t.collisionIndex,u=t.style,b=t.className,d=Object(Yt.a)(t,["size","top","left","animate","variant","color","collisionIndex","style","className"]),f="cuboid bouncy-block-".concat((i?l:"no-animation")||0," ").concat(c).concat(b&&" ".concat(b)||"");return Object(Gt.jsx)(ae,Object(st.a)(Object(st.a)({className:f,style:Object(st.a)(Object(st.a)({},u),{},{top:r,left:a,width:n,height:n}),ref:e,$size:n},d),{},{children:Array(6).fill(0).map((function(t,e){return Object(Gt.jsx)(re,{style:Object(st.a)(Object(st.a)({},s&&{backgroundColor:s}),{},{width:n,height:n})},e)}))}))})),ie=function(t,e){return"".concat(e?"transform: translateZ(calc(var(--tile-size) / 2 * 2px)) rotateX(".concat(t,"deg) rotateY(").concat(t,"deg)"):"transform: rotate(".concat(t,"deg)"),";")},ce=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(l.d)(R||(R=Object(s.a)(["\n\t0% { "," }\n\t\n\t/* 40% -> 100% */\n\t","\n"])),ie(0,t),Array(7).fill(0).map((function(e,n){return"".concat(10*(n+4),"% { ").concat(ie((n+1)*(t&&(n<6?90:100)||n<4&&90||n<6&&270||360),t)," }")})).join("\n"))},se=l.c.div(N||(N=Object(s.a)(["\n\tanimation: "," linear forwards;\n"])),ce()),le=Object(l.c)(oe)($||($=Object(s.a)(["\n\t/* "," */\n\tanimation: "," linear forwards;\n"])),(function(t){var e=t.size;return"\n\t\t--tile-size: ".concat(e,";\n\t")}),ce(!0)),ue=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=rt(t,e),r=n.x,a=n.y,o=e?"translateZ(calc((var(--tile-size) / 2) * 1px)) ":"";return Object(l.d)(A||(A=Object(s.a)(["\n\t  \t0% {\n\t\t\ttransform: ","scale(1, 1);\n\t\t\t/* transform:"," scale(",", ","); */\n\t\t\t","\n\t\t}\n\t\t65% {\n\t\t\ttransform: ","scale(",", ",");\n\t\t}\n\t\t100% {\n\t\t\t","\n\t\t}\n\t"])),o,o,r,a,e?"":"opacity: 1;",o,r,a,e?"":"opacity: 0;")},be=l.c.div(B||(B=Object(s.a)(["\n\t","\n"])),(function(t){var e=t.$explosionAxis,n=t.$explosionSize;return Object(l.b)(G||(G=Object(s.a)(["\n\t\tanimation: ","\n\t\t\tvar(--ease-in-out-back) forwards;\n\t"])),ue({explosionAxis:e,explosionSize:n}))})),de=Object(l.c)(oe)(_||(_=Object(s.a)(["\n\t","\n"])),(function(t){var e=t.$explosionAxis,n=t.$explosionSize,r=t.$firingDuration,a=t.color;return Object(l.b)(F||(F=Object(s.a)(["\n\t\tanimation: ","\n\t\t\t","s var(--ease-in-out-back) forwards;\n\t\t& {\n\t\t\tborder: none;\n\t\t}\n\t\t& * {\n\t\t\tanimation: "," ","s\n\t\t\t\tease-out forwards;\n\t\t}\n\t"])),ue({explosionAxis:e,explosionSize:n},!0),r,function(t){return Object(l.d)(L||(L=Object(s.a)(["\n\t100% {\n\t\tborder-color: ",";\n\t\t/* Cool? effect */\n\t\t/* border-width: ","px */\n\t}\n"])),t,.5*h.size.tile)}(a),.75*r)})),fe=function(t){var e=t.color,n=t.firingDuration,r=t.explodingDuration,o=t.explosionSize,i=t.id,c=t.top,s=t.left,l=t.onExplosion,u=t.is3D,b=Object(a.useState)(m.Firing),d=Object(z.a)(b,2),f=d[0],j=d[1];Object(a.useEffect)((function(){(function(){var t=Object(ne.a)(ee.a.mark((function t(){return ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Jt(1e3*n);case 2:return j(m.Exploding),t.next=5,Jt(r/2*1e3);case 5:l({bombId:i,bombCoordinates:{top:c,left:s}});case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[r,o,n,l,c,s,i]);var g=h.size.bomb,O=g/2,v=null,x={position:"absolute",backgroundColor:e,width:g,height:g,top:c+O,left:s+O,animationDuration:"".concat(r,"s")};if(f===m.Exploding){var k={$explosionSize:o,$firingDuration:n};v=!u&&Object(Gt.jsxs)(Gt.Fragment,{children:[Object(Gt.jsx)(be,Object(st.a)({style:x,$explosionAxis:p.X},k)),Object(Gt.jsx)(be,Object(st.a)({style:x,$explosionAxis:p.Y},k))]})||Object(Gt.jsxs)(Gt.Fragment,{children:[Object(Gt.jsx)(de,Object(st.a)({size:h.size.tile,top:c,left:s,variant:y.Basic,color:Vt.palette.color.error,collisionIndex:1,style:x,$explosionAxis:p.X},k)),Object(Gt.jsx)(de,Object(st.a)({size:h.size.tile,top:c,left:s,variant:y.Basic,color:Vt.palette.color.error,collisionIndex:1,style:x,$explosionAxis:p.Y},k))]})}if(f===m.Firing){var w=Object(st.a)(Object(st.a)({},x),{},{animationDuration:"".concat(n,"s")});v=!u&&Object(Gt.jsx)(se,{style:w})||Object(Gt.jsx)(le,{size:g,top:Number(x.top),left:Number(x.left),animate:!1,variant:y.Basic,color:Vt.palette.color.error,collisionIndex:1,style:w})}return v},pe=(n(46),Object(a.forwardRef)((function(t,e){t.id,t.name;var n=t.coordinates,r=n.top,o=n.left,i=t.style,c=t.keyboardConfig,s=Object(Yt.a)(t,["id","name","coordinates","style","keyboardConfig"]),l=Object(a.useState)(f.DOWN),u=Object(z.a)(l,2),b=u[0],d=u[1],p=Object(a.useState)(""),m=Object(z.a)(p,2),j=m[0],g=m[1],O=!!j;return Object(a.useEffect)((function(){var t=function(t){return function(t,e){var n=e.MoveUp,r=e.MoveRight,a=e.MoveDown,o=e.MoveLeft;switch(!0){case t===n:return f.UP;case t===r:return f.RIGHT;case t===a:return f.DOWN;case t===o:return f.LEFT;default:return null}}(t.code,c)},e=function(){j&&g("")},n=function(n){var r=t(n);r?(!function(t){d(t)}(r),g(r)):e()},r=function(){e()};return document.addEventListener("keydown",n),document.addEventListener("keyup",r),function(){document.removeEventListener("keydown",n),document.removeEventListener("keyup",r)}}),[j,c]),Object(Gt.jsxs)("div",Object(st.a)(Object(st.a)({className:"character","data-facing":b,"data-walking":O.toString(),ref:e,style:Object(st.a)(Object(st.a)({},i),{},{top:r,left:o})},s),{},{children:[Object(Gt.jsx)("div",{className:"shadow pixel-art"}),Object(Gt.jsx)("div",{className:"spritesheet pixel-art"})]}))}))),me=Object(a.forwardRef)((function(t,e){var n=t.id,r=t.name,a=t.coordinates,o=a.top,i=a.left,c=t.keyboardConfig,s=t.is3D,l=Object(Yt.a)(t,["id","name","coordinates","keyboardConfig","is3D"]),u=h.size,b=(u.tile-u.character)/2,d=b+o,f=b+i,p=Object(st.a)({id:n,name:"".concat(r," ").concat(n),coordinates:{top:d,left:f},keyboardConfig:c,ref:e},l);return s&&Object(Gt.jsx)(oe,Object(st.a)({size:h.size.character,top:d,left:f,animate:!0,color:Vt.palette.color.success,style:{transform:K},variant:j[n],ref:e},l))||Object(Gt.jsx)(pe,Object(st.a)({},p))})),je=function(){var t=Lt().setPlayerRef,e=Object(it.c)(Rt()),n=Object(it.c)(Object(St.a)(It,(function(t){return t.bombs}))),r=Object(it.c)(Nt()),a=Lt().onExplosion,o=function(e){var n=e.id;return function(e){t({playerId:n,newRef:e})}};return Object(Gt.jsxs)(Gt.Fragment,{children:[Object.entries(e).map((function(t){var e=Object(z.a)(t,2),n=e[0],a=e[1],i=h.keyboardConfig.player[n];return Object(Gt.jsx)(me,{id:n,name:"Bomber",coordinates:a.coordinates,keyboardConfig:i,is3D:r,ref:o(a)},n)})),n.map((function(t){var e=t.id,n=Object(Yt.a)(t,["id"]);return Object(Gt.jsx)(fe,Object(st.a)(Object(st.a)({id:e},n),{},{color:Vt.palette.color.error,explosionSize:h.size.explosion,firingDuration:h.duration.bomb.firing,explodingDuration:h.duration.bomb.exploding,onExplosion:a,is3D:r}),e)}))]})},ge=function(t){var e=Object(a.useRef)();return Object(a.useEffect)((function(){e.current=t}),[t]),e.current},Oe=Object(l.d)(X||(X=Object(s.a)(["\n\t0% { transform: scale(0, 0); }\n\t25% { transform: scale(0.9, 1.1); }\n\t50% { transform: scale(1.1, 0.9); }\n\t75% { transform: scale(0.95, 1.05); }\n\t100% { transform: scale(1, 1); }\n"]))),ve=l.c.div.attrs((function(t){var e=t.$size,n=t.$top,r=t.$left,a=t.$color;return{style:Object(st.a)({width:e,height:e,top:n,left:r},a&&{backgroundColor:a})}}))(Y||(Y=Object(s.a)(["\n\tposition: absolute;\n\t/* background-color: ","; */\n\tborder: 1px solid ",";\n\t","\n"])),Vt.palette.background.secondary,Vt.palette.background.primary,(function(t){var e=t.$color,n=t.$collisionIndex;return t.$animate&&e&&Object(l.b)(U||(U=Object(s.a)(["\n\t\t\t\t\ttransform: scale(0, 0);\n\t\t\t\t\tz-index: 9999;\n\t\t\t\t\tanimation: ","\n\t\t\t\t\t\tvar(--block-animation-duration) ease\n\t\t\t\t\t\tcalc(\n\t\t\t\t\t\t\t"," *\n\t\t\t\t\t\t\t\tvar(--incremental-animation-delay)\n\t\t\t\t\t\t)\n\t\t\t\t\t\tforwards;\n\t\t\t\t"])),Oe,n)||""})),ye=function(t){var e=t.size,n=t.top,r=t.left,a=t.animate,o=void 0!==a&&a,i=t.color,c=t.collisionIndex;return Object(Gt.jsx)(ve,{$size:e,$top:n,$left:r,$animate:o,$color:i,$collisionIndex:c})},xe=Object(a.memo)(ye),he=l.c.div(Z||(Z=Object(s.a)(["\n\twidth: ",";\n\theight: ",";\n\tborder-radius: ",";\n\tbackground-color: ",";\n\tposition: relative;\n\tbox-shadow: 0 10px 20px rgba(0, 0, 0, 0.5), 0 6px 6px rgba(0, 0, 0, 0.6);\n\ttransition: transform var(--block-animation-duration);\n\n\t","\n"])),(function(t){var e=t.$size;return"calc(".concat(Vt.game.tile.size," * ").concat(e,")")}),(function(t){var e=t.$size;return"calc(".concat(Vt.game.tile.size," * ").concat(e,")")}),Vt.shape.borderRadius,Vt.palette.background.secondary,(function(t){var e=t.$is3D,n=t.$isTopView,r="";return e&&(r+="transform-style: preserve-3d;",n||(r+="\ntransform: rotateX(-24deg) rotateY(-24deg) rotateX(90deg);")),r})),ke=function(t){var e=t.size,n=t.gameMap,r=t.is3D,a=t.isTopView,o=t.animationCounter,i=t.children,c=o!==ge(o),s=1;return Object(Gt.jsxs)(he,{$size:e,$is3D:r,$isTopView:a,children:[n.map((function(t,e){return t.map((function(t,n){var a=t===g.NonBreaking||t===g.Breaking,o=Object(st.a)({key:"".concat(e,"_").concat(n),size:h.size.tile,top:e*h.size.tile,left:n*h.size.tile,animate:c,variant:t},a&&{color:Vt.palette.color[t===g.NonBreaking?"secondary":"primary"],collisionIndex:s++});return r&&(a&&Object(Gt.jsx)(oe,Object(st.a)({},o))||Object(Gt.jsx)(xe,Object(st.a)({},o)))||Object(Gt.jsx)(xe,Object(st.a)({},o))}))})),i]})},we=function(t){var e=t.children,n=Object(it.c)(At()),r=Object(it.c)(Nt()),a=!Object(it.c)($t()),o=Object(it.c)(Object(St.a)(It,(function(t){return t.animationCounter})));return Object(Gt.jsx)(ke,{size:h.size.game,gameMap:n,is3D:r,isTopView:a,animationCounter:o,children:e})},ze=function(){return Bt(),Object(Gt.jsxs)(Xt,{children:[Object(Gt.jsx)(Qt,{}),Object(Gt.jsx)(we,{children:Object(Gt.jsx)(je,{})})]})},Ee=n(10),Ce=n(29),Pe=n(30),Me=n(14),De=function(t,e){Object.keys(e).forEach((function(n){t[n]=e[n]}))},Te=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,e=arguments.length>1?arguments[1]:void 0;return Object(Me.b)(t,(function(n){switch(e.type){case gt:De(n,e.payload);break;case Ot:n.players.P1=Object(Me.a)(jt.P1);break;case vt:var r=e.payload,a=r.animate,o=r.gameMap;n.gameMap=o,a&&n.animationCounter++;break;case yt:var i=e.payload,c=i.playerId,s=i.newRef;if(!s)break;n.players[c].ref=Object(Me.a)(s);break;case ht:var l=e.payload,u=l.playerId,b=l.direction,d=l.onComplete,f=t.is3D,p=t.players,m=t.gameMap,j=p[u];et({playerConfig:j,direction:b,is3D:f,gameMap:m},d);break;case xt:var g=e.payload,O=g.playerId,v=g.newCoordinates;n.players[O].coordinates=v;break;case kt:var y=e.payload,x=Object(st.a)(Object(st.a)({},y),{},{id:(new Date).toJSON()});n.bombs.push(x);break;case wt:var k=e.payload;n.bombs=n.bombs.filter((function(t){return t.id!==k}));break;case zt:var w=e.payload,z=w.bombId,E=w.bombCoordinates;n.bombs=n.bombs.filter((function(t){return t.id!==z}));var C=at(t.gameMap,E,h.size.explosion);n.gameMap=C;break;case Et:n.animationCounter++;break;case Ct:n.is3D=!n.is3D;break;case Pt:n.isSideView=!n.isSideView;break;case Mt:if(n.players.P2){delete n.players.P2;break}n.players.P2=Object(Me.a)(jt.P2);break;case Dt:if(n.players.P4){delete n.players.P4;break}n.players.P4=Object(Me.a)(jt.P4)}}))},Se=Object(Ee.combineReducers)(Object(k.a)({},pt,Te)),Ie=function(t){var e=[Ce.a],n=Ee.applyMiddleware.apply(void 0,e);return Object(Ee.createStore)(Se,t,Object(Pe.composeWithDevTools)(n))}({});var Re=function(){return Object(Gt.jsxs)(it.a,{store:Ie,children:[Object(Gt.jsx)(u,{children:Object(Gt.jsx)(ze,{})}),Object(Gt.jsx)("div",{id:"created-by-numan"}),Object(Gt.jsx)(Zt,{})]})},Ne=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,o=e.getLCP,i=e.getTTFB;n(t),r(t),a(t),o(t),i(t)}))};c.a.render(Object(Gt.jsx)(o.a.StrictMode,{children:Object(Gt.jsx)(Re,{})}),document.getElementById("root")),Ne()}},[[47,1,2]]]);
(this["webpackJsonpbomba-man"]=this["webpackJsonpbomba-man"]||[]).push([[15],{521:function(t,e,n){"use strict";n.r(e);var r=n(8),a=n(204),o=n(584),i=n(4),c=n(2),l=n(12),s=n(28),u=n(11),d=function(t,e){var n=Object(l.g)().push,r=t.players,a=t.config,o=a.powerUps,d=a.duration.bomb.exploding,b=i.f.Lose,p=Object(u.s)(r,o),f=p.P1,j=p.P2;(f===i.i.Alive||j&&j===i.i.Alive)&&(b=i.f.Win),Object(c.useEffect)((function(){var t=Object.values(p).filter((function(t){return t===i.i.Alive}));t.length>1||setTimeout((function(){e(),n("".concat(s.a,"/game-end"),{endGame:{players:p,currentOnlinePlayerId:Object.keys(t)[0],gameEndCondition:b}})}),1e3*d+1e3)}),[d,b,p,e,n])},b=n(104),p=n(207),f=n(14),j=function(){var t=Object(b.b)(),e=Object(b.c)(Object(p.b)()),n=e.sizes,a=e.tiles.blockTileChance,o=Object(b.c)(Object(p.c)()),i=Object(c.useCallback)((function(e){return t(function(t){return{type:f.j,payload:t}}(e))}),[t]),l=Object(c.useCallback)((function(t){var e=Object(u.d)(t);i(e)}),[i]),s=Object(c.useCallback)((function(e){return t((n=e,{type:f.i,payload:n}));var n}),[t]),d=Object(c.useCallback)((function(){return s({gameMap:Object(u.g)(n,a,o),animate:!0})}),[a,n,o,s]),j=Object(c.useCallback)((function(e,n){var r;t((r={direction:e,id:n},{type:f.a,payload:r}))}),[t]),v=Object(c.useCallback)((function(e,n){var r;t((r={isWalking:e,id:n},{type:f.b,payload:r}))}),[t]),g=Object(c.useCallback)((function(e){return t((n=e,{type:f.g,payload:n}));var n}),[t]),O=Object(c.useCallback)((function(e){return t((n=Object(r.a)(Object(r.a)({},e),{},{onComplete:g}),{type:f.r,payload:n}));var n}),[t,g]),m=Object(c.useCallback)((function(e){return t((n=e,{type:f.d,payload:n}));var n}),[t]),h=Object(c.useCallback)((function(e,n){return t(function(t,e){return{type:f.p,payload:t,cb:e}}(e,n))}),[t]),y=Object(c.useCallback)((function(e){var n;t((n=e,{type:f.h,payload:n}))}),[t]),x=Object(c.useCallback)((function(){return t({type:f.q})}),[t]),k=Object(c.useCallback)((function(){return t({type:f.l})}),[t]),w=Object(c.useCallback)((function(){return t({type:f.n})}),[t]),z=Object(c.useCallback)((function(){return t({type:f.o})}),[t]),C=Object(c.useCallback)((function(){return t({type:f.m})}),[t]);return{startGame:l,updateGameSettings:i,generateNewCollisionCoordinates:d,updatePlayerDirection:j,updatePlayerIsWalking:v,makeMove:g,triggerMove:O,dropBomb:m,triggerExplosion:h,onExplosionComplete:y,triggerAnimation:x,toggleDimension:k,togglePerspective:w,toggleTwoPlayer:z,toggleNPC:C}},v=function(t){var e=Object(l.g)().push,n=j(),r=Object(b.c)(Object(p.a)()),a=Object(c.useRef)(!1);return Object(c.useEffect)((function(){a.current||t&&(n.startGame(t),a.current=!0)})),t?{provider:n,state:r,type:i.g.Local,gamePlayers:Object.keys(r.players).reduce((function(t,e){return t[e]=i.i.Alive,t}),{})}:(e("".concat(s.a,"/room-creator/local")),null)},g=n(6),O=function(t){var e=t.gameProps;return d(e.state,e.provider.startGame),Object(g.jsx)(o.a,Object(r.a)({},e))};e.default=function(t){var e,n=t.location,r=null===n||void 0===n||null===(e=n.state)||void 0===e?void 0:e.gameConfig,o=v(r);return o?Object(g.jsx)(O,{gameProps:o}):Object(g.jsx)(a.default,{})}},547:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var r,a=n(34),o=n(546),i=n(543),c=n(44),l=n(29),s=n(202),u=n(6),d=Object(l.d)(i.a)(r||(r=Object(a.a)(["\n\tcolor: ",";\n"])),c.b.palette.color.error),b=function(t){var e=t.children,n=t.message,r=void 0===n?"Either the game is not found or you don't have access to it.":n;return Object(u.jsxs)(o.a,{fullHeight:!0,children:[Object(u.jsx)(s.a,{spacing:"5"}),Object(u.jsx)(d,{children:r}),Object(u.jsx)(s.a,{spacing:"10"}),e]})}},556:function(t,e,n){"use strict";var r=n(7),a=n.n(r),o=n(16),i=n(204),c=n(547),l=n(101),s=n(6);e.a=function(t){var e=Object(l.useFirebase)();Object(l.useFirebaseConnect)([t]);var n=function(e){return"".concat(t).concat(e||"")};return{create:function(){var t=Object(o.a)(a.a.mark((function t(){var r,o,i,c,l,s,u,d,b=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=b.length,o=new Array(r),i=0;i<r;i++)o[i]=b[i];return c=o[0],l=o[1],s=o[2],t.prev=2,t.next=5,e.push(n(l),c);case 5:return d=t.sent,null===s||void 0===s||null===(u=s.onSuccess)||void 0===u||u.call(s,d),t.abrupt("return",d);case 10:return t.prev=10,t.t0=t.catch(2),(null===s||void 0===s?void 0:s.onError)&&s.onError(t.t0),t.abrupt("return",t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),read:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],a=!Object(l.isLoaded)(r)&&Object(s.jsx)(i.default,{}),o=Object(l.isEmpty)(r)&&Object(s.jsx)(c.a,{});return{state:r,pending:a,error:o}},update:function(){var t=Object(o.a)(a.a.mark((function t(){var r,o,i,c,l,s,u,d,b=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=b.length,o=new Array(r),i=0;i<r;i++)o[i]=b[i];return c=o[0],l=o[1],s=o[2],t.prev=2,t.next=5,e.update(n(l),c);case 5:return d=t.sent,null===s||void 0===s||null===(u=s.onSuccess)||void 0===u||u.call(s,d),t.abrupt("return",d);case 10:return t.prev=10,t.t0=t.catch(2),(null===s||void 0===s?void 0:s.onError)&&s.onError(t.t0),t.abrupt("return",t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),push:function(){var t=Object(o.a)(a.a.mark((function t(){var r,o,i,c,l,s,u,d,b=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=b.length,o=new Array(r),i=0;i<r;i++)o[i]=b[i];return c=o[0],l=o[1],s=o[2],t.prev=2,t.next=5,e.push(n(l),c);case 5:return d=t.sent,null===s||void 0===s||null===(u=s.onSuccess)||void 0===u||u.call(s,d),t.abrupt("return",d);case 10:return t.prev=10,t.t0=t.catch(2),(null===s||void 0===s?void 0:s.onError)&&s.onError(t.t0),t.abrupt("return",t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),remove:function(){var t=Object(o.a)(a.a.mark((function t(){var r,o,i,c,l,s,u,d=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=d.length,o=new Array(r),i=0;i<r;i++)o[i]=d[i];return c=o[0],l=o[1],t.prev=2,t.next=5,e.remove(n(c));case 5:return u=t.sent,null===l||void 0===l||null===(s=l.onSuccess)||void 0===s||s.call(l,u),t.abrupt("return",u);case 10:return t.prev=10,t.t0=t.catch(2),(null===l||void 0===l?void 0:l.onError)&&l.onError(t.t0),t.abrupt("return",t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}()}}},558:function(t,e,n){"use strict";var r=n(9),a=n(101),o=n(104),i=n(48),c=function(t){return t.firebase},l=n(11),s=n(204),u=n(547),d=n(22),b=n(60),p=n(4),f=n(556),j=n(6),v=Object(d.a)((function(){return Promise.all([n.e(3),n.e(18)]).then(n.bind(null,509))})),g=Object(l.d)();e.a=function(t){var e,n,d,O,m,h,y,x,k="online/".concat(t);Object(a.useFirebaseConnect)(k);var w=Object(f.a)(k),z=w.update,C=w.remove,S=Object(o.c)(function(t){return Object(i.a)(c,(function(e){var n=e.data.online;return null===n||void 0===n?void 0:n[t]}))}(t)),P=!Object(a.isLoaded)(S)&&Object(j.jsx)(s.default,{}),D=Object(a.isEmpty)(S)&&Object(j.jsx)(u.a,{children:Object(j.jsx)(v,{noWrapper:!0})}),$=S;return{game:{gameId:t,gameState:{players:(null===$||void 0===$||null===(e=$.gameState)||void 0===e?void 0:e.players)||g.players,gameMap:(null===$||void 0===$||null===(n=$.gameState)||void 0===n?void 0:n.gameMap)||g.gameMap,bombs:(null===$||void 0===$||null===(d=$.gameState)||void 0===d?void 0:d.bombs)||g.bombs,powerUps:(null===$||void 0===$||null===(O=$.gameState)||void 0===O?void 0:O.powerUps)||g.powerUps,is3D:(null===$||void 0===$||null===(m=$.gameState)||void 0===m?void 0:m.is3D)||g.is3D,isSideView:(null===$||void 0===$||null===(h=$.gameState)||void 0===h?void 0:h.isSideView)||g.isSideView,animationCounter:(null===$||void 0===$||null===(y=$.gameState)||void 0===y?void 0:y.animationCounter)||g.animationCounter,config:(null===$||void 0===$||null===(x=$.gameState)||void 0===x?void 0:x.config)||g.config},gamePlayers:(null===$||void 0===$?void 0:$.gamePlayers)||{},started:(null===$||void 0===$?void 0:$.started)||!1},pending:P,error:D,isReady:!P&&!D,onPlayerJoin:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];z(Object(r.a)({},t,p.i.Alive),"/gamePlayers");var n=Object(l.e)(t,$.gameState.config,!e&&b.a.keyboardConfig||null);z(n,"/gameState/players/".concat(t))},onPlayerExit:function(t){C("/gamePlayers/".concat(t)),C("/gameState/players/".concat(t)),$.gamePlayers&&Object.keys($.gamePlayers).length<=2&&z({started:!1})},onStartGame:function(){z({started:!0})},onPlayerDeath:function(t){z(Object(r.a)({},t,p.i.Dead),"/gamePlayers")}}}},566:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r,a=n(8),o=n(65),i=n(34),c=n(2),l=n(29),s=n(44),u=n(6),d=l.d.button(r||(r=Object(i.a)(["\n\tbackground-color: ",";\n\t/* IGNORE SIZE FOR NOW */\n\tborder-radius: ",";\n\tpadding: ",";\n\tcursor: pointer;\n\ttransition: background-color ",";\n\n\t&:hover {\n\t\tbackground-color: ",";\n\t}\n"])),(function(t){var e=t.$variant;return s.b.palette.color[e]}),s.b.shape.borderRadius,s.b.shape.padding,s.b.transition.hover,(function(t){var e=t.$variant;return s.b.palette.color["".concat(e,"-lighter")]})),b=Object(c.forwardRef)((function(t,e){var n=t.variant,r=void 0===n?"default":n,i=t.size,c=void 0===i?"medium":i,l=t.children,s=Object(o.a)(t,["variant","size","children"]);return Object(u.jsx)(d,Object(a.a)(Object(a.a)({$variant:r,$size:c,ref:e},s),{},{children:l}))})),p=Object(c.memo)(b)},580:function(t,e,n){},584:function(t,e,n){"use strict";n.d(e,"a",(function(){return st}));var r,a,o,i,c,l,s,u,d,b,p,f,j=n(8),v=n(586),g=n(34),O=n(29),m=n(202),h=n(6),y=O.d.div(r||(r=Object(g.a)(["\n\tdisplay: flex;\n\tjustify-content: center;\n\tflex-wrap: wrap;\n\n\t& > :first-child {\n\t\tmargin-right: 50px;\n\t\twidth: 15%;\n\t\t@media only screen and (max-width: 600px) {\n\t\t\twidth: 100%;\n\t\t\tmargin: 50px auto;\n\t\t\torder: 2;\n\t\t\t& button {\n\t\t\t\twidth: 80% !important;\n\t\t\t}\n\t\t}\n\t}\n"]))),x=O.d.div(a||(a=Object(g.a)(["\n\ttext-align: center;\n\t","\n"])),(function(t){return t.$is3D?"perspective: 1000":""})),k=function(t){var e=t.children,n=t.is3D;return Object(h.jsxs)(x,{$is3D:n,children:[Object(h.jsx)(m.a,{spacing:"2"}),Object(h.jsx)(y,{children:e})]})},w=n(65),z=n(2),C=n(566),S=n(542),P=function(t){var e=t.active,n=void 0!==e&&e,r=t.onClick,a=t.children,o=Object(w.a)(t,["active","onClick","children"]);return Object(h.jsx)(C.a,Object(j.a)(Object(j.a)({style:{width:"100%",wordWrap:"break-word",marginBottom:10},variant:n?"success":"warning",onClick:Object(S.d)(r)},o),{},{children:a}))},D=function(t){var e=t.state,n=t.provider,r=n.generateNewCollisionCoordinates,a=n.togglePerspective,o=n.toggleDimension,i=e.is3D,c=e.isSideView,l=Object(z.useMemo)((function(){return[{label:"New Collision Coordinates",onClick:r},{label:"Toggle 3D (Experimental)",onClick:o,active:i},{label:"Toggle Side View",onClick:a,active:c,disabled:!i}].map((function(t){var e=t.label,n=Object(w.a)(t,["label"]);return Object(h.jsx)(P,Object(j.a)(Object(j.a)({},n),{},{children:e}),e)}))}),[r,i,c,o,a]);return Object(h.jsx)("div",{children:l})},$=Object(z.memo)(D),E=n(80),I=n(44),M=n(4),A=n(11),V=n(558),N=n(7),F=n.n(N),Z=n(16),B=function(){var t=Object(z.useRef)(!0);return Object(z.useEffect)((function(){return function(){t.current=!1}}),[]),t},T=(n(580),O.d.div(o||(o=Object(g.a)([""])))),X=O.d.div(i||(i=Object(g.a)(["\n\t","\n\theight: calc(var(--tile-size) * 1px);\n\twidth: calc(var(--tile-size) * 1px);\n\ttransform-style: preserve-3d;\n\tposition: absolute;\n\ttransform-origin: center center;\n\ttransition: 300ms;\n\n\ttransform: scale(1, 1) translateZ(calc(var(--tile-size) / 2 * -1px));\n\n\t& > "," {\n\t\tborder: 1px solid var(--primary-background);\n\n\t\theight: calc(var(--tile-size) * 1px);\n\t\twidth: calc(var(--tile-size) * 1px);\n\t\t/* transform-origin: 50% 50%; */\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\tposition: absolute;\n\n\t\t/** @see https://codepen.io/jh3y/pen/BaKqQLJ */\n\t\t&:nth-of-type(1) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(2) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg) rotateY(180deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(3) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg) rotateY(90deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(4) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg) rotateY(-90deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(5) {\n\t\t\tbackground-color: var(--secondary-background);\n\t\t\ttransform: translate(-50%, -50%)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(6) {\n\t\t\ttransform: translate(-50%, -50%)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * -1px)) rotateX(180deg);\n\t\t}\n\t}\n\n\t&.bouncy-block- {\n\t\t&no-animation {\n\t\t\ttransform: translateZ(calc(var(--tile-size) / 2 * 1px));\n\t\t\t& > "," {\n\t\t\t\tbackground-color: var(--secondary-color);\n\t\t\t}\n\t\t}\n\n\t\t&0 {\n\t\t\ttransform: translateZ(calc(var(--tile-size) / 2 * 1px))\n\t\t\t\trotateX(0deg) rotateY(0deg) rotateZ(0deg);\n\t\t}\n\t}\n"])),(function(t){var e=t.$size;return"\n\t\t--tile-size: ".concat(e,";\n\t")}),T,T),R=function(t){var e=t.size,n=t.top,r=t.left,a=t.animate,o=void 0!==a&&a,i=t.variant,c=t.color,l=t.collisionIndex,s=t.style,u=t.className,d=Object(w.a)(t,["size","top","left","animate","variant","color","collisionIndex","style","className"]),b="cuboid bouncy-block-".concat((o?l:"no-animation")||0," ").concat(i).concat(u&&" ".concat(u)||"");return Object(h.jsx)(X,Object(j.a)(Object(j.a)({className:b,style:Object(j.a)(Object(j.a)({},s),{},{top:n,left:r,width:e,height:e}),$size:e},d),{},{children:Array(6).fill(0).map((function(t,n){return Object(h.jsx)(T,{style:Object(j.a)(Object(j.a)({},c&&{backgroundColor:c}),{},{width:e,height:e})},n)}))}))},W=function(t,e){return"".concat(e?"transform: translateZ(calc(var(--tile-size) / 2 * 2px)) rotateX(".concat(t,"deg) rotateY(").concat(t,"deg)"):"transform: rotate(".concat(t,"deg)"),";")},q=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(O.e)(c||(c=Object(g.a)(["\n\t0% { "," }\n\t\n\t/* 40% -> 100% */\n\t","\n"])),W(0,t),Array(7).fill(0).map((function(e,n){return"".concat(10*(n+4),"% { ").concat(W((n+1)*(t&&(n<6?90:100)||n<4&&90||n<6&&270||360),t)," }")})).join("\n"))},G=O.d.div(l||(l=Object(g.a)(["\n\tanimation: "," linear forwards;\n"])),q()),U=Object(O.d)(R)(s||(s=Object(g.a)(["\n\t/* "," */\n\tanimation: "," linear forwards;\n"])),(function(t){var e=t.size;return"\n\t\t--tile-size: ".concat(e,";\n\t")}),q(!0)),Y=function(t){var e=t.color,n=t.firingDuration,r=t.explodingDuration,a=t.playerId,o=t.currentOnlinePlayerId,i=t.tileSize,c=t.id,l=t.top,s=t.left,u=t.triggerExplosion,d=t.onExplosionComplete,b=t.is3D,p=Object(z.useState)(M.c.Firing),f=Object(E.a)(p,2),j=f[0],v=f[1],g=B(),O=!o||a===o;Object(z.useEffect)((function(){O&&function(){var t=Object(Z.a)(F.a.mark((function t(){return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(S.c)(1e3*n);case 2:if(g.current){t.next=4;break}return t.abrupt("return");case 4:u(c,function(){var t=Object(Z.a)(F.a.mark((function t(e){return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(g.current){t.next=2;break}return t.abrupt("return");case 2:return v(M.c.Exploding),t.next=5,Object(S.c)(1e3*r);case 5:if(g.current){t.next=7;break}return t.abrupt("return");case 7:d(c),e.forEach((function(t){d(t)}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[]);var m=i/2,y=m/2,x={position:"absolute",backgroundColor:e,width:m,height:m,top:l+y,left:s+y,animationDuration:"".concat(n,"s")};return j===M.c.Firing&&(!b&&Object(h.jsx)(G,{style:x})||Object(h.jsx)(U,{size:m,top:Number(x.top),left:Number(x.left),animate:!1,variant:M.d.Bomb,color:I.b.palette.color.error,collisionIndex:1,style:x}))||null},L=n(552),J=function(t){var e=t.id,n=t.currentOnlinePlayerId,r=(t.name,t.size),a=t.tileSize,o=t.coordinates,i=o.top,c=o.left,l=t.keyboardConfig,s=t.is3D,u=t.highlight,d=void 0!==u&&u,b=Object(w.a)(t,["id","currentOnlinePlayerId","name","size","tileSize","coordinates","keyboardConfig","is3D","highlight"]),p=(a-r)/2,f=p+i,v=p+c;return s&&Object(h.jsx)(R,Object(j.a)({id:e,size:r,top:f,left:v,animate:!0,color:I.b.palette.color.success,style:{transform:A.a},variant:M.h[e]},b))||Object(h.jsx)(L.a,Object(j.a)({id:e,currentOnlinePlayerId:n,name:e,coordinates:{top:f,left:v},keyboardConfig:l,highlight:d,size:r},b))},H=n(549),K=function(t){var e=t.state,n=t.provider,r=t.playerId,a=t.gameId,o=n.triggerExplosion,i=n.onExplosionComplete,c=n.updatePlayerIsWalking,l=e.gameMap,s=e.players,u=e.bombs,d=e.is3D,b=e.config,p=Object(V.a)(a||"").onPlayerDeath;return Object(h.jsxs)(h.Fragment,{children:[Object.entries(s).map((function(t){var e=Object(E.a)(t,2),n=e[0],a=e[1],o=a.coordinates,i=a.state,s=Object(w.a)(a,["coordinates","state"]),u=!Object(A.n)(i,b.powerUps),f=Object(A.o)(l,o,b.sizes.movement);return u&&Object(h.jsx)(J,Object(j.a)({currentOnlinePlayerId:r,name:"Bomber",size:b.sizes.character,tileSize:b.sizes.tile,coordinates:o,is3D:d,highlight:f,onPlayerIsWalking:c},s),n)||Object(h.jsx)(H.a,{id:n,name:n,coordinates:o,size:b.sizes.character,explodingDuration:b.duration.bomb.exploding,onDeathAnimationComplete:p},n)})),Object.values(u).map((function(t){var e,n=t.id,a=t.playerId,c=Object(w.a)(t,["id","playerId"]),l=null===(e=s[a])||void 0===e?void 0:e.state;if(!l)return null;var u=Object(A.k)(l,M.j.BombSize,b.powerUps);return Object(h.jsx)(Y,Object(j.a)(Object(j.a)({id:n,playerId:a,currentOnlinePlayerId:r},c),{},{color:I.b.palette.color.error,tileSize:b.sizes.tile,explosionSize:u,firingDuration:b.duration.bomb.firing,explodingDuration:b.duration.bomb.exploding,triggerExplosion:o,onExplosionComplete:i,is3D:d}),n)}))]})},Q=n(579),_=n(545),tt=O.d.div.attrs((function(t){var e=t.$size,n=t.$top,r=t.$left,a=t.$color;return{style:Object(j.a)({width:e,height:e,top:n,left:r},a&&{backgroundColor:a})}}))(d||(d=Object(g.a)(["\n\tposition: absolute;\n\t/* background-color: ","; */\n\tborder: 1px solid ",";\n\t","\n"])),I.b.palette.background.secondary,I.b.palette.background.primary,(function(t){var e=t.$color,n=t.$collisionIndex,r=t.$animate,a=t.$fireSquare;return a&&Object(O.c)(b||(b=Object(g.a)(["\n\t\t\t\t\tborder: none;\n\t\t\t\t\tanimation: ","\n\t\t\t\t\t\tcalc(var(--firing-duration) / 2)\n\t\t\t\t\t\tvar(--ease-in-out-quint) forwards;\n\t\t\t\t"])),function(t){var e=0,n=0,r="",a="",o="",i="";return t===M.d.FireHorizontal?e=1:t===M.d.FireVertical?n=1:(e=.5,n=.5,r=" rotate(90deg)",a=" rotate(360deg)",o="border-radius: 50%;",i="border-radius: 0%;"),Object(O.e)(u||(u=Object(g.a)(["\n\t\t// cool effect\n\t\t/* 0% { border: 16px solid ","; transform: scale(",", ",")","; "," } */\n\t\t0% { background-color: ","; transform: scale(",", ",")","; "," }\n\t\t20% { background-color: ","; }\n\t\t40% { background-color: ","; }\n\t\t50% { "," }\n\t\t60% { background-color: ","; }\n\t\t80% { background-color: ","; }\n\t\t100% { background-color: ","; transform: scale(1)",";  }\n\t"])),I.b.palette.background.primary,e,n,r,o,I.b.palette.background.primary,e,n,r,o,I.b.palette.color.error,I.b.palette.color.info,i,I.b.palette.color.error,I.b.palette.color.info,I.b.palette.color.error,a)}(a))||r&&e&&Object(O.c)(p||(p=Object(g.a)(["\n\t\t\t\t\ttransform: scale(0, 0);\n\t\t\t\t\tz-index: 9999;\n\t\t\t\t\tanimation: ","\n\t\t\t\t\t\tvar(--block-animation-duration) ease\n\t\t\t\t\t\tcalc(\n\t\t\t\t\t\t\t"," *\n\t\t\t\t\t\t\t\tvar(--incremental-animation-delay)\n\t\t\t\t\t\t)\n\t\t\t\t\t\tforwards;\n\t\t\t\t"])),Object(_.a)(),n)||""})),et=function(t){var e=t.size,n=t.top,r=t.left,a=t.color,o=t.collisionIndex,i=t.animate,c=void 0!==i&&i,l=t.fireSquare;return Object(h.jsx)(tt,{$size:e,$top:n,$left:r,$animate:c,$color:a,$collisionIndex:o,$fireSquare:l})},nt=Object(z.memo)(et),rt=n(550),at=n(551),ot=function(t){var e=t.variant,n=t.top,r=t.left,a=t.size,o=at.a[e],i=o.icon,c=o.color;return Object(h.jsx)(rt.a,{$top:n,$left:r,$size:a,children:Object(h.jsx)(i,{color:c})})},it=O.d.div(f||(f=Object(g.a)(["\n\t","\n\tborder-radius: ",";\n\tbackground-color: ",";\n\tposition: relative;\n\tbox-shadow: 0 10px 20px rgba(0, 0, 0, 0.5), 0 6px 6px rgba(0, 0, 0, 0.6);\n\ttransition: transform var(--block-animation-duration);\n\n\t","\n"])),(function(t){var e=t.$mapSize,n=t.$tileSize;return"\n\t\twidth: calc(".concat(n,"px * ").concat(e,");\n\t\theight: calc(").concat(n,"px * ").concat(e,");\n\t")}),I.b.shape.borderRadius,I.b.palette.background.secondary,(function(t){var e=t.$is3D,n=t.$isTopView,r="";return e&&(r+="transform-style: preserve-3d;",n||(r+="\ntransform: rotateX(-24deg) rotateY(-24deg) rotateX(90deg);")),r})),ct=function(t){var e=t.sizes,n=e.map,r=e.tile,a=t.gameMap,o=t.is3D,i=t.isTopView,c=t.animationCounter,l=t.children,s=c!==Object(Q.a)(c);Object(z.useEffect)((function(){s=!0}),[]);var u=1;return Object(h.jsxs)(it,{$mapSize:n,$tileSize:r,$is3D:o,$isTopView:i,children:[Object.keys(a).map((function(t,e){return Object.values(a[t]).map((function(t,n){var a,i=t===M.k.NonBreaking||t===M.k.Breaking,c="".concat(e,"_").concat(n),l=r,d=e*r,b=n*r;if(Object(A.p)(t))return Object(h.jsx)(ot,{size:l,variant:t,top:d,left:b},c);t!==M.d.FireCore&&t!==M.d.FireHorizontal&&t!==M.d.FireVertical||(a=t);var p=Object(j.a)({key:c,size:l,top:d,left:b,animate:s,variant:t,fireSquare:a},i&&{color:I.b.palette.color[t===M.k.NonBreaking?"secondary":"primary"],collisionIndex:u++});return o&&(i&&Object(h.jsx)(R,Object(j.a)({},p))||Object(h.jsx)(nt,Object(j.a)({},p)))||Object(h.jsx)(nt,Object(j.a)({},p))}))})),l]})},lt=function(t){var e=t.sizes,n=t.children,r=t.gameMap,a=t.is3D,o=t.isSideView,i=t.animationCounter;return Object(h.jsx)(ct,{sizes:e,gameMap:r,is3D:a,isTopView:!o,animationCounter:i,children:n})},st=function(t){var e=Object(v.a)(t),n=function(t){var e=t.state,n=e.is3D,r=e.gameMap,a=e.isSideView,o=e.animationCounter,i=e.config,c=t.gameId,l=t.type;return{gameContainerProps:{is3D:n},gameSettingProps:Object(j.a)(Object(j.a)({},t),{},{type:l}),gameMapProps:{sizes:i.sizes,gameMap:r,is3D:n,isSideView:a,animationCounter:o},gameContentProps:Object(j.a)(Object(j.a)({},t),{},{gameId:c})}}(t),r=n.gameContainerProps,a=n.gameSettingProps,o=n.gameMapProps,i=n.gameContentProps;return Object(h.jsxs)(k,Object(j.a)(Object(j.a)({},r),{},{children:[Object(h.jsx)($,Object(j.a)({},a)),Object(h.jsx)(lt,Object(j.a)(Object(j.a)({},o),{},{children:Object(h.jsx)(K,Object(j.a)({},i))})),e]}))}}}]);
//# sourceMappingURL=15.12cc399d.chunk.js.map
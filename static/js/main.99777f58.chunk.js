(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{41:function(t,e,n){},48:function(t,e,n){},49:function(t,e,n){},52:function(t,e,n){"use strict";n.r(e);var r,a,o,i,c,l,s,u,b,d,f=n(0),p=n.n(f),v=n(23),m=n.n(v),g=(n(41),n(5)),j=n(6),O=j.c.div(r||(r=Object(g.a)(["\n\twidth: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n"]))),y=n(3);!function(t){t.UP="Up",t.RIGHT="Right",t.DOWN="Down",t.LEFT="Left"}(a||(a={})),function(t){t.X="X",t.Y="Y"}(o||(o={})),function(t){t.Firing="Firing",t.Exploding="Exploding",t.Exploded="Exploded"}(i||(i={})),function(t){t.P1="P1",t.P2="P2",t.P3="P3",t.P4="P4"}(c||(c={})),(s=l||(l={})).Empty="T1",s.Breaking="T2",s.NonBreaking="T3",(b=u||(u={})).Life="PU1",b.BombCount="PU2",b.BombSize="PU3",b.MovementSpeed="PU4",function(t){t.Bomb="B",t.FireCore="FC",t.FireHorizontal="FH",t.FireVertical="FV"}(d||(d={}));var h,x,k,w=n(10),E={title:"Bomberman - Work In Progress",game:(k={blockDensity:8,powerUpChance:5,deathCount:0},Object(y.a)(k,u.Life,1),Object(y.a)(k,u.BombCount,1),Object(y.a)(k,u.BombSize,1),Object(y.a)(k,u.MovementSpeed,200),Object(y.a)(k,"powerUps",(h={},Object(y.a)(h,u.Life,0),Object(y.a)(h,u.BombCount,0),Object(y.a)(h,u.BombSize,0),Object(y.a)(h,u.MovementSpeed,0),h)),Object(y.a)(k,"powerUpIncreaseValue",(x={},Object(y.a)(x,u.Life,1),Object(y.a)(x,u.BombCount,1),Object(y.a)(x,u.BombSize,1),Object(y.a)(x,u.MovementSpeed,-50),x)),k),size:{game:15,character:32,tile:32,movement:32,collisionMin:1,collisionMax:1,bomb:16,explosion:1},duration:{movement:200,bomb:{firing:2,exploding:1}},keyboardConfig:{player:{P1:{MoveUp:w.j,MoveRight:w.b,MoveDown:w.f,MoveLeft:w.a,DropBomb:w.h},P2:{MoveUp:w.i,MoveRight:w.e,MoveDown:w.c,MoveLeft:w.d,DropBomb:w.g}}}};E.size.collisionMin=Math.floor(E.size.game*E.size.game/3),E.size.collisionMax=Math.floor(E.size.game*E.size.game/2);var S,z=E,C=n(7),M=n(2),T=n(8),P=n(28),I=n(9),q=n(11);function D(t,e){var n=e||t,r=void 0!==e&&t||0;return Math.floor(Math.random()*(n-r))+r}var R,B=z.size.game-1,L=[[0,0],[0,1],[1,0],[0,B],[0,B-1],[1,B],[B,B],[B,B-1],[B-1,B],[B,0],[B,1],[B-1,0]],N=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L,n=[].concat(Object(q.a)(Object.keys(l)),Object(q.a)(Array(11-z.game.blockDensity).fill("Empty"))),r=Array(t).fill(0).map((function(){return Array(t).fill(0).map((function(){return l[n[D(n.length)]]}))}));return e.forEach((function(t){var e=Object(I.a)(t,2),n=e[0],a=e[1];r[n][a]!==l.Empty&&(r[n][a]=l.Empty)})),r},A=function(t){var e=t.top,n=t.left;return{ySquare:e/z.size.movement,xSquare:n/z.size.movement}},F=function(t){var e=t.xSquare;return{top:t.ySquare*z.size.movement,left:e*z.size.movement}},G=z.size.movement*(z.size.game-1),U="translateZ(calc(var(--tile-size) / 2 * 1px)) rotateX(0deg) rotateY(0deg) scale(1, 1)",$=(S={},Object(y.a)(S,o.X,{REPLACE:/rotateX\(-?\d+deg\)/g,FIND:Object(P.a)(/rotateX\((\x2D?[0-9]+)deg\)/,{degree:1})}),Object(y.a)(S,o.Y,{REPLACE:/rotateY\(-?\d+deg\)/g,FIND:Object(P.a)(/rotateY\((\x2D?[0-9]+)deg\)/,{degree:1})}),S),_=function(t,e,n){t.style.transition="".concat(n,"ms"),t.style.transform=function(t,e){var n=90,r=o.Y;return e!==a.DOWN&&e!==a.LEFT||(n*=-1),e!==a.UP&&e!==a.DOWN||(r=o.X),t.replace($[r].REPLACE,"rotate".concat(r,"(").concat(n,"deg)"))}(t.style.transform,e)},V=function(t,e,n){var r,o=t.playerConfig,i=o.id,c=o.coordinates,s=c.top,u=c.left,b=o.ref,f=t.direction,p=t.is3D,v=t.gameMap,m=s,g=u;switch(f){case a.UP:m=s-z.size.movement;break;case a.RIGHT:g=u+z.size.movement;break;case a.DOWN:m=s+z.size.movement;break;case a.LEFT:g=u-z.size.movement}(function(t,e,n){var r,a=A({top:t,left:e}),o=a.xSquare,i=null===(r=n[a.ySquare])||void 0===r?void 0:r[o];return!(i===l.Breaking||i===l.NonBreaking||i===d.Bomb)&&!(e<0||e>G)&&!(t<0||t>G)})(m,g,v)&&(p&&((r=b).style.transition="0ms",r.style.transform=U),setTimeout((function(){p&&_(b,f,e),n({playerId:i,newCoordinates:{top:m,left:g}})}),0))};!function(t){t.HORIZONTAL="horizontal",t.VERTICAL="vertical"}(R||(R={}));var X,H,Z,Y,W,J,K,Q,tt,et,nt,rt,at,ot,it,ct,lt=function(t,e,n){var r=[];return t[e][n]===l.Breaking&&r.push({ySquare:e,xSquare:n}),r},st=function(t,e,n){var r=new Set;return Object.values(t).forEach((function(t){var a=t.id,o=t.coordinates,i=A(o),c=i.xSquare,l=i.ySquare;c===n&&l===e&&r.add(a)})),r},ut=function(t){var e,n;if(void 0!==t.xSquare)e=t.xSquare,n=t.ySquare;else{var r=A(t);e=r.xSquare,n=r.ySquare}return{xSquare:e,ySquare:n}},bt=function(t){return t<0||t>=z.size.game},dt=function(t,e,n){for(var r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=ut(e),i=o.xSquare,c=o.ySquare,s={xSquare:i,ySquare:c},u=(r={},Object(y.a)(r,R.HORIZONTAL,[s]),Object(y.a)(r,R.VERTICAL,[s]),r),b=function(t,e,n){u[n].push({xSquare:t,ySquare:e})},f=[[0,-1],[1,0],[0,1],[-1,0]],p=[R.VERTICAL,R.HORIZONTAL,R.VERTICAL,R.HORIZONTAL],v=0;v<4;v++)for(var m=i,g=c,j=p[v],O=!0,h=0;h<n;h++)if(O){var x=Object(I.a)(f[v],2),k=x[0],w=x[1];if(g+=w,!bt(m+=k)&&!bt(g)){var E=t[g][m];if(a){if(E!==d.FireHorizontal&&E!==d.FireVertical)continue;b(m,g,j)}switch(E){case l.Breaking:b(m,g,j),O=!1;break;case l.NonBreaking:O=!1;break;default:b(m,g,j)}}}return u},ft=function(t,e,n,r){var a,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=[],c=new Set,l=(a={},Object(y.a)(a,R.HORIZONTAL,[]),Object(y.a)(a,R.VERTICAL,[]),a),s=dt(t,n,r,o);return Object.keys(s).forEach((function(n){s[n].forEach((function(r){var a=r.ySquare,o=r.xSquare;l[n].push({xSquare:o,ySquare:a}),lt(t,a,o).forEach((function(t){i.push(t)})),st(e,a,o).forEach((function(t){c.add(t)}))}))})),{coordinatesToSetOnFire:l,tilesToBreak:i,playersToKill:c}},pt=function(t,e){return t[e]+t.powerUps[e]*z.game.powerUpIncreaseValue[e]},vt=function(t){var e=t.id,n=t.coordinates,r=n.top,a=n.left,o=t.state,i=pt(o,u.BombSize);return{id:(new Date).toJSON(),explosionSize:i,top:r,left:a,playerId:e}},mt=function(t,e,n){var r=z.game,a=(r.blockDensity,Object(T.a)(r,["blockDensity"]));return{id:t,coordinates:{top:32*e,left:32*n},ref:null,state:Object(M.a)(Object(M.a)({},a),{},{powerUps:Object(M.a)({},a.powerUps)})}},gt=function(){var t=[].concat(Object(q.a)(Object.values(u)),Object(q.a)(Array(6-z.game.powerUpChance).fill(null)));return t[D(t.length)]},jt=function(t){return Object.values(u).includes(t)},Ot=function(t,e,n,r){if(!(t>B||e>B||t<0||e<0)){var a=r[t][e];if(t===n.top&&e===n.left)return 0;if(a===l.Empty)return 1;if(a===l.Breaking)return-1;if(a!==l.NonBreaking)return 0}},yt=function t(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l={},s=i?e:c.top,u=i?n:c.left;return Object.values(a).forEach((function(i){var c=e,b=n;switch(i){case a.LEFT:b-=1;break;case a.UP:c-=1;break;case a.RIGHT:b+=1;break;case a.DOWN:c+=1}var d=Ot(c,b,{top:s,left:u},r);l[i]={topCoordinate:c,leftCoordinate:b,score:d},o>0&&d&&(l[i]=Object(M.a)(Object(M.a)({},l[i]),{child:t(c,b,r,o-1,!1,{top:s,left:u})}))})),l},ht=function(t,e,n){var r=yt(t,e,n);console.log(r);var a,o=null,i=null;return Object.entries(r).forEach((function(t){var e=Object(I.a)(t,2),n=e[0],r=e[1],c=function(t,e){var n=null;return void 0===e.score?n:n=e.score}(0,r);(!i||c&&i<c)&&(i=c,o=r,a=n)})),o?a:null},xt=function(t,e){var n=Object(f.useRef)();Object(f.useEffect)((function(){n.current=t}),[t]),Object(f.useEffect)((function(){var t=setInterval((function(){var t;null===(t=n.current)||void 0===t||t.call(n)}),e);return function(){return clearInterval(t)}}),[e])},kt=n(12),wt=z.size.game-1,Et=mt("P1",0,0),St=mt("P2",0,wt),zt=mt("P3",wt,wt),Ct=mt("P4",wt,0),Mt="Game",Tt={players:{P1:Et},bombs:[],gameMap:N(z.size.game),is3D:!1,isSideView:!1,size:z.size.game,animationCounter:0,powerUps:{}},Pt={P1:Et,P2:St,P3:zt,P4:Ct},It=Object.values(d).filter((function(t){return t!==d.Bomb})),qt="".concat(Mt,"/SET_GAME_STATE"),Dt="".concat(Mt,"/START_GAME"),Rt="".concat(Mt,"/SET_GAME_MAP"),Bt="".concat(Mt,"/SET_PLAYER_REF"),Lt="".concat(Mt,"/MAKE_MOVE"),Nt="".concat(Mt,"/TRIGGER_MOVE"),At="".concat(Mt,"/DROP_BOMB"),Ft="".concat(Mt,"/REMOVE_BOMB"),Gt="".concat(Mt,"/TRIGGER_EXPLOSION"),Ut="".concat(Mt,"/ON_EXPLOSION_COMPLETE"),$t="".concat(Mt,"/TRIGGER_ANIMATION"),_t="".concat(Mt,"/TOGGLE_GAME_DIMENSION"),Vt="".concat(Mt,"/TOGGLE_GAME_PERSPECTIVE"),Xt="".concat(Mt,"/TOGGLE_GAME_TWO_PLAYER"),Ht="".concat(Mt,"/TOGGLE_GAME_NPC"),Zt=function(t){return t.Game||Tt},Yt=function(){return Object(kt.a)(Zt,(function(t){return t.players}))},Wt=function(){return Object(kt.a)(Zt,(function(t){return t.is3D}))},Jt=function(){return Object(kt.a)(Zt,(function(t){return t.isSideView}))},Kt=function(){return Object(kt.a)(Zt,(function(t){return t.gameMap}))},Qt=function(t){return{type:Rt,payload:t}},te=function(){var t=Object(C.b)(),e=Object(C.c)(Object(kt.a)(Zt,(function(t){return t.size}))),n=Object(f.useCallback)((function(e){return t(function(t){return{type:qt,payload:t}}(e))}),[t]),r=Object(f.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t(Qt({gameMap:e,animate:n}))}),[t]),a=Object(f.useCallback)((function(){return r(N(e),!0)}),[e,r]),o=Object(f.useCallback)((function(e){return t({type:Bt,payload:e})}),[t]),i=Object(f.useCallback)((function(e){return t({type:Lt,payload:e})}),[t]),c=Object(f.useCallback)((function(e){return t((n=Object(M.a)(Object(M.a)({},e),{},{onComplete:i}),{type:Nt,payload:n}));var n}),[t,i]),l=Object(f.useCallback)((function(e){return t({type:At,payload:e})}),[t]),s=Object(f.useCallback)((function(e){return t({type:Ft,payload:e})}),[t]),u=Object(f.useCallback)((function(e,n){return t(function(t,e){return{type:Gt,payload:t,cb:e}}(e,n))}),[t]),b=Object(f.useCallback)((function(e){t({type:Ut,payload:e})}),[t]),d=Object(f.useCallback)((function(){return t({type:$t})}),[t]),p=Object(f.useCallback)((function(){return t({type:_t})}),[t]),v=Object(f.useCallback)((function(){return t({type:Vt})}),[t]),m=Object(f.useCallback)((function(){return t({type:Xt})}),[t]),g=Object(f.useCallback)((function(){return t({type:Ht})}),[t]);return{updateGameSettings:n,generateNewCollisionCoordinates:a,setPlayerRef:o,makeMove:i,triggerMove:c,dropBomb:l,removeBomb:s,triggerExplosion:u,onExplosionComplete:b,triggerAnimation:d,toggleDimension:p,togglePerspective:v,toggleTwoPlayer:m,toggleNPC:g}},ee=function(){var t=te(),e=t.dropBomb,n=t.triggerMove,r=Object(C.c)(Kt()),o=Object(C.c)(Wt()),i=Object(C.c)(Yt()),l=Object(f.useRef)({P1:(new Date).getTime(),P2:(new Date).getTime(),P3:(new Date).getTime(),P4:(new Date).getTime()}),s=Object(f.useRef)({}),b=Object(f.useMemo)((function(){var t,e=null===(t=i.P4)||void 0===t?void 0:t.state;return e?pt(e,u.MovementSpeed):Number.MAX_SAFE_INTEGER}),[i.P4]);return xt((function(){i.P4&&function(t){var e=t.players,n=t.gameMap,r=t.triggerMove,a=c.P4,o=e[a];if(o){var i=o.coordinates.top/z.size.character,l=o.coordinates.left/z.size.character,s=ht(i,l,n);console.log(s),s&&r({playerId:a,direction:s})}}({players:i,gameMap:r,triggerMove:n,dropBomb:e})}),b),Object(f.useEffect)((function(){var t=function(t,e){var r=function(t,e){var n=e.MoveUp,r=e.MoveRight,o=e.MoveDown,i=e.MoveLeft;return[t.current[n]&&a.UP,t.current[r]&&a.RIGHT,t.current[o]&&a.DOWN,t.current[i]&&a.LEFT].filter(Boolean)}(s,e);r.length&&r.forEach((function(e){n({playerId:t,direction:e})}))},r=function(){s.current&&Object.keys(i).forEach((function(n){var r=z.keyboardConfig.player[n],a=i[n].state,o=pt(a,u.MovementSpeed);if(r){if(i[n].ref){var c=(new Date).getTime();c-l.current[n]>o&&(l.current[n]=c,t(n,r))}!function(t,n){var r=n.DropBomb;s.current[r]&&e(t)}(n,r)}}))},o=function(t){if(s.current&&l.current){var e="keydown"===t.type;!function(t,e){s.current[t.code]=e}(t,e),e&&r()}};return window.addEventListener("keyup",o),window.addEventListener("keydown",o),function(){window.removeEventListener("keyup",o),window.removeEventListener("keydown",o)}}),[e,r,o,i,n]),{}},ne=n(1),re=j.c.div(X||(X=Object(g.a)(["\n\tdisplay: flex;\n\tjustify-content: center;\n\tflex-wrap: wrap;\n\n\t& > :first-child {\n\t\tmargin-right: 50px;\n\t\twidth: 15%;\n\t\t@media only screen and (max-width: 600px) {\n\t\t\twidth: 100%;\n\t\t\tmargin: 50px auto;\n\t\t\torder: 2;\n\t\t\t& button {\n\t\t\t\twidth: 80% !important;\n\t\t\t}\n\t\t}\n\t}\n"]))),ae=j.c.div(H||(H=Object(g.a)(["\n\ttext-align: center;\n\t","\n"])),(function(t){return t.$is3D?"perspective: 1000":""})),oe=function(t){var e=t.children,n=Object(C.c)(Wt());return Object(ne.jsxs)(ae,{$is3D:n,children:[Object(ne.jsx)("h1",{children:z.title}),Object(ne.jsx)(re,{children:e})]})},ie={palette:{background:{primary:"var(--primary-background)",secondary:"var(--secondary-background)"},color:{primary:"var(--primary-color)",secondary:"var(--secondary-color)",error:"var(--error-color)",warning:"var(--warning-color)",success:"var(--success-color)",info:"var(--info-color)",default:"var(--default-color)"}},shape:{borderRadius:"var(--border-radius)",padding:"var(--padding)"},game:{character:{size:"var(--character-size)"},tile:{size:"var(--tile-size)"}}},ce=Object(j.a)(Z||(Z=Object(g.a)(["\n\t:root {\n\t\t/* #region COLORS */\n\t\t--primary-background: #13141b;\n\t\t--secondary-background: #1a1d28;\n\n\t\t--primary-color: #ec7ebd;\n\t\t--secondary-color: #763ee6;\n\n\t\t/* --error-color: rgb(255, 122, 105);\n\t\t--warning-color: rgb(241, 168, 23);\n\t\t--success-color: rgb(49, 162, 76);\n\t\t--info-color: rgb(134, 218, 255);\n\t\t--default-color: rgb(228, 230, 235); */\n\t\t--error-color: #f44336;\n\t\t--warning-color: #ff9800;\n\t\t--success-color: #4caf50;\n\t\t--info-color: #2196f3;\n\t\t--default-color: #E4E6EB;\n\t\t/* #endregion */\n\n\t\t/* #region UTILITIES */\n\t\t--border-radius: 4px;\n\t\t--padding: 10px;\n\t\t/* #endregion */\n\n\t\t/* #region GAME */\n\t\t--character-size: ","px;\n\t\t--tile-size: ","px;\n\t\t--game-size: ","px;\n\t\t--exploding-duration: ","s;\n\t\t--firing-duration: ","s;\n\t\t/* #endregion */\n\t\t\n\t\t/* #region ANIMATIONS */\n\t\t/* @see https://easings.net/#easeInOutBack */\n\t\t--ease-in-out-back: cubic-bezier(0.68, -0.6, 0.32, 1.6);\n\t\t--ease-in-out-quint: cubic-bezier(0.83, 0, 0.17, 1);\n\t\t--incremental-animation-delay: 0.03s;\n\t\t--block-animation-duration: 0.5s;\n\t\t/* #endregion */\n\n\t\t/* #region GENERICS */\n\t\t*, ::before, ::after {\n\t\t\tbox-sizing: border-box;\n\t\t}\n\n\t\thtml,\n\t\tbody,\n\t\t#root {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tmargin: 0;\n\t\t\tpadding: 0;\n\t\t}\n\n\t\thtml {\n\t\t\tbackground-color: ",";\n\t\t\t/* color: #fff; */\n\t\t}\n\n\t\t#root {\n\t\t\tposition: relative;\n\t\t}\n\n\t\tpre {\n\t\t\twhite-space: pre-wrap;\n\t\t\tword-wrap: break-word;\n\t\t}\n\t\t/* #endregion */\n\n\t\t/* #region SCROLLBARS */\n\t\t*, ::before, ::after {\n\t\t\tscroll-behavior: smooth;\n\t\t\tscrollbar-color: black transparent;\n\t\t\tscrollbar-width: thin;\n\t\t}\n\n\t\t/* width */\n\t\t::-webkit-scrollbar {\n\t\t\twidth: 5px;\n\t\t\theight: 6px;\n\t\t}\n\n\t\t/* Track */\n\t\t::-webkit-scrollbar-track {\n\t\t\tbackground: #bfbfbf;\n\t\t}\n\n\t\t/* Handle */\n\t\t::-webkit-scrollbar-thumb {\n\t\t\tbackground: black;\n\t\t\tborder-radius: 10px;\n\t\t}\n\n\t\t/* Handle on hover */\n\t\t::-webkit-scrollbar-thumb:hover {\n\t\t\tbackground: rgba(0, 0, 0, 0.7);\n\t\t}\n\t\t/* #endregion */\n\t}\n"])),z.size.character,z.size.tile,z.size.game,z.duration.bomb.exploding,z.duration.bomb.firing,ie.palette.background.primary),le=ie,se=j.c.button(Y||(Y=Object(g.a)(["\n\tbackground-color: ",";\n\t/* IGNORE SIZE FOR NOW */\n\tborder-radius: ",";\n\tpadding: ",";\n"])),(function(t){var e=t.$variant;return le.palette.color[e]}),le.shape.borderRadius,le.shape.padding),ue=function(t){var e=t.variant,n=t.size,r=t.children,a=Object(T.a)(t,["variant","size","children"]);return Object(ne.jsx)(se,Object(M.a)(Object(M.a)({$variant:e,$size:n},a),{},{children:r}))},be=Object(f.memo)(ue),de=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(e){setTimeout(e,t)}))},fe=function(t){var e,n=t.active,r=void 0!==n&&n,a=t.onClick,o=t.children,i=Object(T.a)(t,["active","onClick","children"]);return Object(ne.jsx)(be,Object(M.a)(Object(M.a)({style:{width:"100%",wordWrap:"break-word",marginBottom:10},variant:r?"success":"warning",size:"medium",onClick:(e=a,function(t){t.currentTarget.blur(),e(t)})},i),{},{children:o}))},pe=function(){var t=te(),e=t.generateNewCollisionCoordinates,n=t.togglePerspective,r=t.toggleDimension,a=t.toggleTwoPlayer,o=t.toggleNPC,i=Object(C.c)(Wt()),c=Object(C.c)(Jt()),l=Object(C.c)(Yt()),s=[{label:"New Collision Coordinates",onClick:e},{label:"Toggle 3D (Experimental)",onClick:r,active:i},{label:"Toggle Side View",onClick:n,active:c,disabled:!i},{label:"Toggle Two-Player Mode",onClick:a,active:!!l.P2},{label:"Toggle NPC",onClick:o,active:!!l.P4}];return Object(ne.jsx)("div",{children:s.map((function(t){var e=t.label,n=Object(T.a)(t,["label"]);return Object(ne.jsx)(fe,Object(M.a)(Object(M.a)({},n),{},{children:e}),e)}))})},ve=function(t){var e=Object(f.useRef)();return Object(f.useEffect)((function(){e.current=t}),[t]),e.current},me=n(18),ge=n.n(me),je=n(27),Oe=(n(48),j.c.div(W||(W=Object(g.a)([""])))),ye=j.c.div(J||(J=Object(g.a)(["\n\t","\n\theight: calc(var(--tile-size) * 1px);\n\twidth: calc(var(--tile-size) * 1px);\n\ttransform-style: preserve-3d;\n\tposition: absolute;\n\ttransform-origin: center center;\n\ttransition: 300ms;\n\n\ttransform: scale(1, 1) translateZ(calc(var(--tile-size) / 2 * -1px));\n\n\t& > "," {\n\t\tborder: 1px solid var(--primary-background);\n\n\t\theight: calc(var(--tile-size) * 1px);\n\t\twidth: calc(var(--tile-size) * 1px);\n\t\t/* transform-origin: 50% 50%; */\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\tposition: absolute;\n\n\t\t/** @see https://codepen.io/jh3y/pen/BaKqQLJ */\n\t\t&:nth-of-type(1) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(2) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg) rotateY(180deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(3) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg) rotateY(90deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(4) {\n\t\t\ttransform: translate(-50%, -50%) rotateX(-90deg) rotateY(-90deg)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(5) {\n\t\t\tbackground-color: var(--secondary-background);\n\t\t\ttransform: translate(-50%, -50%)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * 1px));\n\t\t}\n\t\t&:nth-of-type(6) {\n\t\t\ttransform: translate(-50%, -50%)\n\t\t\t\ttranslateZ(calc((var(--tile-size) / 2) * -1px)) rotateX(180deg);\n\t\t}\n\t}\n\n\t&.bouncy-block- {\n\t\t&no-animation {\n\t\t\ttransform: translateZ(calc(var(--tile-size) / 2 * 1px));\n\t\t\t& > "," {\n\t\t\t\tbackground-color: var(--secondary-color);\n\t\t\t}\n\t\t}\n\n\t\t&0 {\n\t\t\ttransform: translateZ(calc(var(--tile-size) / 2 * 1px))\n\t\t\t\trotateX(0deg) rotateY(0deg) rotateZ(0deg);\n\t\t}\n\t}\n"])),(function(t){var e=t.$size;return"\n\t\t--tile-size: ".concat(e,";\n\t")}),Oe,Oe),he=Object(f.forwardRef)((function(t,e){var n=t.size,r=t.top,a=t.left,o=t.animate,i=void 0!==o&&o,c=t.variant,l=t.color,s=t.collisionIndex,u=t.style,b=t.className,d=Object(T.a)(t,["size","top","left","animate","variant","color","collisionIndex","style","className"]),f="cuboid bouncy-block-".concat((i?s:"no-animation")||0," ").concat(c).concat(b&&" ".concat(b)||"");return Object(ne.jsx)(ye,Object(M.a)(Object(M.a)({className:f,style:Object(M.a)(Object(M.a)({},u),{},{top:r,left:a,width:n,height:n}),ref:e,$size:n},d),{},{children:Array(6).fill(0).map((function(t,e){return Object(ne.jsx)(Oe,{style:Object(M.a)(Object(M.a)({},l&&{backgroundColor:l}),{},{width:n,height:n})},e)}))}))})),xe=function(t,e){return"".concat(e?"transform: translateZ(calc(var(--tile-size) / 2 * 2px)) rotateX(".concat(t,"deg) rotateY(").concat(t,"deg)"):"transform: rotate(".concat(t,"deg)"),";")},ke=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(j.d)(K||(K=Object(g.a)(["\n\t0% { "," }\n\t\n\t/* 40% -> 100% */\n\t","\n"])),xe(0,t),Array(7).fill(0).map((function(e,n){return"".concat(10*(n+4),"% { ").concat(xe((n+1)*(t&&(n<6?90:100)||n<4&&90||n<6&&270||360),t)," }")})).join("\n"))},we=j.c.div(Q||(Q=Object(g.a)(["\n\tanimation: "," linear forwards;\n"])),ke()),Ee=Object(j.c)(he)(tt||(tt=Object(g.a)(["\n\t/* "," */\n\tanimation: "," linear forwards;\n"])),(function(t){var e=t.size;return"\n\t\t--tile-size: ".concat(e,";\n\t")}),ke(!0)),Se=function(t){var e=t.color,n=t.firingDuration,r=t.explodingDuration,a=t.explosionSize,o=t.id,c=t.top,l=t.left,s=t.triggerExplosion,u=t.onExplosionComplete,b=t.is3D,p=Object(f.useState)(i.Firing),v=Object(I.a)(p,2),m=v[0],g=v[1];Object(f.useEffect)((function(){(function(){var t=Object(je.a)(ge.a.mark((function t(){return ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,de(1e3*n);case 2:s(o,function(){var t=Object(je.a)(ge.a.mark((function t(e){return ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g(i.Exploding),t.next=3,de(1e3*r);case 3:u(o),e.forEach((function(t){u(t)}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[r,a,n,s,u,c,l,o]);var j=z.size.bomb,O=j/2,y={position:"absolute",backgroundColor:e,width:j,height:j,top:c+O,left:l+O,animationDuration:"".concat(n,"s")};return m===i.Firing&&(!b&&Object(ne.jsx)(we,{style:y})||Object(ne.jsx)(Ee,{size:j,top:Number(y.top),left:Number(y.left),animate:!1,variant:d.Bomb,color:le.palette.color.error,collisionIndex:1,style:y}))||null},ze=(n(49),Object(f.forwardRef)((function(t,e){t.id,t.name;var n=t.coordinates,r=n.top,o=n.left,i=t.style,c=t.keyboardConfig,l=Object(T.a)(t,["id","name","coordinates","style","keyboardConfig"]),s=Object(f.useState)(a.DOWN),u=Object(I.a)(s,2),b=u[0],d=u[1],p=Object(f.useState)(""),v=Object(I.a)(p,2),m=v[0],g=v[1],j=Object(f.useRef)((new Date).getTime()),O=!!m;return Object(f.useEffect)((function(){var t=function(t){return c?function(t,e){var n=e.MoveUp,r=e.MoveRight,o=e.MoveDown,i=e.MoveLeft;switch(!0){case t===n:return a.UP;case t===r:return a.RIGHT;case t===o:return a.DOWN;case t===i:return a.LEFT;default:return null}}(t.code,c):null},e=function(){m&&g("")},n=function(n){var r=t(n);r?(j.current=(new Date).getTime(),g(r),function(t){d(t)}(r)):e()},r=function(){setTimeout((function(){var t=(new Date).getTime()-200;j.current>=t||e()}),200)};return document.addEventListener("keydown",n),document.addEventListener("keyup",r),function(){document.removeEventListener("keydown",n),document.removeEventListener("keyup",r)}}),[m,c]),Object(ne.jsxs)("div",Object(M.a)(Object(M.a)({className:"character","data-facing":b,"data-walking":O.toString(),ref:e,style:Object(M.a)(Object(M.a)({},i),{},{top:r,left:o})},l),{},{children:[Object(ne.jsx)("div",{className:"shadow pixel-art"}),Object(ne.jsx)("div",{className:"spritesheet-wrapper",children:Object(ne.jsx)("div",{className:"spritesheet pixel-art"})})]}))}))),Ce=Object(f.forwardRef)((function(t,e){var n=t.id,r=t.name,a=t.coordinates,o=a.top,i=a.left,l=t.keyboardConfig,s=t.is3D,u=Object(T.a)(t,["id","name","coordinates","keyboardConfig","is3D"]),b=z.size,d=(b.tile-b.character)/2,f=d+o,p=d+i,v=Object(M.a)({id:n,name:"".concat(r," ").concat(n),coordinates:{top:f,left:p},keyboardConfig:l,ref:e},u);return s&&Object(ne.jsx)(he,Object(M.a)({size:z.size.character,top:f,left:p,animate:!0,color:le.palette.color.success,style:{transform:U},variant:c[n],ref:e},u))||Object(ne.jsx)(ze,Object(M.a)({},v))})),Me=function(){var t=te().setPlayerRef,e=Object(C.c)(Yt()),n=Object(C.c)(Object(kt.a)(Zt,(function(t){return t.bombs}))),r=Object(C.c)(Wt()),a=ve(r),o=te(),i=o.triggerExplosion,c=o.onExplosionComplete,l=Object(f.useCallback)((function(e){var n=e.id,o=e.ref;return function(e){a===r&&o||t({playerId:n,newRef:e})}}),[r,a,t]);return Object(ne.jsxs)(ne.Fragment,{children:[Object.entries(e).map((function(t){var e=Object(I.a)(t,2),n=e[0],a=e[1],o=z.keyboardConfig.player[n],i=a.coordinates,c=a.state;return c.deathCount<pt(c,u.Life)&&Object(ne.jsx)(Ce,{id:n,name:"Bomber",coordinates:i,keyboardConfig:o,is3D:r,ref:l(a)},n)})),n.map((function(t){var n=t.id,a=t.playerId,o=Object(T.a)(t,["id","playerId"]),l=e[a].state,s=pt(l,u.BombSize);return Object(ne.jsx)(Se,Object(M.a)(Object(M.a)({id:n,playerId:a},o),{},{color:le.palette.color.error,explosionSize:s,firingDuration:z.duration.bomb.firing,explodingDuration:z.duration.bomb.exploding,triggerExplosion:i,onExplosionComplete:c,is3D:r}),n)}))]})},Te=Object(j.d)(et||(et=Object(g.a)(["\n\t0% { transform: scale(0, 0); }\n\t25% { transform: scale(0.9, 1.1); }\n\t50% { transform: scale(1.1, 0.9); }\n\t75% { transform: scale(0.95, 1.05); }\n\t100% { transform: scale(1, 1); }\n"]))),Pe=j.c.div.attrs((function(t){var e=t.$size,n=t.$top,r=t.$left,a=t.$color;return{style:Object(M.a)({width:e,height:e,top:n,left:r},a&&{backgroundColor:a})}}))(rt||(rt=Object(g.a)(["\n\tposition: absolute;\n\t/* background-color: ","; */\n\tborder: 1px solid ",";\n\t","\n"])),le.palette.background.secondary,le.palette.background.primary,(function(t){var e=t.$color,n=t.$collisionIndex,r=t.$animate,a=t.$fireSquare;return a&&Object(j.b)(at||(at=Object(g.a)(["\n\t\t\t\t\tborder: none;\n\t\t\t\t\tanimation: ","\n\t\t\t\t\t\tcalc(var(--firing-duration) / 2)\n\t\t\t\t\t\tvar(--ease-in-out-quint) forwards;\n\t\t\t\t"])),function(t){var e=0,n=0,r="",a="",o="",i="";return t===d.FireHorizontal?e=1:t===d.FireVertical?n=1:(e=.5,n=.5,r=" rotate(90deg)",a=" rotate(360deg)",o="border-radius: 50%;",i="border-radius: 0%;"),Object(j.d)(nt||(nt=Object(g.a)(["\n\t\t// cool effect\n\t\t/* 0% { border: 16px solid ","; transform: scale(",", ",")","; "," } */\n\t\t0% { background-color: ","; transform: scale(",", ",")","; "," }\n\t\t20% { background-color: ","; }\n\t\t40% { background-color: ","; }\n\t\t50% { "," }\n\t\t60% { background-color: ","; }\n\t\t80% { background-color: ","; }\n\t\t100% { background-color: ","; transform: scale(1)",";  }\n\t"])),le.palette.background.primary,e,n,r,o,le.palette.background.primary,e,n,r,o,le.palette.color.error,le.palette.color.info,i,le.palette.color.error,le.palette.color.info,le.palette.color.error,a)}(a))||r&&e&&Object(j.b)(ot||(ot=Object(g.a)(["\n\t\t\t\t\ttransform: scale(0, 0);\n\t\t\t\t\tz-index: 9999;\n\t\t\t\t\tanimation: ","\n\t\t\t\t\t\tvar(--block-animation-duration) ease\n\t\t\t\t\t\tcalc(\n\t\t\t\t\t\t\t"," *\n\t\t\t\t\t\t\t\tvar(--incremental-animation-delay)\n\t\t\t\t\t\t)\n\t\t\t\t\t\tforwards;\n\t\t\t\t"])),Te,n)||""})),Ie=function(t){var e=t.size,n=t.top,r=t.left,a=t.color,o=t.collisionIndex,i=t.animate,c=void 0!==i&&i,l=t.fireSquare;return Object(ne.jsx)(Pe,{$size:e,$top:n,$left:r,$animate:c,$color:a,$collisionIndex:o,$fireSquare:l})},qe=Object(f.memo)(Ie),De=n(19),Re=n(21),Be=(it={},Object(y.a)(it,u.Life,{color:le.palette.color.success,icon:function(t){return Object(ne.jsx)(De.a,Object(M.a)({icon:Re.b},t))}}),Object(y.a)(it,u.BombCount,{color:le.palette.color.error,icon:function(t){return Object(ne.jsx)(De.a,Object(M.a)({icon:Re.a},t))}}),Object(y.a)(it,u.BombSize,{color:le.palette.color.warning,icon:function(t){return Object(ne.jsx)(De.a,Object(M.a)({icon:Re.c},t))}}),Object(y.a)(it,u.MovementSpeed,{color:le.palette.color.info,icon:function(t){return Object(ne.jsx)(De.a,Object(M.a)({icon:Re.d},t))}}),it),Le=function(t){var e=t.variant,n=t.top,r=t.left,a=t.size,o=Be[e],i=o.icon,c=o.color;return Object(ne.jsx)("div",{style:{position:"absolute",top:n,left:r,width:a,height:a},children:Object(ne.jsx)(i,{color:c})})},Ne=j.c.div(ct||(ct=Object(g.a)(["\n\twidth: ",";\n\theight: ",";\n\tborder-radius: ",";\n\tbackground-color: ",";\n\tposition: relative;\n\tbox-shadow: 0 10px 20px rgba(0, 0, 0, 0.5), 0 6px 6px rgba(0, 0, 0, 0.6);\n\ttransition: transform var(--block-animation-duration);\n\n\t","\n"])),(function(t){var e=t.$size;return"calc(".concat(le.game.tile.size," * ").concat(e,")")}),(function(t){var e=t.$size;return"calc(".concat(le.game.tile.size," * ").concat(e,")")}),le.shape.borderRadius,le.palette.background.secondary,(function(t){var e=t.$is3D,n=t.$isTopView,r="";return e&&(r+="transform-style: preserve-3d;",n||(r+="\ntransform: rotateX(-24deg) rotateY(-24deg) rotateX(90deg);")),r})),Ae=function(t){var e=t.size,n=t.gameMap,r=t.is3D,a=t.isTopView,o=t.animationCounter,i=t.children,c=o!==ve(o),s=1;return Object(ne.jsxs)(Ne,{$size:e,$is3D:r,$isTopView:a,children:[n.map((function(t,e){return t.map((function(t,n){var a,o=t===l.NonBreaking||t===l.Breaking,i="".concat(e,"_").concat(n),u=z.size.tile,b=e*z.size.tile,f=n*z.size.tile;if(jt(t))return Object(ne.jsx)(Le,{size:u,variant:t,top:b,left:f},i);t!==d.FireCore&&t!==d.FireHorizontal&&t!==d.FireVertical||(a=t);var p=Object(M.a)({key:i,size:u,top:b,left:f,animate:c,variant:t,fireSquare:a},o&&{color:le.palette.color[t===l.NonBreaking?"secondary":"primary"],collisionIndex:s++});return r&&(o&&Object(ne.jsx)(he,Object(M.a)({},p))||Object(ne.jsx)(qe,Object(M.a)({},p)))||Object(ne.jsx)(qe,Object(M.a)({},p))}))})),i]})},Fe=function(t){var e=t.children,n=Object(C.c)(Kt()),r=Object(C.c)(Wt()),a=!Object(C.c)(Jt()),o=Object(C.c)(Object(kt.a)(Zt,(function(t){return t.animationCounter})));return Object(ne.jsx)(Ae,{size:z.size.game,gameMap:n,is3D:r,isTopView:a,animationCounter:o,children:e})},Ge=function(){return ee(),Object(ne.jsxs)(oe,{children:[Object(ne.jsx)(pe,{}),Object(ne.jsx)(Fe,{children:Object(ne.jsx)(Me,{})})]})},Ue=n(13),$e=n(35),_e=n(36),Ve=n(16),Xe=function(t,e){Object.keys(e).forEach((function(n){t[n]=e[n]}))},He=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,e=arguments.length>1?arguments[1]:void 0;return Object(Ve.b)(t,(function(n){var r=function(e,r){var a=ut(e),o=a.xSquare,i=a.ySquare;try{n.gameMap[i][o]=r}catch(c){console.error("Square being set is out of boundaries",{gameMap:t.gameMap,xSquare:o,ySquare:i})}},a=function(e){var r=function(e){var n=ut(e),r=n.xSquare,a=n.ySquare;try{var o=t.gameMap[a][r];if(o!==l.Breaking)return null;var i=gt();return i&&o===l.Breaking?{square:i,coordinates:{ySquare:a,xSquare:r}}:null}catch(c){return console.error("Square being set is out of boundaries",{gameMap:t.gameMap,xSquare:r,ySquare:a}),null}}(e);if(r){var a=r.square,o=r.coordinates,i=o.xSquare,c=o.ySquare;n.powerUps[c]||(n.powerUps[c]={}),n.powerUps[c][i]=a}},o=function(e){return t.players[e].state},i=function(t){return pt(o(t),u.BombSize)},c=function(t){var e=o(t);return e.deathCount>=pt(e,u.Life)},s=function(t){n.players[t].state.deathCount++};switch(e.type){case qt:Xe(n,e.payload);break;case Dt:n.players.P1=Object(Ve.a)(Pt.P1);break;case Rt:var b=e.payload,f=b.animate,p=b.gameMap;n.gameMap=p,f&&n.animationCounter++;break;case Bt:var v=e.payload,m=v.playerId,g=v.newRef;if(!g)break;n.players[m].ref=Object(Ve.a)(g),r(t.players[m].coordinates,m);break;case Nt:var j=e.payload,O=j.playerId,y=j.direction,h=j.onComplete;if(c(O))return;var x=t.is3D,k=t.players,w=t.gameMap,E=k[O];V({playerConfig:E,direction:y,is3D:x,gameMap:w},function(t){return pt(o(t),u.MovementSpeed)}(O),h);break;case Lt:var S=e.payload,z=S.playerId,C=S.newCoordinates;if(c(z))return;var M=A(C),T=M.ySquare,P=M.xSquare,I=t.gameMap[T][P];It.includes(I)&&s(z);var D=t.players[z].coordinates,R=A(D),B=R.ySquare,L=R.xSquare;t.gameMap[B][L]===z&&r(D,l.Empty);var N=t.gameMap[T][P];jt(N)&&n.players[z].state.powerUps[N]++,r(C,z),n.players[z].coordinates=C;break;case At:var G=e.payload;if(c(G))return;var U=t.players[G],$=U.coordinates,_=ut($),X=_.xSquare,H=_.ySquare;if(t.gameMap[H][X]===d.Bomb)return;if(t.bombs.filter((function(t){return t.playerId===G})).length>=function(t){return pt(o(t),u.BombCount)}(G))return;var Z=vt(U);n.bombs.push(Z),r(U.coordinates,d.Bomb);break;case Ft:var Y=e.payload;n.bombs=n.bombs.filter((function(t){return t.id!==Y}));break;case Gt:var W=e.payload,J=e.cb;if(!t.bombs.find((function(t){return t.id===W})))return;var K=function e(n,o){var c=new Set;if(o.includes(n))return c;var l=t.bombs.find((function(t){return t.id===n}));if(!l)return c;var u={top:l.top,left:l.left},b=i(l.playerId),f=ft(t.gameMap,t.players,u,b).coordinatesToSetOnFire,p=f.horizontal,v=f.vertical;return[{fireCoordinates:p,direction:d.FireHorizontal},{fireCoordinates:v,direction:d.FireVertical}].forEach((function(n){var i=n.fireCoordinates,u=n.direction;i.forEach((function(n){a(n),r(n,u),function(e){var n=e.xSquare,r=e.ySquare;Object.values(t.players).forEach((function(t){var e=t.id,a=t.coordinates,o=A(a),i=o.xSquare,c=o.ySquare;i===n&&c===r&&s(e)}))}(n);var i=l.id,b=function(e,n){var r=e.ySquare,a=e.xSquare;if(t.gameMap[r][a]!==d.Bomb)return null;var o=F(e),i=o.top,c=o.left,l=t.bombs.find((function(t){var e=t.top,n=t.left;return i===e&&c===n}));return l?l.id===n?null:l:null}(n,i);b&&(e(b.id,[].concat(Object(q.a)(o),[i])).forEach((function(t){return c.add(t)})),c.add(b.id))}))})),r(p[0],d.FireCore),c}(W,[]);null===J||void 0===J||J(K);break;case Ut:!function(e){var a=t.bombs.find((function(t){return t.id===e}));if(a){var o={top:a.top,left:a.left},c=i(a.playerId);n.bombs=n.bombs.filter((function(t){return t.id!==e}));var s=ft(t.gameMap,t.players,o,c,!0).coordinatesToSetOnFire,u=s.horizontal,b=s.vertical;[].concat(Object(q.a)(u),Object(q.a)(b)).forEach((function(e){var a,o=ut(e),i=o.xSquare,c=o.ySquare,s=null===(a=t.powerUps[c])||void 0===a?void 0:a[i];s?(r(e,s),n.powerUps[c][i]=null):r(e,l.Empty)}))}}(e.payload);break;case $t:n.animationCounter++;break;case _t:n.is3D=!n.is3D;break;case Vt:n.isSideView=!n.isSideView;break;case Xt:if(n.players.P2){delete n.players.P2;break}n.players.P2=Object(Ve.a)(Pt.P2);break;case Ht:if(n.players.P4){delete n.players.P4;break}n.players.P4=Object(Ve.a)(Pt.P4)}}))},Ze=Object(Ue.combineReducers)(Object(y.a)({},Mt,He)),Ye=function(t){var e=[$e.a],n=Ue.applyMiddleware.apply(void 0,e);return Object(Ue.createStore)(Ze,t,Object(_e.composeWithDevTools)(n))}({});var We=function(){return Object(ne.jsxs)(C.a,{store:Ye,children:[Object(ne.jsx)(O,{children:Object(ne.jsx)(Ge,{})}),Object(ne.jsx)("div",{id:"created-by-numan"}),Object(ne.jsx)(ce,{})]})},Je=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,53)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,o=e.getLCP,i=e.getTTFB;n(t),r(t),a(t),o(t),i(t)}))};m.a.render(Object(ne.jsx)(p.a.StrictMode,{children:Object(ne.jsx)(We,{})}),document.getElementById("root")),Je()}},[[52,1,2]]]);
(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{27:function(t,e,n){},32:function(t,e,n){},33:function(t,e,n){"use strict";n.r(e);var r,o=n(0),a=n.n(o),i=n(18),c=n.n(i),s=(n(27),n(3)),l=n(4),u=l.c.div(r||(r=Object(s.a)(["\n\twidth: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n"]))),d=n(9),b=n(8),f=n(5),j=n(2),m=n(6),p=n(7),O={size:{game:15,character:32,tile:32,movement:32,collisionMin:1,collisionMax:1,bomb:16,explosion:1},duration:{movement:300,bomb:{firing:2,exploding:2}},keyboardConfig:{player:{P1:{MoveUp:p.j,MoveRight:p.b,MoveDown:p.f,MoveLeft:p.a,DropBomb:p.h},P2:{MoveUp:p.i,MoveRight:p.e,MoveDown:p.c,MoveLeft:p.d,DropBomb:p.g}}}};O.size.collisionMin=Math.floor(O.size.game*O.size.game/3),O.size.collisionMax=Math.floor(O.size.game*O.size.game/2);var v,g,x,h,y,z,w,k,P,E=O,D=Object(l.a)(v||(v=Object(s.a)(["\n\t:root {\n\t\t/* Colors */\n\t\t--primary-background: #13141b;\n\t\t--secondary-background: #1a1d28;\n\n\t\t--primary-color: #ec7ebd;\n\t\t--secondary-color: #763ee6;\n\n\t\t--error-color: rgb(255, 122, 105);\n\t\t--warning-color: rgb(241, 168, 23);\n\t\t--success-color: rgb(49, 162, 76);\n\t\t--info-color: rgb(134, 218, 255);\n\t\t--default-color: rgb(228, 230, 235);\n\n\t\t/* Utilities */\n\t\t--border-radius: 4px;\n\t\t--padding: 10px;\n\n\t\t/* Game */\n\t\t--character-size: ","px;\n\t\t--tile-size: ",";\n\t\t--game-size: ",";\n\t\t\n\t\t/* Animations */\n\t\t/* @see https://easings.net/#easeInOutBack */\n\t\t--ease-in-out-back: cubic-bezier(0.68, -0.6, 0.32, 1.6);\n\t\t--incremental-animation-delay: 0.03s;\n\t\t--block-animation-duration: 0.5s;\n\t}\n"])),E.size.character,E.size.tile,E.size.game),$={palette:{background:{primary:"var(--primary-background)",secondary:"var(--secondary-background)"},color:{primary:"var(--primary-color)",secondary:"var(--secondary-color)",error:"var(--error-color)",warning:"var(--warning-color)",success:"var(--success-color)",info:"var(--info-color)",default:"var(--default-color)"}},shape:{borderRadius:"var(--border-radius)",padding:"var(--padding)"},game:{character:{size:"var(--character-size)"}}},T=n(1),S=l.c.button(g||(g=Object(s.a)(["\n\tbackground-color: ",";\n\t/* IGNORE SIZE FOR NOW */\n\tborder-radius: ",";\n\tpadding: ",";\n"])),(function(t){var e=t.$variant;return $.palette.color[e]}),$.shape.borderRadius,$.shape.padding),C=function(t){var e=t.variant,n=t.size,r=t.children,o=Object(m.a)(t,["variant","size","children"]);return Object(T.jsx)(S,Object(j.a)(Object(j.a)({$variant:e,$size:n},o),{},{children:r}))},M=Object(o.memo)(C);!function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT"}(x||(x={})),function(t){t.X="X",t.Y="Y"}(h||(h={})),function(t){t.Firing="Firing",t.Exploding="Exploding",t.Exploded="Exploded"}(y||(y={})),function(t){t.P1="P1",t.P2="P2",t.P3="P3",t.P4="P4"}(z||(z={})),(k=w||(w={})).Empty="T1",k.Breaking="T2",k.NonBreaking="T3",function(t){t.BombSize="PU1",t.Speed="PU2",t.Invincibility="PU3"}(P||(P={}));var N,R=n(16);function I(t,e){var n=e||t,r=void 0!==e&&t||0;return Math.floor(Math.random()*(n-r))+r}var B,F,L,A,U,X,Y,W,q,G,J,V,H,_,Z,K,Q=E.size.game-1,tt=[[0,0],[0,1],[1,0],[0,Q],[0,Q-1],[1,Q],[Q,Q],[Q,Q-1],[Q-1,Q],[Q,0],[Q,1],[Q-1,0]],et=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tt,n=[].concat(Object(d.a)(Object.keys(w)),Object(d.a)(Array(3).fill("Empty"))),r=Array(t).fill(0).map((function(){return Array(t).fill(0).map((function(){return w[n[I(n.length)]]}))}));return e.forEach((function(t){var e=Object(f.a)(t,2),n=e[0],o=e[1];r[n][o]!==w.Empty&&(r[n][o]=w.Empty)})),r},nt=function(t){var e=t.top,n=t.left;return{ySquare:e/E.size.movement,xSquare:n/E.size.movement}},rt=E.size.movement*(E.size.game-1),ot=function(t,e,n){var r,o=nt({top:t,left:e}),a=o.xSquare,i=null===(r=n[o.ySquare])||void 0===r?void 0:r[a];return!(i===w.Breaking||i===w.NonBreaking)&&!(e<0||e>rt)&&!(t<0||t>rt)},at=(N={},Object(b.a)(N,h.X,{REPLACE:/rotateX\(-?\d+deg\)/g,FIND:Object(R.a)(/rotateX\((\x2D?[0-9]+)deg\)/,{degree:1})}),Object(b.a)(N,h.Y,{REPLACE:/rotateY\(-?\d+deg\)/g,FIND:Object(R.a)(/rotateY\((\x2D?[0-9]+)deg\)/,{degree:1})}),N),it=function(t,e,n){e&&(t.current.style.transition="".concat(E.duration.movement,"ms"),t.current.style.transform=function(t,e){var n=90,r=h.Y;return e!==x.DOWN&&e!==x.LEFT||(n*=-1),e!==x.UP&&e!==x.DOWN||(r=h.X),t.replace(at[r].REPLACE,"rotate".concat(r,"(").concat(n,"deg)"))}(t.current.style.transform,n))},ct="translateZ(calc(var(--tile-size) / 2 * 1px)) rotateX(0deg) rotateY(0deg)",st=function(t,e,n){return Object(b.a)({},t,{coordinates:{top:32*e,left:32*n},ref:Object(o.createRef)()})},lt=function(t){console.log(t)},ut=function(t,e){var n=Object(o.useRef)();Object(o.useEffect)((function(){n.current=t}),[t]),Object(o.useEffect)((function(){var t=setInterval((function(){var t;null===(t=n.current)||void 0===t||t.call(n)}),e);return function(){return clearInterval(t)}}),[e])},dt=function(t,e,n,r,a,i){var c=Object(o.useRef)({P1:(new Date).getTime(),P2:(new Date).getTime(),P3:(new Date).getTime(),P4:(new Date).getTime()}),s=Object(o.useRef)({});return ut((function(){null===i||void 0===i||i(t)}),E.duration.movement),Object(o.useEffect)((function(){var o=function(t,o,a,i){var c,l=t.top,u=t.left,d=o.MoveUp,b=o.MoveRight,f=o.MoveDown,j=o.MoveLeft;if(r&&((c=i).current.style.transition="0ms",c.current.style.transform=ct),s.current[d]){var m=l-E.size.movement,p=u;ot(m,p,n)&&setTimeout((function(){e(a,{top:m,left:p}),it(i,r,x.UP)}),0)}if(s.current[b]){var O=l,v=u+E.size.movement;ot(O,v,n)&&setTimeout((function(){e(a,{top:O,left:v}),it(i,r,x.RIGHT)}),0)}if(s.current[f]){var g=l+E.size.movement,h=u;ot(g,h,n)&&setTimeout((function(){e(a,{top:g,left:h}),it(i,r,x.DOWN)}),0)}if(s.current[j]){var y=l,z=u-E.size.movement;ot(y,z,n)&&setTimeout((function(){e(a,{top:y,left:z}),it(i,r,x.LEFT)}),0)}},i=function(){s.current&&Object.keys(t).forEach((function(e){var n=t[e].coordinates,r=E.keyboardConfig.player[e],i=t[e].ref;if(i.current){var l=(new Date).getTime();l-c.current[e]>E.duration.movement&&(c.current[e]=l,o(n,r,e,i))}!function(t,e){var n=t.top,r=t.left,o=e.DropBomb;s.current[o]&&a({top:n,left:r})}(n,r)}))},l=function(t){if(s.current&&c.current){var e="keydown"===t.type;!function(t,e){s.current[t.code]=e}(t,e),e&&i()}};return window.addEventListener("keyup",l),window.addEventListener("keydown",l),function(){window.removeEventListener("keyup",l),window.removeEventListener("keydown",l)}}),[a,n,r,e,t]),{}},bt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(e){setTimeout(e,t)}))},ft=n(15),jt=n.n(ft),mt=n(22),pt=Object(l.d)(B||(B=Object(s.a)(["\n\t0% { transform:rotate(0deg); }\n\t/* 40% -> 100% */\n\t","\n"])),Array(7).fill(0).map((function(t,e){return"".concat(10*(e+4),"% {transform: rotate(").concat((e+1)*((e<4?90:e<6&&270)||360),"deg);}")})).join("\n")),Ot=l.c.div(F||(F=Object(s.a)(["\n\tanimation: "," linear forwards;\n"])),pt),vt=l.c.div(A||(A=Object(s.a)(["\n\t","\n"])),(function(t){var e=t.$explosionAxis,n=t.$explosionSize;return Object(l.b)(U||(U=Object(s.a)(["\n\t\tanimation: ","\n\t\t\tvar(--ease-in-out-back) forwards;\n\t"])),function(t){var e=t.$explosionAxis,n=2*(2*(t.$explosionSize+1)-1),r=2,o=2;return e===h.X?r=n:o=n,r-=.5,o-=.5,Object(l.d)(L||(L=Object(s.a)(["\n\t  \t0% {\n\t\t\ttransform: scale(1);\n\t\t\topacity: 1;\n\t\t}\n\t\t65% {\n\t\t\ttransform: scale(",", ",");\n\t\t}\n\t\t100% {\n\t\t\topacity: 0;\n\t\t}\n\t"])),r,o)}({$explosionAxis:e,$explosionSize:n}))})),gt=function(t){var e=t.color,n=t.firingDuration,r=t.explodingDuration,a=t.explosionSize,i=t.id,c=t.top,s=t.left,l=t.onExplosion,u=Object(o.useState)(y.Firing),d=Object(f.a)(u,2),b=d[0],m=d[1];Object(o.useEffect)((function(){(function(){var t=Object(mt.a)(jt.a.mark((function t(){return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bt(1e3*n);case 2:return m(y.Exploding),t.next=5,bt(r/2*1e3);case 5:l(i,{top:c,left:s});case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[r,a,n,l,c,s,i]);var p=E.size.bomb,O=p/2,v=null,g={position:"absolute",backgroundColor:e,width:p,height:p,top:c+O,left:s+O,animationDuration:"".concat(r,"s")};return b===y.Exploding&&(v=Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(vt,{style:g,$explosionAxis:h.X,$explosionSize:a}),Object(T.jsx)(vt,{style:g,$explosionAxis:h.Y,$explosionSize:a})]})),b===y.Firing&&(v=Object(T.jsx)(Ot,{style:Object(j.a)(Object(j.a)({},g),{},{animationDuration:"".concat(n,"s")})})),v},xt=(n(32),Object(o.forwardRef)((function(t,e){var n=t.size,r=t.top,o=t.left,a=t.animate,i=t.variant,c=t.color,s=t.collisionIndex,l=t.style,u=t.className,d=Object(m.a)(t,["size","top","left","animate","variant","color","collisionIndex","style","className"]);return Object(T.jsx)("div",Object(j.a)(Object(j.a)({className:"".concat(u&&"".concat(u," ")||"","cuboid bouncy-block-").concat((a?s:"no-animation")||0," ").concat(i),style:Object(j.a)(Object(j.a)({},l),{},{top:r,left:o,width:n,height:n}),ref:e},d),{},{children:Array(6).fill(0).map((function(t,e){return Object(T.jsx)("div",{className:"cuboid__side",style:Object(j.a)(Object(j.a)({},c&&{backgroundColor:c}),{},{width:n,height:n})},e)}))}))}))),ht=l.c.span(X||(X=Object(s.a)(["\n\tcolor: ",";\n"])),$.palette.color.warning),yt=l.c.div(Y||(Y=Object(s.a)(["\n\tcolor: #000;\n"]))),zt=l.c.span(W||(W=Object(s.a)([""]))),wt=l.c.span(q||(q=Object(s.a)([""]))),kt=l.c.div(G||(G=Object(s.a)(["\n\twidth: ",";\n\theight: ",";\n\tbackground-color: ",";\n\tposition: absolute;\n\t/* top: 0;\n\tleft: 0; */\n\tborder-radius: 50%;\n\tdisplay: flex;\n\tjustify-content: center;\n\n\ttransition: top ","ms,\n\t\tleft ","ms;\n\n\t& > "," {\n\t\tz-index: 9999;\n\t\tposition: absolute;\n\t\ttop: -27px;\n\t\tfont-size: 10px;\n\t}\n\n\t& > "," {\n\t\tposition: absolute;\n\t\ttop: 7px;\n\t\tfont-size: 8px;\n\n\t\t/* & > "," {\n\t\t}\n\t\t& > "," {\n\t\t} */\n\t}\n"])),$.game.character.size,$.game.character.size,$.palette.color.success,E.duration.movement,E.duration.movement,ht,yt,zt,wt),Pt=Object(o.forwardRef)((function(t,e){var n=t.id,r=t.name,o=t.coordinates,a=o.top,i=o.left,c=t.is3D,s=Object(m.a)(t,["id","name","coordinates","is3D"]);return c&&Object(T.jsx)(xt,Object(j.a)({size:32,left:i,top:a,animate:!0,color:$.palette.color.success,style:{transform:ct},variant:z[n],ref:e},s))||Object(T.jsxs)(kt,Object(j.a)(Object(j.a)({$name:"".concat(r," ").concat(n),style:{top:a,left:i},ref:e},s),{},{children:[Object(T.jsx)(ht,{children:"".concat(r," ").concat(n)}),Object(T.jsxs)(yt,{children:[Object(T.jsx)(zt,{children:"o-o"}),Object(T.jsx)("br",{}),Object(T.jsx)(wt,{children:"==="})]})]}))})),Et=function(t){var e=Object(o.useRef)();return Object(o.useEffect)((function(){e.current=t}),[t]),e.current},Dt=Object(l.d)(J||(J=Object(s.a)(["\n\t0% { transform: scale(0, 0); }\n\t25% { transform: scale(0.9, 1.1); }\n\t50% { transform: scale(1.1, 0.9); }\n\t75% { transform: scale(0.95, 1.05); }\n\t100% { transform: scale(1, 1); }\n"]))),$t=l.c.div.attrs((function(t){var e=t.$size,n=t.$top,r=t.$left,o=t.$color;return{style:Object(j.a)({width:e,height:e,top:n,left:r},o&&{backgroundColor:o})}}))(V||(V=Object(s.a)(["\n\tposition: absolute;\n\t/* background-color: ","; */\n\tborder: 1px solid ",";\n\t","\n"])),$.palette.background.secondary,$.palette.background.primary,(function(t){var e=t.$color,n=t.$collisionIndex;return t.$animate&&e&&Object(l.b)(H||(H=Object(s.a)(["\n\t\t\t\t\ttransform: scale(0, 0);\n\t\t\t\t\tz-index: 9999;\n\t\t\t\t\tanimation: ","\n\t\t\t\t\t\tvar(--block-animation-duration) ease\n\t\t\t\t\t\tcalc(\n\t\t\t\t\t\t\t"," *\n\t\t\t\t\t\t\t\tvar(--incremental-animation-delay)\n\t\t\t\t\t\t)\n\t\t\t\t\t\tforwards;\n\t\t\t\t"])),Dt,n)||""})),Tt=function(t){var e=t.size,n=t.top,r=t.left,o=t.animate,a=t.color,i=t.collisionIndex;return Object(T.jsx)($t,{$size:e,$top:n,$left:r,$animate:o,$color:a,$collisionIndex:i})},St=Object(o.memo)(Tt),Ct=l.c.div(_||(_=Object(s.a)(["\n\twidth: ",";\n\theight: ",";\n\tborder-radius: ",";\n\tbackground-color: ",";\n\tposition: relative;\n\tbox-shadow: 0 10px 20px rgba(0, 0, 0, 0.5), 0 6px 6px rgba(0, 0, 0, 0.6);\n\ttransition: transform var(--block-animation-duration);\n\n\t","\n"])),(function(t){var e=t.$size;return"calc(".concat($.game.character.size," * ").concat(e,")")}),(function(t){var e=t.$size;return"calc(".concat($.game.character.size," * ").concat(e,")")}),$.shape.borderRadius,$.palette.background.secondary,(function(t){var e=t.$is3D,n=t.$isTopView,r="";return e&&(r+="transform-style: preserve-3d;",n||(r+="\ntransform: rotateX(-24deg) rotateY(-24deg) rotateX(90deg);")),r})),Mt=function(t){var e=t.size,n=t.gameMap,r=t.is3D,o=t.isTopView,a=t.animationCounter,i=t.children,c=a!==Et(a),s=1;return Object(T.jsxs)(Ct,{$size:e,$is3D:r,$isTopView:o,children:[n.map((function(t,e){return t.map((function(t,n){var o=t===w.NonBreaking||t===w.Breaking,a=Object(j.a)({key:"".concat(e,"_").concat(n),size:E.size.tile,top:e*E.size.tile,left:n*E.size.tile,animate:c,variant:t},o&&{color:$.palette.color[t===w.NonBreaking?"secondary":"primary"],collisionIndex:s++});return r&&(o&&Object(T.jsx)(xt,Object(j.a)({},a))||Object(T.jsx)(St,Object(j.a)({},a)))||Object(T.jsx)(St,Object(j.a)({},a))}))})),i]})},Nt=l.c.div(Z||(Z=Object(s.a)(["\n\ttext-align: center;\n\t","\n"])),(function(t){return t.$is3D?"perspective: 1000":""})),Rt=function(t){var e,n=t.active,r=void 0!==n&&n,o=t.onClick,a=t.children,i=Object(m.a)(t,["active","onClick","children"]);return Object(T.jsx)(M,Object(j.a)(Object(j.a)({style:{width:"100%",wordWrap:"break-word",marginBottom:10},variant:r?"success":"warning",size:"medium",onClick:(e=o,function(t){t.currentTarget.blur(),e(t)})},i),{},{children:a}))},It=E.size.game-1,Bt=st("P1",0,0),Ft=st("P2",0,It),Lt=st("P3",It,0),At=l.c.div(K||(K=Object(s.a)(["\n\tdisplay: flex;\n\tjustify-content: center;\n\tflex-wrap: wrap;\n\n\t& > :first-child {\n\t\tmargin-right: 50px;\n\t\twidth: 15%;\n\t\t@media only screen and (max-width: 600px) {\n\t\t\twidth: 100%;\n\t\t\tmargin: 50px auto;\n\t\t\torder: 2;\n\t\t\t& button {\n\t\t\t\twidth: 80% !important;\n\t\t\t}\n\t\t}\n\t}\n"]))),Ut=function(){var t=Object(o.useState)((function(){return et(E.size.game)})),e=Object(f.a)(t,2),n=e[0],r=e[1],a=Object(o.useState)(0),i=Object(f.a)(a,2),c=i[0],s=i[1],l=Object(o.useState)(!1),u=Object(f.a)(l,2),p=u[0],O=u[1],v=Object(o.useState)(!0),g=Object(f.a)(v,2),x=g[0],h=g[1],y=Object(o.useState)([]),z=Object(f.a)(y,2),k=z[0],P=z[1],D=Object(o.useState)(Object(j.a)({},Bt)),$=Object(f.a)(D,2),S=$[0],C=$[1],M=Object(o.useCallback)((function(t,e){P((function(e){return e.filter((function(e){return e.id!==t}))})),r(function(t,e,n){for(var r=JSON.parse(JSON.stringify(t)),o=nt(e),a=o.xSquare,i=o.ySquare,c=Math.max(0,i-n);c<=i+n;c++)r[c][a]===w.Breaking&&(r[c][a]=w.Empty);for(var s=Math.max(0,a-n);s<=a+n;s++)r[i][s]===w.Breaking&&(r[i][s]=w.Empty);return r}(n,e,E.size.explosion))}),[n]);return dt.apply(void 0,[S,function(t,e){C((function(n){return Object(j.a)(Object(j.a)({},n),{},Object(b.a)({},t,Object(j.a)(Object(j.a)({},n[t]),{},{coordinates:e})))}))},n,p,function(t){var e=t.top,n=t.left;P((function(t){return[].concat(Object(d.a)(t),[{id:(new Date).toJSON(),top:e,left:n}])}))}].concat(Object(d.a)(!!S.P3&&[lt]||[]))),Object(T.jsxs)(Nt,{$is3D:p,children:[Object(T.jsx)("h1",{children:"Bomberman - Work In Progress"}),Object(T.jsxs)(At,{children:[Object(T.jsxs)("div",{children:[Object(T.jsx)(Rt,{onClick:function(){r(et(E.size.game)),s((function(t){return t+1}))},children:"New Collision Coordinates"}),Object(T.jsx)(Rt,{active:p,onClick:function(){O((function(t){return!t}))},children:"Toggle 3D (Experimental)"}),Object(T.jsx)(Rt,{active:!x,onClick:function(){h((function(t){return!t}))},disabled:!p,children:"Toggle Side View"}),Object(T.jsx)("br",{}),Object(T.jsx)(Rt,{active:!!S.P2,onClick:function(){C((function(t){var e=t.P2,n=Object(m.a)(t,["P2"]);return Object(j.a)(Object(j.a)({},n),!e&&Ft)}))},children:"Toggle Two-Player Mode"}),Object(T.jsx)(Rt,{active:!!S.P3,onClick:function(){C((function(t){var e=t.P3,n=Object(m.a)(t,["P3"]);return Object(j.a)(Object(j.a)({},n),!e&&Lt)}))},children:"Toggle NPC"}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{})]}),Object(T.jsxs)(Mt,{size:E.size.game,gameMap:n,is3D:p,isTopView:x,animationCounter:c,children:[Object.entries(S).map((function(t){var e=Object(f.a)(t,2),n=e[0],r=e[1],o=r.coordinates,a=r.ref;return Object(T.jsx)(Pt,{id:n,name:"Bomber",coordinates:o,is3D:p,ref:a},n)})),k.map((function(t){var e=t.id,n=Object(m.a)(t,["id"]);return Object(T.jsx)(gt,Object(j.a)(Object(j.a)({id:e},n),{},{color:"red",explosionSize:E.size.explosion,firingDuration:E.duration.bomb.firing,explodingDuration:E.duration.bomb.exploding,onExplosion:M}),e)}))]})]})]})},Xt=function(){return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(u,{children:Object(T.jsx)(Ut,{})}),Object(T.jsx)("div",{id:"created-by-numan"}),Object(T.jsx)(D,{})]})},Yt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,34)).then((function(e){var n=e.getCLS,r=e.getFID,o=e.getFCP,a=e.getLCP,i=e.getTTFB;n(t),r(t),o(t),a(t),i(t)}))};c.a.render(Object(T.jsx)(a.a.StrictMode,{children:Object(T.jsx)(Xt,{})}),document.getElementById("root")),Yt()}},[[33,1,2]]]);